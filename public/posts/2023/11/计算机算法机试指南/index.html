<!DOCTYPE html>
<html lang="zh-CN">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>计算机算法机试指南 - Jasaxion一只大雄</title>
    <meta property="og:title" content="计算机算法机试指南 - Jasaxion一只大雄">
    
    <meta name="twitter:card" content="summary">
    <meta name="referrer" content="never" />

    
    
    <link rel="stylesheet" href="/css/custom.css"></link>
    <script type="text/javascript" src="/js/view-image.js"></script>
    <script>
    
    window.ViewImage && ViewImage.init('.main img:not(.avatar,.tk-avatar-img)')
    </script>
    <script src="/js/custom-markdown-parser.js"></script>
    <script  src="https://jsd.cdn.zzko.cn/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
    <script>window.addEventListener('load', () => {  quicklink.listen();});</script>
    
    

    
      
    

    
      
      <meta property="description" content="我的算法学习之路的完全心得笔记，走过的弯路与总结的模板。">
      <meta property="og:description" content="我的算法学习之路的完全心得笔记，走过的弯路与总结的模板。">
      
    

    
    
    <meta name="twitter:image" content="https://pve.digikamc.cn:8343/i/2024/11/25/meqfws-0.png">
    
    

    
    <meta property="keywords" content ="算法, 心得, 程序设计, 机试, 上机">
    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css"
        integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js"
        integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
        crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                
                
                delimiters: [
                    { left: '$$', right: '$$', display: true },
                    { left: '$', right: '$', display: false },
                    { left: '\\(', right: '\\)', display: false },
                    { left: '\\[', right: '\\]', display: true }
                ],
                
                throwOnError: false
            });
        });
    </script>
    
  </head>

  
  <body class="posts">
    <header class="masthead">
      <h1><a href="/">Jasaxion一只大雄</a></h1>

<p class="tagline">风打，碎琉璃； 打不碎的，是那阳光漫地。The wind strikes, shattering the glazed glass; Yet unbroken remains the sunlight spilling across the earth.</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/posts/">归档 / Posts</a></li>
  
  <li><a href="/resume/">关于我 / CV</a></li>
  
  <li><a href="/tags/tech/">技术目录 / Tech</a></li>
  
  <li><a href="/tags/notes">我的笔记 / Note</a></li>
  
  <li><a href="/tags/read/">科研与阅读 / Read</a></li>
  
  <li><a href="/whisper/">碎碎念 / Whisper</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>计算机算法机试指南</h1>



<h3>






2023-11-25
</h3>

<hr>


      </header>


 <nav id="TableOfContents">
  <ul>
    <li><a href="#计算机算法机试指南">计算机算法机试指南</a>
      <ul>
        <li>
          <ul>
            <li><a href="#前缀和">前缀和</a></li>
            <li><a href="#差分">差分</a></li>
            <li><a href="#二分">二分</a></li>
            <li><a href="#双指针算法">双指针算法</a></li>
            <li><a href="#高精度">高精度</a></li>
            <li><a href="#递推">递推</a></li>
            <li><a href="#递归">递归</a></li>
            <li><a href="#并查集">并查集</a></li>
            <li><a href="#哈希">哈希</a></li>
            <li><a href="#数据结构-栈-队列-单调栈-单调队列">数据结构｜栈｜队列｜单调栈&amp;单调队列⭐️</a></li>
            <li><a href="#kmp">KMP</a></li>
            <li><a href="#trie树">Trie树</a></li>
            <li><a href="#bfs广度优先遍历">BFS广度优先遍历</a></li>
            <li><a href="#dfs深度优先遍历">DFS深度优先遍历</a></li>
            <li><a href="#搜索与图论概述">搜索与图论概述</a></li>
            <li><a href="#最小生成树">最小生成树</a></li>
            <li><a href="#割点">割点</a></li>
            <li><a href="#数论">数论</a></li>
            <li><a href="#分治">分治</a></li>
            <li><a href="#归并">归并</a></li>
            <li><a href="#贪心">贪心</a></li>
            <li><a href="#动态规划">动态规划</a></li>
            <li><a href="#动态规划-背包问题">动态规划—背包问题</a></li>
            <li><a href="#区间dp">区间DP</a></li>
            <li><a href="#树形dp">树形DP</a></li>
            <li><a href="#状态压缩dp">状态压缩DP</a></li>
            <li><a href="#树状数组">树状数组</a></li>
            <li><a href="#线段树">线段树</a></li>
            <li><a href="#stl函数">STL函数</a></li>
            <li><a href="#骗分技巧">骗分技巧</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav> 


<h1 id="计算机算法机试指南">计算机算法机试指南</h1>
<blockquote>
<p>打响计算机CSP算法以及机试必胜的第一战✌️</p>
</blockquote>
<p><strong>算法解题思路七步法：</strong></p>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqfws-0.png" alt="image-20230305220940231"></p>
<p><strong>算法复杂度分析</strong></p>
<!-- <img src="./wdcs.assets/datarange.png" style="zoom:80%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqpt1-0.png" alt="datarange"></p>
<h3 id="前缀和">前缀和</h3>
<h4 id="模板回顾">模板回顾</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//一维前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>S[i] <span style="color:#555">=</span> a[<span style="color:#f60">1</span>] <span style="color:#555">+</span> a[<span style="color:#f60">2</span>] <span style="color:#555">+</span> ... a[i]
</span></span><span style="display:flex;"><span>a[l] <span style="color:#555">+</span> ... <span style="color:#555">+</span> a[r] <span style="color:#555">=</span> S[r] <span style="color:#555">-</span> S[l <span style="color:#555">-</span> <span style="color:#f60">1</span>]
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">做一个</span>Sn数组<span style="color:#a00;background-color:#faa">，表示前</span>n个数的和
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">单独求某区段的和</span> <span style="color:#a00;background-color:#faa">就只需要</span> S[r] <span style="color:#555">-</span> S[l<span style="color:#555">-</span><span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">求前</span>n项和的数组Sn
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> ) scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> ) S[i] <span style="color:#555">=</span> S[i<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> a[i];  <span style="color:#09f;font-style:italic">//前缀和的初始化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#555">--</span><span style="color:#a00;background-color:#faa">区间和的计算</span> S[r] <span style="color:#555">-</span> S[l<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//二维前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>[<span style="color:#a00;background-color:#faa">含容斥原理的应用</span>]
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">自己分析的时候注意</span> x表示行<span style="color:#a00;background-color:#faa">、</span>y表示列<span style="color:#a00;background-color:#faa">。</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">分析时不要看成点，而是应该把点看成格子去理解！！！</span>
</span></span><span style="display:flex;"><span>S[i, j] <span style="color:#555">=</span> <span style="color:#a00;background-color:#faa">第</span>i行j列格子左上部分所有元素的和
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">以</span>(x1, y1)<span style="color:#a00;background-color:#faa">为左上角，</span>(x2, y2)<span style="color:#a00;background-color:#faa">为右下角的子矩阵的和为：</span>
</span></span><span style="display:flex;"><span>S[x2, y2] <span style="color:#555">-</span> S[x1 <span style="color:#555">-</span> <span style="color:#f60">1</span>, y2] <span style="color:#555">-</span> S[x2, y1 <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">+</span> S[x1 <span style="color:#555">-</span> <span style="color:#f60">1</span>, y1 <span style="color:#555">-</span> <span style="color:#f60">1</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//注意事项
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">用模板前缀和时，默认</span>i <span style="color:#555">&gt;=</span> <span style="color:#f60">1</span> ; j <span style="color:#555">&gt;=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">定义数组时；数组大小比规定大小大</span> <span style="color:#f60">10</span> <span style="color:#a00;background-color:#faa">最为保险</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">100000</span> <span style="color:#555">---&gt;</span> <span style="color:#f60">100010</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3956-截断数组">3956.截断数组</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/description/3959/">https://www.acwing.com/problem/content/description/3959/</a></p>
<p>不要想当然的做题，一定要善于分析，懂得思考，善于进行抽象思维，固定一刀的情况，去枚举另外的切割方式，思路见代码中的注释。</p>
<p><strong>思路：利用前缀和，固定第二刀，分析第一刀的可能情况即可</strong>，凡是涉及累加运算的，一定要想到前缀和！</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span>ll n,sum;
</span></span><span style="display:flex;"><span>ll a[N],s[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%lld&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%lld&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>        s[i] <span style="color:#555">=</span> s[i<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> a[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//如果不能被分为三段则表示有0种方案
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span>(s[n] <span style="color:#555">%</span> <span style="color:#f60">3</span> <span style="color:#555">!=</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>        printf(<span style="color:#c30">&#34;0</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//为了降低时间复杂度，我们单独枚举第二刀的位置即可
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//固定第二刀位置，我们分析第一刀恰好为num的情况，计为cnt
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//如果第二刀之前总和为2*num，那么此时的情况数应该为已有的情况数+cnt
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    ll num <span style="color:#555">=</span> s[n] <span style="color:#555">/</span> <span style="color:#f60">3</span>;
</span></span><span style="display:flex;"><span>    ll cnt <span style="color:#555">=</span> <span style="color:#f60">0</span>, res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(s[i <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">==</span> num) cnt <span style="color:#555">++</span>; <span style="color:#09f;font-style:italic">//表示第一刀的可能情况
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(s[i] <span style="color:#555">==</span> num <span style="color:#555">*</span> <span style="color:#f60">2</span>) res <span style="color:#555">+=</span> cnt; <span style="color:#09f;font-style:italic">//此时放置第二刀
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,res);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="1230-k倍区间">1230. K倍区间</h4>
<blockquote>
<p>很巧妙的一道题，这里我们采用前缀和的方式存放余数
$$
s[i] = (s[i-1] + a[i])%k\ &ndash;&gt;余数前缀和\
if \ s[i] == 0 \ &ndash;&gt;表示1～i其区间本身就是一个满足条件的解\
if \ (s[R] - s[L - 1])%k == 0\ (表示L-R区间满足条件)\
\ 	也就是说，s[R]%k == s[L-1]%k \ 如果两个区间的余数相同，那么也能构成一个k倍区间\
answer=sum(s[0]) + C_{cnt(余数相同的个数)}^2
$$
大概思路如上所示，在编写代码的时候有几个很巧妙的地方</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>例如：设置初始值cnt[0]=1
</span></span><span style="display:flex;"><span>-ans += cnt[s[i]];
</span></span><span style="display:flex;"><span>-cnt[s[i]]++;
</span></span><span style="display:flex;"><span>这两行代码的顺序不能变更，这样还不需要用组合公示，虽然理解难度增加了，但代码长度和时间复杂度减少一个常数
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span>ll a[N],s[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> cnt[N];
</span></span><span style="display:flex;"><span>ll ans;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,k;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>k);
</span></span><span style="display:flex;"><span>    cnt[<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//如果余数为0的话，那么其本身就是一个合法的区间
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%lld&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>        s[i] <span style="color:#555">=</span> (s[i<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> a[i])<span style="color:#555">%</span>k; <span style="color:#09f;font-style:italic">//用前缀和的方法存下其模的余数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>;i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        ans <span style="color:#555">+=</span> cnt[s[i]];  <span style="color:#09f;font-style:italic">//这里两行代码不能更改顺序，这里的处理方法类似于组合C^2_n
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        cnt[s[i]]<span style="color:#555">++</span>; <span style="color:#09f;font-style:italic">//此时余数相等的情况+1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,ans);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>类题：https://www.acwing.com/problem/content/101/</p>
<p>**注意点：**1.不能开long long；2.注意给出的坐标的下标是从0开始的；3.时刻注意数组的范围，不要想当然做题；</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> ans;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">5010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> s[N][N]; <span style="color:#09f;font-style:italic">//注意这里不要开long long,否则会MLE，要学会自己计算Memory
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> r;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> maxx,maxy;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>r);
</span></span><span style="display:flex;"><span>    r <span style="color:#555">=</span> min(r, <span style="color:#f60">5001</span>); <span style="color:#09f;font-style:italic">//考虑周到
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    maxx <span style="color:#555">=</span> maxy <span style="color:#555">=</span> r; <span style="color:#09f;font-style:italic">//限制初始边界
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> x,y,w;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>,<span style="color:#555">&amp;</span>x,<span style="color:#555">&amp;</span>y,<span style="color:#555">&amp;</span>w);
</span></span><span style="display:flex;"><span>        x<span style="color:#555">++</span>,y<span style="color:#555">++</span>;<span style="color:#09f;font-style:italic">//注意前缀和算法要从下标为1开始！！！！粗心大意
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        s[x][y]<span style="color:#555">+=</span>w;
</span></span><span style="display:flex;"><span>        maxx <span style="color:#555">=</span> max(maxx,x);
</span></span><span style="display:flex;"><span>        maxy <span style="color:#555">=</span> max(maxy,y);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> maxx; i <span style="color:#555">++</span>){ <span style="color:#09f;font-style:italic">//二维前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> maxy; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            s[i][j] <span style="color:#555">=</span> s[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j] <span style="color:#555">+</span> s[i][j <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">+</span> s[i][j] <span style="color:#555">-</span> s[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j <span style="color:#555">-</span> <span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> r; i <span style="color:#555">&lt;=</span> maxx; i <span style="color:#555">++</span>){ <span style="color:#09f;font-style:italic">//二维前缀和的求解，枚举右下角的端点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> r; j <span style="color:#555">&lt;=</span> maxy; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            ans <span style="color:#555">=</span> max(ans, s[i][j] <span style="color:#555">-</span> s[i<span style="color:#555">-</span>r][j] <span style="color:#555">-</span> s[i][j<span style="color:#555">-</span>r] <span style="color:#555">+</span> s[i<span style="color:#555">-</span>r][j<span style="color:#555">-</span>r]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,ans);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="差分">差分</h3>
<h4 id="模板回顾-1">模板回顾</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//一维差分
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>a数组是b数组的前缀和<span style="color:#a00;background-color:#faa">。</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">假想一个</span>B数组<span style="color:#a00;background-color:#faa">，使得</span>A数组是B数组的前缀和<span style="color:#a00;background-color:#faa">，那么称</span>B数组为A数组的差分<span style="color:#a00;background-color:#faa">。</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">对</span>B数组求一个前缀和就能得到A数组
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">假设</span>a数组全部都是0<span style="color:#a00;background-color:#faa">，</span>a数组中的值<span style="color:#a00;background-color:#faa">，相当于进行了</span>n次插入操作<span style="color:#a00;background-color:#faa">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">差分模板：</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a00;background-color:#faa">给区间</span>[l,r]<span style="color:#a00;background-color:#faa">中的每个数加上</span>c;
</span></span><span style="display:flex;"><span>	B[l] <span style="color:#555">+=</span> c;
</span></span><span style="display:flex;"><span>	B[r<span style="color:#555">+</span><span style="color:#f60">1</span>] <span style="color:#555">-=</span> c;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//实例
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r,<span style="color:#078;font-weight:bold">int</span> c)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>   b[l] <span style="color:#555">+=</span> c;   <span style="color:#09f;font-style:italic">//b为a的差分，bl+c则bl后的每一项al都会+c
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>   b[r <span style="color:#555">+</span> <span style="color:#f60">1</span>] <span style="color:#555">-=</span> c;  <span style="color:#09f;font-style:italic">//所以要使得后面r+1都要-c
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//不同问题在这一步的处理方式不同
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>    insert(i,i,a[i]);   <span style="color:#09f;font-style:italic">//假设a里面全是0，a内的每一项都是通过插入实现的
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">while</span>(m <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>		<span style="color:#078;font-weight:bold">int</span> l,r,c;     
</span></span><span style="display:flex;"><span>  	scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>,<span style="color:#555">&amp;</span>l,<span style="color:#555">&amp;</span>r,<span style="color:#555">&amp;</span>c);
</span></span><span style="display:flex;"><span>    insert(l,r,c);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n ;i <span style="color:#555">++</span>) b[i] <span style="color:#555">+=</span> b[i <span style="color:#555">-</span> <span style="color:#f60">1</span>]; <span style="color:#09f;font-style:italic">//将b变成前缀和--&gt;为了得到原来的数组
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//二维差分
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">给以</span>(x1, y1)<span style="color:#a00;background-color:#faa">为左上角，</span>(x2, y2)<span style="color:#a00;background-color:#faa">为右下角的子矩阵中的所有元素加上</span>c<span style="color:#a00;background-color:#faa">：</span>
</span></span><span style="display:flex;"><span>S[x1, y1] <span style="color:#555">+=</span> c, S[x2 <span style="color:#555">+</span> <span style="color:#f60">1</span>, y1] <span style="color:#555">-=</span> c, S[x1, y2 <span style="color:#555">+</span> <span style="color:#f60">1</span>] <span style="color:#555">-=</span> c, S[x2 <span style="color:#555">+</span> <span style="color:#f60">1</span>, y2 <span style="color:#555">+</span> <span style="color:#f60">1</span>] <span style="color:#555">+=</span> c
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">对数组</span>b进行前缀和累加可以恢复到原来数组a
</span></span><span style="display:flex;"><span>b[i][j] <span style="color:#555">=</span> b[i][j] <span style="color:#555">+</span> b[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j] <span style="color:#555">+</span> b[i][j <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">-</span> b[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j <span style="color:#555">-</span> <span style="color:#f60">1</span>]; <span style="color:#09f;font-style:italic">//二维数组自身的前缀和求法
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="100-增减序列">100.增减序列</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/102/">https://www.acwing.com/problem/content/102/</a></p>
</blockquote>
<blockquote>
<p>**差分思路：**将区间都需要+C的情况，转化为只需要对两个数进行加减。
原序列为$a$，差分序列为$b$</p>
<p>差分数组有几个特殊的值$b_1$和$b_{n+1}$，如果需要原序列相等，那么差分数组应该为${b_1,0,&hellip;,0} 其中b_1为一个常数，只需要让b_2\sim b_n为0即可$</p>
<p>对于差分数组的$L$和$R$的取值有如下四种操作方式：</p>
<p>1⃣️$2\le L\le R \le n-1$ 选择一个$b_i$在$2\le n-1$中，一个$+/-1，另一个$ $-/+1$</p>
<p>2⃣️$L=1,R \le n-1$ 让$b_1 +/-1$，选一个在$2\le n-1$中的数$-/+1$</p>
<p>3⃣️$L\ge2, R=n$ 让$b_{n+1} +/-1$，选择另外一个数$-/+1$</p>
<p>4⃣️$L=1,R=n$，表示让这个序列都$+/-1$ –&gt;在本题中没有意义；</p>
<p>对于差分序列$b_2\sim b_n$ ，假设其所有的正数和为$q$，所有的负数和为$p$</p>
<p>以贪心的方式选择1⃣️，这样能够更快的选择两个数进行变换【2⃣️3⃣️只能变一个数】，那么首先优先选择1⃣️，此时需要的操作次数为$min{q,p}$ 次，也就是将其中的正数/负数首先变成0，然后再使用2⃣️3⃣️方法对于剩下的数，剩下的数有$||q|-|p||$次，也就是最少还需要$||q|-|p||$次操作2⃣️和3⃣️：
**结论：**最少需要的次数$ans1 = min{q,p}+||q|-|p|| =max{q,p}$</p>
<p>接下来讨论此时的方案数有多少种？对于1⃣️的操作是固定不变的，那么方案差异主要在于2⃣️和3⃣️，对于2⃣️和3⃣️的不同种情况一共有：$ans2=||p|-|q||+1$种 （理由如下：）</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>2⃣️			3⃣️
</span></span><span style="display:flex;"><span>0			||p|-|q||
</span></span><span style="display:flex;"><span>1			||p|-|q||-1
</span></span><span style="display:flex;"><span>2			||p|-|q||-2
</span></span><span style="display:flex;"><span>...			...
</span></span><span style="display:flex;"><span>||p|-|q||		0
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> b[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>ll q,p;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>        b[i] <span style="color:#555">=</span> a[i] <span style="color:#555">-</span> a[i<span style="color:#555">-</span><span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">==</span> <span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(b[i] <span style="color:#555">&lt;</span> <span style="color:#f60">0</span>) q <span style="color:#555">+=</span> b[i];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(b[i] <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>) p <span style="color:#555">+=</span> b[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ll ans1 <span style="color:#555">=</span> max(abs(q),abs(p));
</span></span><span style="display:flex;"><span>    ll ans2 <span style="color:#555">=</span> abs(abs(q) <span style="color:#555">-</span> abs(p)) <span style="color:#555">+</span> <span style="color:#f60">1ll</span>;
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">%lld&#34;</span>,ans1,ans2);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="3729-改变数组元素">3729.改变数组元素</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/3732/">https://www.acwing.com/problem/content/3732/</a></p>
</blockquote>
<blockquote>
<p>平平无奇的差分数组方法，对于差分数组，脑袋里面一定要时刻有那个差分/前缀和的概念</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> T;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">200010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> b[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">int</span> l,<span style="color:#078;font-weight:bold">int</span> r){
</span></span><span style="display:flex;"><span>    b[l] <span style="color:#555">+=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    b[r] <span style="color:#555">-=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>T);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(T<span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>        memset(b,<span style="color:#f60">0</span>,<span style="color:#069;font-weight:bold">sizeof</span> b); <span style="color:#09f;font-style:italic">//记得每次清0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> x;
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>x); <span style="color:#09f;font-style:italic">//当前操作
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span>(x <span style="color:#555">==</span> <span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">continue</span>; <span style="color:#09f;font-style:italic">//如果为0表示不操作
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            insert(max(<span style="color:#f60">0</span>,i<span style="color:#555">-</span>x<span style="color:#555">+</span><span style="color:#f60">1</span>),i<span style="color:#555">+</span><span style="color:#f60">1</span>); <span style="color:#09f;font-style:italic">//否则将这一段区间进行差分+1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            b[i] <span style="color:#555">+=</span> b[i<span style="color:#555">-</span><span style="color:#f60">1</span>]; <span style="color:#09f;font-style:italic">//前缀和恢复原数组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(b[i] <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>) b[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//这里只记录&gt;1的为1即可！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            printf(<span style="color:#c30">&#34;%d &#34;</span>, b[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        printf(<span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="二分">二分</h3>
<h4 id="模版回顾">模版回顾</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//整数二分【易错点：边界问题的选取】
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">当</span>l <span style="color:#555">=</span> mid <span style="color:#a00;background-color:#faa">的时候要补上</span>l<span style="color:#555">+</span>r<span style="color:#555">+</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">当</span>r <span style="color:#555">=</span> mid <span style="color:#a00;background-color:#faa">的时候不需要补上</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//模版一：
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">适用条件：区间</span>[L,R]<span style="color:#a00;background-color:#faa">被划分为</span>[L,mid], [mid<span style="color:#555">+</span><span style="color:#f60">1</span>,R]<span style="color:#a00;background-color:#faa">时使用</span>;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//区间[l,r] 被划分位[l,mid] 和[mid+1,r]时使用
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">bsearch_1</span>(<span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (l <span style="color:#555">&lt;</span> r)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//取中间值 相当于 (l+r)/2;
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span> (check(mid)) r <span style="color:#555">=</span> mid;  <span style="color:#09f;font-style:italic">// check()判定mid是否满足性质
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">else</span> l <span style="color:#555">=</span> mid <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//模版二
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">适用条件：区间</span>[L,R]<span style="color:#a00;background-color:#faa">被划分为</span>[L,mid<span style="color:#555">-</span><span style="color:#f60">1</span>],[mid,R]<span style="color:#a00;background-color:#faa">时使用</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">bsearch_2</span>(<span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (check(mid)) l <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> r <span style="color:#555">=</span> mid <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//浮点数二分
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">特点：没有整除的概念，所以没有整数二分的边界问题，可以严格的二分</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">不断二分，直到二分的长度足够小的时候可以认为二分获得的是一个数了</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">check</span>(<span style="color:#078;font-weight:bold">double</span> x);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">double</span> <span style="color:#c0f">bsearch_3</span>(<span style="color:#078;font-weight:bold">double</span> l, <span style="color:#078;font-weight:bold">double</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">double</span> eps<span style="color:#555">=</span><span style="color:#f60">1e-6</span>; <span style="color:#09f;font-style:italic">//精度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span> (r<span style="color:#555">-</span>l <span style="color:#555">&gt;</span> eps)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">double</span> mid <span style="color:#555">=</span> (l<span style="color:#555">+</span>r)<span style="color:#555">/</span><span style="color:#f60">2</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (check()) r<span style="color:#555">=</span>mid;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> l<span style="color:#555">=</span>mid;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> l;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">注意：精确度比要求的精确度多两位的情况下是比较保险的</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">如：保留</span><span style="color:#f60">6</span><span style="color:#a00;background-color:#faa">位，</span><span style="color:#f60">1e-8</span><span style="color:#a00;background-color:#faa">更为保险。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>有单调性一定可以二分，但没有单调性有可能可以二分，所以二分的本质不是单调性</p>
<p><strong>本质：把整个区间一分为二，一部分满足、一部分不满足；二分能找到边界点分出这两个部分 [本质：边界]</strong></p>
<blockquote>
<p>模板题：查找数的范围，分别是选择的lower和upper两种二分查找的方式，最终获得其区间。https://www.acwing.com/problem/content/791/</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,q,k;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>q);
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>     scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">while</span>(q <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>     scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>k);
</span></span><span style="display:flex;"><span>     <span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">0</span>,r <span style="color:#555">=</span> n <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>   	<span style="color:#09f;font-style:italic">//lower方式获取下区间边界
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>     <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r){
</span></span><span style="display:flex;"><span>         <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>         <span style="color:#069;font-weight:bold">if</span>(a[mid] <span style="color:#555">&gt;=</span> k){
</span></span><span style="display:flex;"><span>             r <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>         <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>             l <span style="color:#555">=</span> mid<span style="color:#555">+</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>   	<span style="color:#09f;font-style:italic">//找不到的情况
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>     <span style="color:#069;font-weight:bold">if</span>(a[l] <span style="color:#555">!=</span> k) printf(<span style="color:#c30">&#34;-1 -1</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>);
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">else</span>{<span style="color:#09f;font-style:italic">//upper方式获取上区间边界
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>         printf(<span style="color:#c30">&#34;%d &#34;</span>,l);
</span></span><span style="display:flex;"><span>         l <span style="color:#555">=</span> <span style="color:#f60">0</span>, r <span style="color:#555">=</span> n<span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>         <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r){
</span></span><span style="display:flex;"><span>             <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>             <span style="color:#069;font-weight:bold">if</span>(a[mid] <span style="color:#555">&lt;=</span> k){
</span></span><span style="display:flex;"><span>                 l <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>             <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>                 r <span style="color:#555">=</span> mid <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>         }
</span></span><span style="display:flex;"><span>         printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,l);
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h4 id="1460-我在哪-哈希-二分">1460.我在哪？（哈希+二分）</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1462/">https://www.acwing.com/problem/content/1462/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//本题主要难点在于获取当前字符串的所有子串，用二分的方法查找合适情况。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;cstring&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;unordered_set&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>string str;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">check</span>(<span style="color:#078;font-weight:bold">int</span> mid){
</span></span><span style="display:flex;"><span>    unordered_set<span style="color:#555">&lt;</span>string<span style="color:#555">&gt;</span> st; <span style="color:#09f;font-style:italic">//set来代替字符串哈希
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">+</span> mid <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        string curstr <span style="color:#555">=</span> str.substr(i,mid);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(st.count(curstr)) <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>        st.insert(curstr);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> str;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">0</span>, r <span style="color:#555">=</span> n;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r){ <span style="color:#09f;font-style:italic">//二分查找
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(check(mid)){
</span></span><span style="display:flex;"><span>            r <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>            l <span style="color:#555">=</span> mid <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,l);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="1221-四平方和-哈希-二分-以及几点启发">1221.四平方和 （哈希+二分）以及几点启发</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1223/">https://www.acwing.com/problem/content/1223/</a></p>
</blockquote>
<blockquote>
<ol>
<li>符号重载的方式，代码示例种使用得很经典，还有另外的方式，通过手写bool cmp，导入到sort(a,a+n,cmp)中</li>
<li>关于二分中L和R的边界值的选取，应该要选择满足要答案要求的边界范围，不能盲目将LR区间设置很大！！比如说在本题，二分查找答案是在0~pos中寻找满足条件的下标，因此此时L=0,R=pos才行！</li>
</ol>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;vector&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">2500010</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">sumup4</span>{
</span></span><span style="display:flex;"><span>    ll sum,c,d;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">bool</span> <span style="color:#069;font-weight:bold">operator</span><span style="color:#555">&lt;</span> (<span style="color:#069;font-weight:bold">const</span> sumup4 <span style="color:#555">&amp;</span>t) <span style="color:#069;font-weight:bold">const</span>{ <span style="color:#09f;font-style:italic">//符号重载，主要用于sort函数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(sum <span style="color:#555">!=</span> t.sum) <span style="color:#069;font-weight:bold">return</span> sum <span style="color:#555">&lt;</span> t.sum;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(c <span style="color:#555">!=</span> t.c) <span style="color:#069;font-weight:bold">return</span> c <span style="color:#555">&lt;</span> t.c;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> d <span style="color:#555">&lt;</span> t.d;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}sumup4[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> pos <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> c <span style="color:#555">=</span> <span style="color:#f60">0</span>; c<span style="color:#555">*</span>c <span style="color:#555">&lt;=</span> n; c <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> d <span style="color:#555">=</span> c; c<span style="color:#555">*</span>c<span style="color:#555">+</span>d<span style="color:#555">*</span>d <span style="color:#555">&lt;=</span> n; d<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            sumup4[pos<span style="color:#555">++</span>] <span style="color:#555">=</span> {c<span style="color:#555">*</span>c<span style="color:#555">+</span>d<span style="color:#555">*</span>d,c,d}; <span style="color:#09f;font-style:italic">//充分利用C++11的特性
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    sort(sumup4,sumup4<span style="color:#555">+</span>pos);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> a <span style="color:#555">=</span> <span style="color:#f60">0</span>; a<span style="color:#555">*</span>a <span style="color:#555">&lt;=</span> n; a <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> b <span style="color:#555">=</span> <span style="color:#f60">0</span>; a<span style="color:#555">*</span>a<span style="color:#555">+</span>b<span style="color:#555">*</span>b <span style="color:#555">&lt;=</span> n; b <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            ll t <span style="color:#555">=</span> n <span style="color:#555">-</span> (a<span style="color:#555">*</span>a<span style="color:#555">+</span>b<span style="color:#555">*</span>b);
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">0</span>, r <span style="color:#555">=</span> pos<span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r){
</span></span><span style="display:flex;"><span>                <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span>(sumup4[mid].sum <span style="color:#555">&gt;=</span> t) r<span style="color:#555">=</span>mid;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">else</span> l<span style="color:#555">=</span>mid<span style="color:#555">+</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(sumup4[l].sum <span style="color:#555">==</span> t){
</span></span><span style="display:flex;"><span>                printf(<span style="color:#c30">&#34;%d %d %d %d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,a,b,sumup4[l].c,sumup4[l].d);
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="1227-分巧克力">1227.分巧克力</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1229/">https://www.acwing.com/problem/content/1229/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//关于二分边界问题——此路不通走彼路
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//r=mid不行就换成l=mid试一下
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,k;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> pos <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">Cake</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> h;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> w;
</span></span><span style="display:flex;"><span>}cake[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">check</span>(<span style="color:#078;font-weight:bold">int</span> mid){
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> cnt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> pos; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> h <span style="color:#555">=</span> cake[i].h, w <span style="color:#555">=</span> cake[i].w;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(mid <span style="color:#555">&gt;</span> h <span style="color:#555">||</span> mid <span style="color:#555">&gt;</span> w) <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> hnum <span style="color:#555">=</span> h <span style="color:#555">/</span> mid;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> wnum <span style="color:#555">=</span> w <span style="color:#555">/</span> mid;
</span></span><span style="display:flex;"><span>        cnt <span style="color:#555">+=</span> hnum<span style="color:#555">*</span>wnum;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(cnt <span style="color:#555">&gt;=</span> k) <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>k);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> maxsize <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> h,w;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>h,<span style="color:#555">&amp;</span>w);
</span></span><span style="display:flex;"><span>        cake[pos <span style="color:#555">++</span>] <span style="color:#555">=</span> {h,w};
</span></span><span style="display:flex;"><span>        maxsize <span style="color:#555">=</span> max(maxsize,h);
</span></span><span style="display:flex;"><span>        maxsize <span style="color:#555">=</span> max(maxsize,w);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">0</span>, r <span style="color:#555">=</span> maxsize;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(check(mid)) l <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> r <span style="color:#555">=</span> mid <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,l);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="113-特殊排序-交互题">113.特殊排序（交互题）</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/115/">https://www.acwing.com/problem/content/115/</a>
读懂题目甚至比题目本身还难；
反对称性：$a&gt;b,b&lt;a$
传递性：$a&lt;b,b&lt;c\rightarrow a&lt;c$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Forward declaration of compare API.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// bool compare(int a, int b);
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// return bool means whether a is less than b.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//**这道题目其实就可以转化为对于一个已排好序多数组，插入元素**
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//**选择合适的位置插入元素，这里选择位置时，可以使用二分查找算法**
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> specialSort(<span style="color:#078;font-weight:bold">int</span> N) {
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>N);
</span></span><span style="display:flex;"><span>        vector <span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> ans;
</span></span><span style="display:flex;"><span>        ans.push_back(<span style="color:#f60">1</span>); <span style="color:#09f;font-style:italic">//插入二分，先把1插进去，这样其他数就能和1进行比较了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span> ; i <span style="color:#555">&lt;=</span> N ; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">0</span> , r <span style="color:#555">=</span> ans.size(); <span style="color:#09f;font-style:italic">//在ans中进行二分
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> (l <span style="color:#555">+</span> r) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//大于mid 的 第一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">if</span>(compare(i,ans[mid])) <span style="color:#09f;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                r <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">else</span> l <span style="color:#555">=</span> mid <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            ans.insert(ans.begin() <span style="color:#555">+</span> l, i);<span style="color:#09f;font-style:italic">//然后在给定位置插入i
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="双指针算法">双指针算法</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">实际上将原来的多重循环，使用双指针的方式在一个循环内完成</span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (j <span style="color:#555">&lt;</span> i <span style="color:#555">&amp;&amp;</span> check(i, j)) j <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 具体问题的逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">核心思想</span><span style="color:#555">---&gt;</span><span style="color:#a00;background-color:#faa">将穷举</span>O(n<span style="color:#555">^</span><span style="color:#f60">2</span>)<span style="color:#a00;background-color:#faa">算法优化到</span>O(n)
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">常见问题分类：</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#f60">1</span>) <span style="color:#a00;background-color:#faa">对于一个序列，用两个指针维护一段区间</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#f60">2</span>) <span style="color:#a00;background-color:#faa">对于两个序列，维护某种次序，比如归并排序中合并两个有序序列的操作</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>窍门</strong>：先写一个暴力解法，去思考<strong>限制条件</strong>和<strong>单调性关系</strong>，然后想办法去优化，将On2 &ndash;&gt; On;</p>
<h4 id="799-最长连续不重复字序列-双指针经典咏流传">799.最长连续不重复字序列（双指针经典咏流传）</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/801/">https://www.acwing.com/problem/content/801/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N],n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> x[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> ans <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// --j------------i--，考虑i为右端点去思考j的情况，双指针算法常用
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//特别经典，一定要熟透于心，很多时候都要想到，固定一个端点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        x[a[i]] <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(j <span style="color:#555">&lt;</span> i <span style="color:#555">&amp;&amp;</span> x[a[i]] <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>){ <span style="color:#09f;font-style:italic">// 经典咏流传， 这里j &lt; i和x[a[i]] &gt; 1都很经典
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            x[a[j]] <span style="color:#555">--</span>;
</span></span><span style="display:flex;"><span>            j<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        res <span style="color:#555">=</span> i <span style="color:#555">-</span> j <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        ans <span style="color:#555">=</span> max(ans,res);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,ans);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//两个序列，一个从前往后，一个从后往前寻找两个序列的下标，使得a[i] + b[j] = k的i，j值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//注意，这里成立的前提条件是a,b是升序序列
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d%lld&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>m,<span style="color:#555">&amp;</span>x);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;</span> m; i <span style="color:#555">++</span>) scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>b[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>, j <span style="color:#555">=</span> m <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(a[i] <span style="color:#555">+</span> b[j] <span style="color:#555">&gt;</span> x) j <span style="color:#555">--</span>; <span style="color:#09f;font-style:italic">//与暴力的区别，j不会回退
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(a[i] <span style="color:#555">+</span> b[j] <span style="color:#555">==</span> x) printf(<span style="color:#c30">&#34;%d %d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,i,j);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="1238-日志统计-双指针经典ii">1238.日志统计（双指针经典II）</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1240/">https://www.acwing.com/problem/content/1240/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>, <span style="color:#555">&amp;</span>n, <span style="color:#555">&amp;</span>d, <span style="color:#555">&amp;</span>k);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> ) scanf(<span style="color:#c30">&#34;%d%d&#34;</span>, <span style="color:#555">&amp;</span>logs[i].x, <span style="color:#555">&amp;</span>logs[i].y);
</span></span><span style="display:flex;"><span>    sort(logs, logs <span style="color:#555">+</span> n); <span style="color:#09f;font-style:italic">//先给时间排个序!
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">//这一步跟上面经典的双指针算法如出一辙，变了一点点，一定要灵活应对。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )<span style="color:#09f;font-style:italic">//将j---i,这里i为右端点进行枚举
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> id <span style="color:#555">=</span> logs[i].y;
</span></span><span style="display:flex;"><span>        cnt[id] <span style="color:#555">++</span> ; <span style="color:#09f;font-style:italic">//也是一样记录当前元素的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">while</span> (logs[i].x <span style="color:#555">-</span> logs[j].x <span style="color:#555">&gt;=</span> d) <span style="color:#09f;font-style:italic">//给定两端点的枚举条件
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            cnt[logs[j].y] <span style="color:#555">--</span> ; <span style="color:#09f;font-style:italic">//当j需要移动的情况
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            j <span style="color:#555">++</span> ; <span style="color:#09f;font-style:italic">//现在移动j左端点指针
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (cnt[id] <span style="color:#555">&gt;=</span> k) st[id] <span style="color:#555">=</span> <span style="color:#366">true</span>; <span style="color:#09f;font-style:italic">//当满足题目所给条件时进行输出
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> <span style="color:#f60">100000</span>; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (st[i])
</span></span><span style="display:flex;"><span>            printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>, i);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="高精度">高精度</h3>
<blockquote>
<center>高精度总结</center>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqlb3-0.jpg" alt="IMG_2675"></p>
</blockquote>
<p><strong>下面函数中vector 取引用 &amp;A ,&amp;B 目的是为了节省内存空间。只取引用。不单独开辟空间！</strong></p>
<h4 id="大整数相加">大整数相加</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//大整数相加模板
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> add (vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>A, vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>B)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (A.size() <span style="color:#555">&lt;</span> B.size()) <span style="color:#069;font-weight:bold">return</span> add(B,A);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> C;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> <span style="color:#f60">0</span>; <span style="color:#09f;font-style:italic">//t表示进位数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;</span> A.size() <span style="color:#555">||</span> i <span style="color:#555">&lt;</span> B.size();i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&lt;</span> A.size()) t <span style="color:#555">=</span> t <span style="color:#555">+</span> A[i];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&lt;</span> B.size()) t <span style="color:#555">=</span> t <span style="color:#555">+</span> B[i];
</span></span><span style="display:flex;"><span>        C.push_back(t<span style="color:#555">%</span><span style="color:#f60">10</span>);  <span style="color:#09f;font-style:italic">//只存进位数的个位
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        t <span style="color:#555">=</span> t<span style="color:#555">/</span><span style="color:#f60">10</span>; <span style="color:#09f;font-style:italic">//如果进位大于10的话，进到下一位
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (t) C.push_back(t);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> C;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="大整数相减">大整数相减</h4>
<h5 id="易错点">易错点：</h5>
<ol>
<li>字符串转整型 善用ASCII码</li>
<li><strong>该模板一定要先判断是否A&gt;=B！！</strong> （要注意负数可能存在的情况！）</li>
</ol>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//大整数的减法模板
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> sub (vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>A,vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>B)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> C;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>, t <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;</span> A.size(); i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        t <span style="color:#555">=</span> A[i] <span style="color:#555">-</span> t;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&lt;</span> B.size()) t <span style="color:#555">=</span> t <span style="color:#555">-</span> B[i];
</span></span><span style="display:flex;"><span>        C.push_back((t <span style="color:#555">+</span> <span style="color:#f60">10</span>) <span style="color:#555">%</span> <span style="color:#f60">10</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (t <span style="color:#555">&lt;</span> <span style="color:#f60">0</span>) t <span style="color:#555">=</span> <span style="color:#f60">1</span>;  <span style="color:#09f;font-style:italic">//说明借了一位
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">else</span> t <span style="color:#555">=</span> <span style="color:#f60">0</span>;  <span style="color:#09f;font-style:italic">//说明没有借
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (C.size() <span style="color:#555">&gt;</span> <span style="color:#f60">1</span> <span style="color:#555">&amp;&amp;</span> C.back() <span style="color:#555">==</span> <span style="color:#f60">0</span>) C.pop_back(); <span style="color:#09f;font-style:italic">//把最后的 0 的弄出去
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> C;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="大整数-乘以-小整数-a-b">大整数 乘以 小整数 A*b</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//把 b 看成一个整体去和A相乘
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>string A;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> b;
</span></span><span style="display:flex;"><span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> mu;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> mul(vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>A, <span style="color:#078;font-weight:bold">int</span> b)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> C;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;</span> A.size() <span style="color:#555">||</span> t;i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&lt;</span> A.size()) t <span style="color:#555">=</span> t <span style="color:#555">+</span> A[i] <span style="color:#555">*</span> b;
</span></span><span style="display:flex;"><span>        C.push_back(t <span style="color:#555">%</span> <span style="color:#f60">10</span>);
</span></span><span style="display:flex;"><span>        t <span style="color:#555">=</span> t <span style="color:#555">/</span> <span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (C.size() <span style="color:#555">&gt;</span> <span style="color:#f60">1</span> <span style="color:#555">&amp;&amp;</span> C.back <span style="color:#555">==</span> <span style="color:#f60">0</span>) C.pop_back();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> C;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="大整数-乘以-大整数-a-a">大整数 乘以 大整数 A*A</h5>
<!-- > <img src="./wdcs.assets/image-20210412113525577.png" alt="image-20210412113525577" style="zoom:50%;" /> -->
<blockquote>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meho63-0.png" alt="image-20210412113525577"></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//分治算法！先不处理进位！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include&lt;string&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include&lt;algorithm&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#define N 11000
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>(){
</span></span><span style="display:flex;"><span>    string s1,s2;
</span></span><span style="display:flex;"><span>    cin<span style="color:#555">&gt;&gt;</span>s1<span style="color:#555">&gt;&gt;</span>s2;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//首先倒序输入
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    reverse(s1.begin(),s1.end());
</span></span><span style="display:flex;"><span>    reverse(s2.begin(),s2.end());
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> a[N]<span style="color:#555">=</span>{<span style="color:#f60">0</span>};<span style="color:#09f;font-style:italic">//初始化结果数组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i<span style="color:#555">=</span><span style="color:#f60">0</span>;i<span style="color:#555">&lt;</span>s1.length();<span style="color:#555">++</span>i){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j<span style="color:#555">=</span><span style="color:#f60">0</span>;j<span style="color:#555">&lt;</span>s2.length();<span style="color:#555">++</span>j){
</span></span><span style="display:flex;"><span>            a[i<span style="color:#555">+</span>j]<span style="color:#555">+=</span>(s1[i]<span style="color:#555">-</span><span style="color:#c30">&#39;0&#39;</span>)<span style="color:#555">*</span>(s2[j]<span style="color:#555">-</span><span style="color:#c30">&#39;0&#39;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }<span style="color:#09f;font-style:italic">//先不处理进位
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i<span style="color:#555">=</span><span style="color:#f60">0</span>;i<span style="color:#555">&lt;</span>N<span style="color:#555">-</span><span style="color:#f60">1</span>;<span style="color:#555">++</span>i){
</span></span><span style="display:flex;"><span>        a[i<span style="color:#555">+</span><span style="color:#f60">1</span>]<span style="color:#555">+=</span>a[i]<span style="color:#555">/</span><span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span>        a[i]<span style="color:#555">=</span>a[i]<span style="color:#555">%</span><span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//处理进位
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> i<span style="color:#555">=</span>N<span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(a[i]<span style="color:#555">==</span><span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>        i<span style="color:#555">--</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j<span style="color:#555">=</span>i;j<span style="color:#555">&gt;=</span><span style="color:#f60">0</span>;<span style="color:#555">--</span>j)
</span></span><span style="display:flex;"><span>        cout<span style="color:#555">&lt;&lt;</span>a[j];
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//倒序输出！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="大整数-除以-小整数">大整数 除以 小整数</h4>
<h5 id="易错点-1">易错点：</h5>
<p>1.为了与其他几个运算更为通用，大整数的存储方式仍是倒着储存，但是，切记结果应该再倒数一次
这时候可利用 algorithm头文件中的 reverse函数进行倒置
2.记得倒序输出的时候也要删除前导0 pop_back()
3.同样写 主函数的时候不要忘了 写输入，然后一定要记得 利用ASCII 进行字符与整数之间的转换！</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//A / b = C （商）  ....r为余数, A &gt;= 0, b &gt; 0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;algorithm&gt;</span><span style="color:#099">        ----- reverse
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> div(vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>A, <span style="color:#078;font-weight:bold">int</span> b, <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">&amp;</span>r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> C;
</span></span><span style="display:flex;"><span>    r <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> A.size() <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>; i <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        r <span style="color:#555">=</span> r <span style="color:#555">*</span> <span style="color:#f60">10</span> <span style="color:#555">+</span> A[i];
</span></span><span style="display:flex;"><span>        C.push_back(r<span style="color:#555">/</span>b);
</span></span><span style="display:flex;"><span>        r <span style="color:#555">%=</span> b;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    reverse(C.begin(), C.end());  <span style="color:#09f;font-style:italic">//除法是从高位开始计算的，但为了通用(+ - x)起见，一律逆序存数。最后输出的时候需要倒过来。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span> (C.size() <span style="color:#555">&gt;</span> <span style="color:#f60">1</span> <span style="color:#555">&amp;&amp;</span> C.back() <span style="color:#555">==</span> <span style="color:#f60">0</span>) C.pop_back(); <span style="color:#09f;font-style:italic">//删除前导0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> C;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="高精度综合-进制转换-清华大学机试">高精度综合「进制转换」——清华大学机试</h4>
<blockquote>
<p>**大致思路：**将原来的大整数转化为二进制，然后将二进制数进行倒置，再将其转化为十进制。
需要用到高精度除法和高精度加法</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//高精度除法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> div(vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>A, <span style="color:#078;font-weight:bold">int</span> b, <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">&amp;</span>r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    r <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> C;
</span></span><span style="display:flex;"><span>    reverse(A.begin(), A.end());
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> A.size(); i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        r <span style="color:#555">=</span> r <span style="color:#555">*</span> <span style="color:#f60">10</span> <span style="color:#555">+</span> A[i];
</span></span><span style="display:flex;"><span>        C.push_back(r <span style="color:#555">/</span> b);
</span></span><span style="display:flex;"><span>        r <span style="color:#555">%=</span> b;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    reverse(C.begin(), C.end());
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(C.size() <span style="color:#555">&gt;</span> <span style="color:#f60">1</span> <span style="color:#555">&amp;&amp;</span> C.back() <span style="color:#555">==</span> <span style="color:#f60">0</span>) C.pop_back();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> C;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//高精度加法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> add(vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> A,vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> B)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> C;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> A.size(); i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        t <span style="color:#555">+=</span> A[i];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">&lt;</span> B.size()) t <span style="color:#555">+=</span> B[i];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        C.push_back(t <span style="color:#555">%</span> <span style="color:#f60">10</span>);
</span></span><span style="display:flex;"><span>        t <span style="color:#555">/=</span> <span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(t) C.push_back(t);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> C;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//高精度十进制转二进制
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> dec_to_bin(vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>D)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> B;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> r <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(D.size() <span style="color:#555">&gt;</span> <span style="color:#f60">1</span> <span style="color:#555">||</span> (D.size() <span style="color:#555">==</span> <span style="color:#f60">1</span> <span style="color:#555">&amp;&amp;</span> D[<span style="color:#f60">0</span>] <span style="color:#555">!=</span> <span style="color:#f60">0</span>))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        D <span style="color:#555">=</span> div(D, <span style="color:#f60">2</span>, r);
</span></span><span style="display:flex;"><span>        B.push_back(r);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> B;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//高进度二进制转十进制
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> bin_to_dec(vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> <span style="color:#555">&amp;</span>B)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> D;
</span></span><span style="display:flex;"><span>    D.push_back(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> B.size(); i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        D <span style="color:#555">=</span> add(add(D, D), {B[i]});
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> D;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    string a;
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> a;
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> A;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> a.size() <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>; i <span style="color:#555">--</span>) A.push_back(a[i] <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>);
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> B <span style="color:#555">=</span> dec_to_bin(A);
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> D <span style="color:#555">=</span> bin_to_dec(B);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> D.size() <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>; i <span style="color:#555">--</span>) cout <span style="color:#555">&lt;&lt;</span> D[i];
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="递推">递推</h3>
<blockquote>
<p>这就像道智力题啦，要发现规律</p>
</blockquote>
<h4 id="3777-砖块">3777.砖块</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/description/3780/">https://www.acwing.com/problem/content/description/3780/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">思路：贪心——遇到这种数据量很少的，就直接暴力枚举吧～</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">最终的字符串，要么全为白色，要么全为黑色。</span>
</span></span><span style="display:flex;"><span><span style="color:#555">&gt;</span><span style="color:#a00;background-color:#faa">以目标全为白色为例，遍历字符串的前</span> n<span style="color:#a00;background-color:#faa">−</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">个砖块，每遇到一个黑色砖块，就对其进行一次操作，将该砖块和下一个砖块变为另一种颜色，并将结果记录到数组中。如果发现最后一个砖块不为白色，那说明无法将砖块全部转化为白色；黑色同理。</span>
</span></span><span style="display:flex;"><span><span style="color:#555">&gt;</span><span style="color:#a00;background-color:#faa">若最终全转化为白色和全转化为黑色均不可行，则输出</span> <span style="color:#a00;background-color:#faa">−</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">，否则输出一种可行的方案即可。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="95-费解的开关">95.费解的开关</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/97/">https://www.acwing.com/problem/content/97/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include&lt;queue&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include&lt;unordered_map&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> t;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//当前状态，当前到最终状态所需步数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>unordered_map<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, <span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span>vis;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//改这个灯及其上下左右相邻的灯的状态
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//改第idx个灯;左,不为最左一个;上，不为第一排;下，不为最后一排;右，不为右一个
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">turn</span>(<span style="color:#078;font-weight:bold">int</span> st, <span style="color:#078;font-weight:bold">int</span> idx) { <span style="color:#09f;font-style:italic">//这里用位运算压缩的方式存放一种状态
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    st <span style="color:#555">^=</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> idx);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (idx <span style="color:#555">%</span> <span style="color:#f60">5</span>) st <span style="color:#555">^=</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> idx <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (idx <span style="color:#555">&gt;=</span> <span style="color:#f60">5</span>) st <span style="color:#555">^=</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> idx <span style="color:#555">-</span> <span style="color:#f60">5</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (idx <span style="color:#555">&lt;</span> <span style="color:#f60">20</span>) st <span style="color:#555">^=</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> idx <span style="color:#555">+</span> <span style="color:#f60">5</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> ((idx <span style="color:#555">%</span> <span style="color:#f60">5</span>) <span style="color:#555">&lt;</span> <span style="color:#f60">4</span>) st <span style="color:#555">^=</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> idx <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> st;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//从最终状态逆序遍历，遍历所有的状态，所以不用管地图什么样，直接bfs完，查对应map就完事了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">bfs</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//0-2^25-1（25个1），共2^25种状态
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> st <span style="color:#555">=</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">25</span>) <span style="color:#555">-</span> <span style="color:#f60">1</span>;<span style="color:#09f;font-style:italic">//左移 右移的优先级是最低的，比加减还要低。所以这里的括号是必需的
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span>q;
</span></span><span style="display:flex;"><span>    q.push(st);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (q.size())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>        q.pop();
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (vis[t] <span style="color:#555">==</span> <span style="color:#f60">6</span>) <span style="color:#069;font-weight:bold">break</span>;<span style="color:#09f;font-style:italic">//判断6步以内使所有的灯都变亮。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> <span style="color:#f60">25</span>; i<span style="color:#555">++</span>) {<span style="color:#09f;font-style:italic">//尝试当前状态的每盏灯
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            st <span style="color:#555">=</span> turn(t, i);<span style="color:#09f;font-style:italic">//新的状态
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>vis.count(st)) {<span style="color:#09f;font-style:italic">//该状态未被遍历过
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                vis[st] <span style="color:#555">=</span> vis[t] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>                q.push(st);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>() {
</span></span><span style="display:flex;"><span>    bfs();<span style="color:#09f;font-style:italic">//用map+深搜的方式存下所有可能的情况以及对应的解决方法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    cin <span style="color:#555">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (t<span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> sum <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> <span style="color:#f60">25</span>; i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">char</span> ch;
</span></span><span style="display:flex;"><span>            cin <span style="color:#555">&gt;&gt;</span> ch;
</span></span><span style="display:flex;"><span>            sum <span style="color:#555">+=</span> ((ch <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>) <span style="color:#555">&lt;&lt;</span> i);<span style="color:#09f;font-style:italic">//25个字符二进制压缩成数字
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (vis[sum] <span style="color:#555">==</span> <span style="color:#f60">0</span> <span style="color:#555">&amp;&amp;</span> sum <span style="color:#555">!=</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">25</span>) <span style="color:#555">-</span> <span style="color:#f60">1</span>) cout <span style="color:#555">&lt;&lt;</span> <span style="color:#555">-</span><span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> cout <span style="color:#555">&lt;&lt;</span> vis[sum] <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="递归">递归</h3>
<h4 id="树的遍历-回顾了一下建树-前序-中序-后序-层次遍历">树的遍历🌲（回顾了一下建树/前序/中序/后序/层次遍历）</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1499/">https://www.acwing.com/problem/content/1499/</a></p>
</blockquote>
<!-- ><img src="./wdcs.assets/image-20230302000810366.png" alt="image-20230302000810366" style="zoom:33%;" /> -->
<blockquote>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqjr8-0.png" alt="20230302000810366"></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;iostream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;cstring&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;algorithm&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;unordered_map&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;queue&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">40</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> postorder[N], inorder[N];               <span style="color:#09f;font-style:italic">//前序遍历，中序遍历
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>unordered_map<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, <span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> l, r, pos;          <span style="color:#09f;font-style:italic">//用哈希表模拟二叉树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//il ir中序遍历区间； pl pr后序遍历区间
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">build</span>(<span style="color:#078;font-weight:bold">int</span> il, <span style="color:#078;font-weight:bold">int</span> ir, <span style="color:#078;font-weight:bold">int</span> pl, <span style="color:#078;font-weight:bold">int</span> pr)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> root <span style="color:#555">=</span> postorder[pr];
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> pos[root];                      <span style="color:#09f;font-style:italic">//得到根节点在中序遍历中的下标
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//k大于il表示根节点左边还有节点，即当前根节点存在左子树，下同
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//下面两行是难点，举例解释见图
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span> (il <span style="color:#555">&lt;</span> k) l[root] <span style="color:#555">=</span> build(il, k <span style="color:#555">-</span> <span style="color:#f60">1</span>, pl, pl <span style="color:#555">+</span> k <span style="color:#555">-</span> <span style="color:#f60">1</span> <span style="color:#555">-</span> il);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (ir <span style="color:#555">&gt;</span> k) r[root] <span style="color:#555">=</span> build(k <span style="color:#555">+</span> <span style="color:#f60">1</span>, ir, pl <span style="color:#555">+</span> k <span style="color:#555">-</span> il, pr <span style="color:#555">-</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> root;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">bfs</span>(<span style="color:#078;font-weight:bold">int</span> root)                          <span style="color:#09f;font-style:italic">//BFS用来层序遍历输出
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span>    q.push(root);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (q.size())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>        q.pop();
</span></span><span style="display:flex;"><span>        cout <span style="color:#555">&lt;&lt;</span> t <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#39; &#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (l.count(t)) q.push(l[t]);       <span style="color:#09f;font-style:italic">//判断该节点的左右儿子是否存在
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span> (r.count(t)) q.push(r[t]);       <span style="color:#09f;font-style:italic">//存在则加入队列，等待下一层遍历
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> ) cin <span style="color:#555">&gt;&gt;</span> postorder[i]; <span style="color:#09f;font-style:italic">//输入后序遍历树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> inorder[i]; <span style="color:#09f;font-style:italic">//输入中序遍历树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        pos[inorder[i]] <span style="color:#555">=</span> i;                <span style="color:#09f;font-style:italic">//记录中序遍历每个点位置（剪枝）
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> root <span style="color:#555">=</span> build(<span style="color:#f60">0</span>, n <span style="color:#555">-</span> <span style="color:#f60">1</span>, <span style="color:#f60">0</span>, n <span style="color:#555">-</span> <span style="color:#f60">1</span>);   <span style="color:#09f;font-style:italic">//参数为中序遍历区间和后序遍历区间
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    bfs(root);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="约数之和-经典数学知识">约数之和【经典数学知识】</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/99/">https://www.acwing.com/problem/content/99/</a></p>
</blockquote>
<h5 id="补充数学知识-1-约数相关性质">补充数学知识（1）约数相关性质</h5>
<blockquote>
<p>[1，n]里约数有i的个数是$\lfloor\frac{n}{i}\rfloor$</p>
<p>如上，n = 12时；</p>
<p>1~12之间的数，有以1为约数的有 12/1 = 12个
有以2为约数的有 12/2 = 6个
有以3为约数的有  12/3 = 4个</p>
<p>求所有约数的和，可以使用 s+=n/i</p>
<blockquote>
<p><strong>上述算法的进一步优化</strong>：</p>
<p>打表后发现，表中有很多$\lfloor\frac{n}{i}\rfloor$是相等的，比如12的5、6都是一样的。</p>
<p>对于这些一样的数每次都计算一次非常浪费时间，可以每次$i$跳转到$\lfloor\frac{n}{j}\rfloor = \lfloor\frac{n}{i}\rfloor+1$</p>
<p>这样的j上 对于中间一样的数一次性计算完毕。</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>, j; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">=</span>j<span style="color:#555">+</span><span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	j <span style="color:#555">=</span> n<span style="color:#555">/</span>(n<span style="color:#555">/</span>i);
</span></span><span style="display:flex;"><span>ans <span style="color:#555">+=</span> (n<span style="color:#555">/</span>i)<span style="color:#555">*</span>(j<span style="color:#555">-</span>i<span style="color:#555">+</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>试除法求所有约数</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> get_divisors(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> res;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> x <span style="color:#555">/</span> i; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            res.push_back(i);
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">!=</span> x <span style="color:#555">/</span> i) res.push_back(x <span style="color:#555">/</span> i);<span style="color:#09f;font-style:italic">//如果n是i的平方，可能有两个，这里目的是只存下一个
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    sort(res.begin(), res.end());
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p><strong>约数个数与约数之和</strong>$N = p_1^{c_1} * p_2^{c_2} * &hellip; *p_k^{c_k}$</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">如果</span> N <span style="color:#555">=</span> p1<span style="color:#555">^</span>c1 <span style="color:#555">*</span> p2<span style="color:#555">^</span>c2 <span style="color:#555">*</span> ... <span style="color:#555">*</span>pk<span style="color:#555">^</span>ck
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">约数个数：</span> (c1 <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (c2 <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> ... <span style="color:#555">*</span> (ck <span style="color:#555">+</span> <span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">约数之和：</span> (p1<span style="color:#555">^</span><span style="color:#f60">0</span> <span style="color:#555">+</span> p1<span style="color:#555">^</span><span style="color:#f60">1</span> <span style="color:#555">+</span> ... <span style="color:#555">+</span> p1<span style="color:#555">^</span>c1) <span style="color:#555">*</span> ... <span style="color:#555">*</span> (pk<span style="color:#555">^</span><span style="color:#f60">0</span> <span style="color:#555">+</span> pk<span style="color:#555">^</span><span style="color:#f60">1</span> <span style="color:#555">+</span> ... <span style="color:#555">+</span> pk<span style="color:#555">^</span>ck)
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>数论常见的问题：</strong></p>
<ul>
<li>对于每一个大于等于2的正整数n，都有$N=p_1^{c_1}<em>p_2^{c_2}</em>&hellip;*p_m^{c_m}$</li>
<li>正整数N的欧拉函数$phi(N)=N*(1-\frac{1}{p_1})<em>(1-\frac{1}{p_2})</em>&hellip;<em>(1-\frac{1}{p_m})=p_1^{c_1-1}</em>(p_1-1)<em>p_2^{c_2-1}</em>(p_2-1)*&hellip;<em>p_m^{c_m-1}</em>(p_m-1)$</li>
<li>正整数N的约数个数：$d(N)=(1+c_1)<em>(1+c_2)</em>&hellip;*(1+c_m)$</li>
<li>正整数N的所有约数和：$s(N)=(1+p_1+p_1^2+&hellip;+p_1^{c_1})<em>(1+p_2+p_2^2+&hellip;+p_2^{c_2})</em>(1+p_m+p_m^2+&hellip;+p_m^{c_m})$</li>
</ul>
<h5 id="欧拉筛约数的方法">欧拉筛约数的方法⭐️</h5>
<blockquote>
<p>证明见：https://blog.csdn.net/weixin_43896346/article/details/88396182</p>
</blockquote>
<ul>
<li>欧拉筛</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">inline</span> <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">sieve</span>(<span style="color:#078;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>;i <span style="color:#555">&lt;=</span> x;i <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span> vis[i])
</span></span><span style="display:flex;"><span>            prim[<span style="color:#555">++</span> len] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>;j <span style="color:#555">&lt;=</span> len <span style="color:#555">&amp;&amp;</span> i <span style="color:#555">*</span> prim[j] <span style="color:#555">&lt;=</span> x;j <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>            vis[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">%</span> prim[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//试除法求质数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> x <span style="color:#555">/</span> i; i <span style="color:#555">++</span> ){
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">while</span>(x<span style="color:#555">%</span>i <span style="color:#555">==</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>    x<span style="color:#555">/=</span>i;
</span></span><span style="display:flex;"><span>    primes[i]<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#069;font-weight:bold">if</span>(x <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>) primes[x]<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>欧拉函数</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">inline</span> <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">sieve</span>(<span style="color:#078;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>	phi[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>;i <span style="color:#555">&lt;=</span> x;i <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span> vis[i]) {
</span></span><span style="display:flex;"><span>        	prim[<span style="color:#555">++</span> len] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        	phi[i] <span style="color:#555">=</span> i <span style="color:#555">-</span> <span style="color:#f60">1</span>;	<span style="color:#09f;font-style:italic">//因为欧拉函数代表小于这个数的且与这个数互质的数的个数，所以质数的欧拉函数为它本身减1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>;j <span style="color:#555">&lt;=</span> len <span style="color:#555">&amp;&amp;</span> i <span style="color:#555">*</span> prim[j] <span style="color:#555">&lt;=</span> x;j <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>            vis[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">%</span> prim[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>            	phi[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> phi[i] <span style="color:#555">*</span> prim[j];
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            phi[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> phi[i] <span style="color:#555">*</span> (prim[j] <span style="color:#555">-</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>约数个数</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">inline</span> <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">sieve</span>(<span style="color:#078;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>;i <span style="color:#555">&lt;=</span> x;i <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span> vis[i]) {
</span></span><span style="display:flex;"><span>        	prim[<span style="color:#555">++</span> len] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        	d[i] <span style="color:#555">=</span> <span style="color:#f60">2</span>;	<span style="color:#09f;font-style:italic">//质数的约数只有1和它本身
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        	sum[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>;j <span style="color:#555">&lt;=</span> len <span style="color:#555">&amp;&amp;</span> i <span style="color:#555">*</span> prim[j] <span style="color:#555">&lt;=</span> x;j <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>            vis[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">%</span> prim[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>            	sum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> sum[i] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            	d[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> d[i] <span style="color:#555">/</span> (sum[i] <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (sum[i] <span style="color:#555">+</span> <span style="color:#f60">2</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            sum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            d[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> d[i] <span style="color:#555">*</span> <span style="color:#f60">2</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>约数和</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">inline</span> <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">sieve</span>(<span style="color:#078;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>;i <span style="color:#555">&lt;=</span> x;i <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span> vis[i]) {
</span></span><span style="display:flex;"><span>        	prim[<span style="color:#555">++</span> len] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        	psum[i] <span style="color:#555">=</span> s[i] <span style="color:#555">=</span> i <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>;j <span style="color:#555">&lt;=</span> len <span style="color:#555">&amp;&amp;</span> i <span style="color:#555">*</span> prim[j] <span style="color:#555">&lt;=</span> x;j <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>            vis[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">%</span> prim[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>            	psum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> psum[i] <span style="color:#555">*</span> prim[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            	s[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> s[i] <span style="color:#555">/</span> psum[i] <span style="color:#555">*</span> psum[i <span style="color:#555">*</span> prim[j]]
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            psum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> prim[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            s[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> s[i] <span style="color:#555">*</span> psum[i <span style="color:#555">*</span> prim[j]];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>本题思路：【分治法(分解为k为偶数和k为奇数的情况进行分治讨论)+约数+快速幂】</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;iostream&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include&lt;unordered_map&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> LL;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> mod <span style="color:#555">=</span> <span style="color:#f60">9901</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> A, B;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//保存质因子以及出现的次数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>unordered_map<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, <span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> primes;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//试除法质因子分解
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">divide</span>(<span style="color:#078;font-weight:bold">int</span> n) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n <span style="color:#555">/</span> i; i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(n <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(n <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>                primes[i]<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>                n <span style="color:#555">/=</span> i;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(n <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>) {
</span></span><span style="display:flex;"><span>        primes[n]<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//快速幂
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">qmid</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b) {
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(b) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(b <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>) res <span style="color:#555">=</span> (LL)res <span style="color:#555">*</span> a <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>        a <span style="color:#555">=</span> (LL)a <span style="color:#555">*</span> a <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>        b <span style="color:#555">&gt;&gt;=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//p0 + .. + pk-1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">sum</span>(<span style="color:#078;font-weight:bold">int</span> p, <span style="color:#078;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(k <span style="color:#555">==</span> <span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">1</span>;  <span style="color:#09f;font-style:italic">//边界
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span>(k <span style="color:#555">%</span> <span style="color:#f60">2</span> <span style="color:#555">==</span> <span style="color:#f60">0</span>) {  
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> (LL)(qmid(p, k <span style="color:#555">/</span> <span style="color:#f60">2</span>) <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> sum(p, k <span style="color:#555">/</span> <span style="color:#f60">2</span>) <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> (qmid(p, k <span style="color:#555">-</span> <span style="color:#f60">1</span>) <span style="color:#555">+</span> sum(p, k <span style="color:#555">-</span> <span style="color:#f60">1</span>)) <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>(){
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> A <span style="color:#555">&gt;&gt;</span> B;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//对A分解质因子
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    divide(A);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#069;font-weight:bold">auto</span> <span style="color:#99f">it</span> : primes) {
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//p是质因子，k是质因子的次数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> it.first, k <span style="color:#555">=</span> it.second <span style="color:#555">*</span> B;
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// res要乘上每一项, 注意这里是k + 1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        res <span style="color:#555">=</span> (LL)res <span style="color:#555">*</span> sum(p, k <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>A) res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> res <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="并查集">并查集</h3>
<ul>
<li>
<p>朴素的并查集</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> p[N]; <span style="color:#09f;font-style:italic">//存储每个点的祖宗节点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//返回x的祖宗节点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(p[x] <span style="color:#555">!=</span> x) p[x] <span style="color:#555">=</span> find(p[x]); <span style="color:#09f;font-style:italic">//如果p[x]不是根节点的话，那么就让p[x]为他的祖宗结点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> p[x];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//初始化，假设节点编号是1~n
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>) p[i] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//合并a和b所在的两个集合
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>p[find(a)] <span style="color:#555">=</span> find(b); <span style="color:#09f;font-style:italic">//合并操作 也就是让a的祖宗结点的父亲等于b的祖宗结点
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>维护size的并查集</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> p[N], size[N];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//p[]存储每个点的祖宗结点，size[]只有祖宗结点的有意义，表示祖宗结点所在集合中的点的数量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//返回x的祖宗结点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(p[x] <span style="color:#555">!=</span> x) p[x] <span style="color:#555">=</span> find(p[x]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> p[x];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//初始化，假定结点编号1~n
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>    size[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//合并a和b所在的两个集合
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>size[find(b)] <span style="color:#555">+=</span> size[find(a)];
</span></span><span style="display:flex;"><span>p[find(a)] <span style="color:#555">=</span> find(b);
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>维护到祖宗节点的并查集</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> p[N],d[N];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//p[]存储每个点的祖宗结点，d[x]存储x到p[x]的距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//返回x的祖宗结点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(p[x] <span style="color:#555">!=</span> x)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> u <span style="color:#555">=</span> find(p[x]);
</span></span><span style="display:flex;"><span>        d[x] <span style="color:#555">+=</span> d[p[x]];
</span></span><span style="display:flex;"><span>        p[x] <span style="color:#555">=</span> u;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> p[x];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//初始化，假定结点编号是1~n
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>    d[i] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//合并a和b所在的两个集合
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>p[find(a)] <span style="color:#555">=</span> find(b);
</span></span><span style="display:flex;"><span>d[find(a)] <span style="color:#555">=</span> distance; <span style="color:#09f;font-style:italic">//根据具体问题，初始化find(a)的偏移量
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="带权的综合并查集">带权的综合并查集</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/240/">https://www.acwing.com/problem/content/240/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">30010</span>,M <span style="color:#555">=</span> <span style="color:#f60">30000</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> T;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> p[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> dist[N],s[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(p[x] <span style="color:#555">!=</span> x){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> u <span style="color:#555">=</span> find(p[x]);
</span></span><span style="display:flex;"><span>        dist[x] <span style="color:#555">+=</span> dist[p[x]];
</span></span><span style="display:flex;"><span>        p[x] <span style="color:#555">=</span> u;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> p[x];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ios<span style="color:#555">::</span>sync_with_stdio(<span style="color:#366">false</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#f60">0</span>),cout.tie(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> T;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> M; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        p[i] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        s[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(T <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        string op;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> a,b;
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> op <span style="color:#555">&gt;&gt;</span> a <span style="color:#555">&gt;&gt;</span> b;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> pa <span style="color:#555">=</span> find(a), pb <span style="color:#555">=</span> find(b);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(op <span style="color:#555">==</span> <span style="color:#c30">&#34;M&#34;</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(pa <span style="color:#555">!=</span> pb){
</span></span><span style="display:flex;"><span>                p[pa] <span style="color:#555">=</span> pb;
</span></span><span style="display:flex;"><span>                dist[pa] <span style="color:#555">=</span> s[pb];
</span></span><span style="display:flex;"><span>                s[pb] <span style="color:#555">+=</span> s[pa];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(pa <span style="color:#555">!=</span> pb) cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;-1</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>                cout <span style="color:#555">&lt;&lt;</span> max(<span style="color:#f60">0</span>,abs(dist[a] <span style="color:#555">-</span> dist[b]) <span style="color:#555">-</span> <span style="color:#f60">1</span>) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="哈希">哈希</h3>
<ul>
<li>一般哈希</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>(<span style="color:#f60">1</span>) <span style="color:#a00;background-color:#faa">拉链法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> h[N], e[N], ne[N], idx;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 向哈希表中插入一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> (x <span style="color:#555">%</span> N <span style="color:#555">+</span> N) <span style="color:#555">%</span> N;
</span></span><span style="display:flex;"><span>        e[idx] <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span>        ne[idx] <span style="color:#555">=</span> h[k];
</span></span><span style="display:flex;"><span>        h[k] <span style="color:#555">=</span> idx <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 在哈希表中查询某个数是否存在
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> (x <span style="color:#555">%</span> N <span style="color:#555">+</span> N) <span style="color:#555">%</span> N;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[k]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i])
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (e[i] <span style="color:#555">==</span> x)
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>(<span style="color:#f60">2</span>) <span style="color:#a00;background-color:#faa">开放寻址法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//注意开坑位N的时候要多开比原数据多两到三倍
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> null <span style="color:#555">=</span> <span style="color:#f60">0x3f3f3f3f</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> h[N];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 如果x在哈希表中，返回x的下标；如果x不在哈希表中，返回x应该插入的位置
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> (x <span style="color:#555">%</span> N <span style="color:#555">+</span> N) <span style="color:#555">%</span> N;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span> (h[t] <span style="color:#555">!=</span> null <span style="color:#555">&amp;&amp;</span> h[t] <span style="color:#555">!=</span> x)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            t <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (t <span style="color:#555">==</span> N) t <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> t;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//开放寻址法的话，如果是删除，就是先找到那个数，然后打上一个标记，表示这个数被删除了
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>字符串哈希</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">核心思想：将字符串看成</span>P进制数<span style="color:#a00;background-color:#faa">，</span>P的经验值是131或13331<span style="color:#a00;background-color:#faa">，取这两个值的冲突概率低</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">小技巧：取模的数用</span><span style="color:#f60">2</span><span style="color:#555">^</span><span style="color:#f60">64</span><span style="color:#a00;background-color:#faa">，这样直接用</span><span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> long存储<span style="color:#a00;background-color:#faa">，溢出的结果就是取模的结果</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">unsigned</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ULL; <span style="color:#09f;font-style:italic">//可以不用取模了，这个溢出就等价于进行取模
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>ULL h[N], p[N]; <span style="color:#09f;font-style:italic">// h[k]存储字符串前k个字母的哈希值, p[k]存储 P^k mod 2^64
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 初始化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>p[<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    h[i] <span style="color:#555">=</span> h[i <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">*</span> P <span style="color:#555">+</span> str[i];
</span></span><span style="display:flex;"><span>    p[i] <span style="color:#555">=</span> p[i <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">*</span> P;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 计算子串 str[l ~ r] 的哈希值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>ULL <span style="color:#c0f">get</span>(<span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> h[r] <span style="color:#555">-</span> h[l <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">*</span> p[r <span style="color:#555">-</span> l <span style="color:#555">+</span> <span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="数据结构-栈-队列-单调栈-单调队列">数据结构｜栈｜队列｜单调栈&amp;单调队列⭐️</h3>
<ul>
<li><strong>单链表</strong></li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// head存储链表头，e[]存储节点的值，ne[]存储节点的next指针，idx表示当前用到了哪个节点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> head, e[N], ne[N], idx;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 初始化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">init</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    head <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    idx <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 在链表头插入一个数a
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">int</span> a)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#555">=</span> a, ne[idx] <span style="color:#555">=</span> head, head <span style="color:#555">=</span> idx <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 将头结点删除，需要保证头结点存在
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">remove</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    head <span style="color:#555">=</span> ne[head];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>双链表</strong></li>
</ul>
<blockquote>
<p>结点为idx=0的结点为头结点
结点为idx=1的结点为尾结点</p>
<p><code>规定的是0表示头结点，1表示尾结点，如果idx从1开始的时候，可以重新设置0表示头结点，-1表示尾结点</code></p>
<p>故此后面再加入的结点是从idx=2编号开始插入or删除的</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// e[]表示节点的值，l[]表示节点的左指针，r[]表示节点的右指针，idx表示当前用到了哪个节点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> e[N], l[N], r[N], idx;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 初始化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">init</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//0是左端点，1是右端点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    r[<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>, l[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    idx <span style="color:#555">=</span> <span style="color:#f60">2</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 在节点a的右边插入一个数x
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span>    l[idx] <span style="color:#555">=</span> a, r[idx] <span style="color:#555">=</span> r[a];
</span></span><span style="display:flex;"><span>    l[r[a]] <span style="color:#555">=</span> idx, r[a] <span style="color:#555">=</span> idx <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 删除节点a
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">remove</span>(<span style="color:#078;font-weight:bold">int</span> a)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    l[r[a]] <span style="color:#555">=</span> l[a];
</span></span><span style="display:flex;"><span>    r[l[a]] <span style="color:#555">=</span> r[a];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//关于双链表的遍历
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> pos <span style="color:#555">=</span> r[<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">while</span>(pos <span style="color:#555">!=</span> <span style="color:#f60">1</span>)<span style="color:#09f;font-style:italic">//当指向右边界节点时,循环结束
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> e[pos] <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    pos <span style="color:#555">=</span> r[pos];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>栈</strong></li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// tt表示栈顶
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> stk[N], tt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 向栈顶插入一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>stk[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 从栈顶弹出一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>tt <span style="color:#555">--</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 栈顶的值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>stk[tt];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 判断栈是否为空，如果 tt &gt; 0，则表示不为空
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">if</span> (tt <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>表达式求值问题</strong></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;unordered_map&gt;</span><span style="color:#099"> </span><span style="color:#09f;font-style:italic">//哈希表主要用于存运算符优先性
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include</span> <span style="color:#099">&lt;stack&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stack<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> num; <span style="color:#09f;font-style:italic">//数栈
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>stack<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">char</span><span style="color:#555">&gt;</span> op; <span style="color:#09f;font-style:italic">//运算符栈
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">eval</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">auto</span> b <span style="color:#555">=</span> num.top();
</span></span><span style="display:flex;"><span>    num.pop();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">auto</span> a <span style="color:#555">=</span> num.top();
</span></span><span style="display:flex;"><span>    num.pop();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">auto</span> c <span style="color:#555">=</span> op.top();
</span></span><span style="display:flex;"><span>    op.pop();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(c <span style="color:#555">==</span> <span style="color:#c30">&#39;+&#39;</span>) x <span style="color:#555">=</span> a <span style="color:#555">+</span> b;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span>(c <span style="color:#555">==</span> <span style="color:#c30">&#39;-&#39;</span>) x <span style="color:#555">=</span> a <span style="color:#555">-</span> b;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span>(c <span style="color:#555">==</span> <span style="color:#c30">&#39;*&#39;</span>) x <span style="color:#555">=</span> a <span style="color:#555">*</span> b;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span> x <span style="color:#555">=</span> a <span style="color:#555">/</span> b;
</span></span><span style="display:flex;"><span>    num.push(x);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    unordered_map<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">char</span>, <span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> pr{{<span style="color:#c30">&#39;+&#39;</span>, <span style="color:#f60">1</span>}, {<span style="color:#c30">&#39;-&#39;</span>, <span style="color:#f60">1</span>}, {<span style="color:#c30">&#39;*&#39;</span>, <span style="color:#f60">2</span>}, {<span style="color:#c30">&#39;/&#39;</span>, <span style="color:#f60">2</span>}}; <span style="color:#09f;font-style:italic">//扩展可以增加{&#39;^&#39;,3}
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    string str;
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> str;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> str.size(); i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> c <span style="color:#555">=</span> str[i];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(isdigit(c))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> x <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(j <span style="color:#555">&lt;</span> str.size() <span style="color:#555">&amp;&amp;</span> isdigit(str[j]))
</span></span><span style="display:flex;"><span>                x <span style="color:#555">=</span> x <span style="color:#555">*</span> <span style="color:#f60">10</span> <span style="color:#555">+</span> str[j <span style="color:#555">++</span>] <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>            i <span style="color:#555">=</span> j <span style="color:#555">-</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//注意更新下i
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            num.push(x); <span style="color:#09f;font-style:italic">//数栈处理
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span>(c <span style="color:#555">==</span> <span style="color:#c30">&#39;(&#39;</span>) op.push(c); <span style="color:#09f;font-style:italic">//左括号立马入栈
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span>(c <span style="color:#555">==</span> <span style="color:#c30">&#39;)&#39;</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(op.top() <span style="color:#555">!=</span> <span style="color:#c30">&#39;(&#39;</span>) eval(); <span style="color:#09f;font-style:italic">//如果遇上右括号，那就先把括号内的全都给算完
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            op.pop();<span style="color:#09f;font-style:italic">//弹出左括号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span><span style="color:#09f;font-style:italic">//如果是一般操作符的话，判断优先级再进行运算
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(op.size() <span style="color:#555">&amp;&amp;</span> pr[op.top()] <span style="color:#555">&gt;=</span> pr[c]) eval();
</span></span><span style="display:flex;"><span>            op.push(c);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(op.size()) eval();<span style="color:#09f;font-style:italic">//如果还剩下运算符的话，那么一直计算直到所有运算符计算完毕
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    cout <span style="color:#555">&lt;&lt;</span> num.top();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>后缀表达式求值</strong></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>stack<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> ch;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> s,x,y;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(ch <span style="color:#555">!=</span> <span style="color:#c30">&#39;@&#39;</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ch <span style="color:#555">=</span> getchar();
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">switch</span>(ch)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">case</span> <span style="color:#c30">&#39;+&#39;</span><span style="color:#555">:</span> x <span style="color:#555">=</span> n.top(); n.pop(); y <span style="color:#555">=</span> n.top(); n.pop(); n.push(x<span style="color:#555">+</span>y); <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">case</span> <span style="color:#c30">&#39;-&#39;</span><span style="color:#555">:</span> x <span style="color:#555">=</span> n.top(); n.pop(); y <span style="color:#555">=</span> n.top(); n.pop(); n.push(y<span style="color:#555">-</span>x); <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">case</span> <span style="color:#c30">&#39;*&#39;</span><span style="color:#555">:</span> x <span style="color:#555">=</span> n.top(); n.pop(); y <span style="color:#555">=</span> n.top(); n.pop(); n.push(x<span style="color:#555">*</span>y); <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">case</span> <span style="color:#c30">&#39;/&#39;</span><span style="color:#555">:</span> x <span style="color:#555">=</span> n.top(); n.pop(); y <span style="color:#555">=</span> n.top(); n.pop(); n.push(y<span style="color:#555">/</span>x); <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">case</span> <span style="color:#c30">&#39;.&#39;</span><span style="color:#555">:</span> n.push(s); s <span style="color:#555">=</span> <span style="color:#f60">0</span>; <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">default</span> <span style="color:#555">:</span> s <span style="color:#555">=</span> s <span style="color:#555">*</span> <span style="color:#f60">10</span> <span style="color:#555">+</span> ch <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>; <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,n.top());
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>队列</strong></li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// hh 表示队头，tt表示队尾
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> q[N], hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 向队尾插入一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>q[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 从队头弹出一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>hh <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 队头的值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>q[hh];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 判断队列是否为空，如果 hh &lt;= tt，则表示不为空
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">if</span> (hh <span style="color:#555">&lt;=</span> tt)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>循环队列</strong></li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// hh 表示队头，tt表示队尾的后一个位置
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> q[N], hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 向队尾插入一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>q[tt <span style="color:#555">++</span> ] <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> (tt <span style="color:#555">==</span> N) tt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 从队头弹出一个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>hh <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">if</span> (hh <span style="color:#555">==</span> N) hh <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 队头的值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>q[hh];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 判断队列是否为空，如果hh != tt，则表示不为空
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">if</span> (hh <span style="color:#555">!=</span> tt)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<ul>
<li>单调递增栈：单调递增栈就是从栈底到栈顶数据是从大到小</li>
<li>单调递减栈：单调递减栈就是从栈底到栈顶数据是从小到大</li>
</ul>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//单调递增栈
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">while</span>(<span style="color:#555">!</span>st.empty() <span style="color:#555">&amp;&amp;</span> a[i] <span style="color:#555">&lt;=</span> st.top()){
</span></span><span style="display:flex;"><span>            st.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(st.empty()) cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;-1 &#34;</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>st.empty()) cout <span style="color:#555">&lt;&lt;</span> st.top() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>        st.push(a[i]);
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>stack<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> st;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//此处一般需要给数组最后添加结束标志符，具体下面例题会有详细讲解
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#a00;background-color:#faa">遍历这个数组</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">if</span> (<span style="color:#a00;background-color:#faa">栈空</span> <span style="color:#555">||</span> <span style="color:#a00;background-color:#faa">栈顶元素大于等于当前比较元素</span>)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#a00;background-color:#faa">入栈</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#069;font-weight:bold">while</span> (<span style="color:#a00;background-color:#faa">栈不为空</span> <span style="color:#555">&amp;&amp;</span> <span style="color:#a00;background-color:#faa">栈顶元素小于当前元素</span>)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#a00;background-color:#faa">栈顶元素出栈</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#a00;background-color:#faa">更新结果</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a00;background-color:#faa">当前数据入栈</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//单调栈的一般模板，数组栈
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">常见模型：找出每个数左边离它最近的比它大</span><span style="color:#555">/</span><span style="color:#a00;background-color:#faa">小的数</span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> tt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (tt <span style="color:#555">&amp;&amp;</span> check(stk[tt], i)) tt <span style="color:#555">--</span> ;
</span></span><span style="display:flex;"><span>    stk[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>单调队列的实现方式</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">常见模型：找出滑动窗口中的最大值</span><span style="color:#555">/</span><span style="color:#a00;background-color:#faa">最小值</span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> check_out(q[hh])) hh <span style="color:#555">++</span> ;  <span style="color:#09f;font-style:italic">// 判断队头是否滑出窗口
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span> (hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> check(q[tt], i)) tt <span style="color:#555">--</span> ;
</span></span><span style="display:flex;"><span>    q[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="滑动窗口">滑动窗口</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//STL法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include&lt;queue&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1000010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N],n,k;
</span></span><span style="display:flex;"><span>deque<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>k);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>) scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(<span style="color:#555">!</span>q.empty() <span style="color:#555">&amp;&amp;</span> a[i] <span style="color:#555">&lt;</span> q.back()){ <span style="color:#09f;font-style:italic">//新加入的值要小于队尾元素的话，则弹出
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            q.pop_back();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        q.push_back(a[i]);<span style="color:#09f;font-style:italic">//加入新的元素
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">//判断队头是否出队
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">-</span> k <span style="color:#555">&gt;</span> <span style="color:#f60">0</span> <span style="color:#555">&amp;&amp;</span> q.front() <span style="color:#555">==</span> a[i <span style="color:#555">-</span> k]){
</span></span><span style="display:flex;"><span>            q.pop_front();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//如果满足的话，输出队首元素
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">-</span> k <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>) cout <span style="color:#555">&lt;&lt;</span> q.front() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    q.clear(); <span style="color:#09f;font-style:italic">//记得清空一下队列；
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    cout <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(<span style="color:#555">!</span>q.empty() <span style="color:#555">&amp;&amp;</span> a[i] <span style="color:#555">&gt;</span> q.back()){
</span></span><span style="display:flex;"><span>            q.pop_back();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        q.push_back(a[i]);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">-</span> k <span style="color:#555">&gt;</span> <span style="color:#f60">0</span> <span style="color:#555">&amp;&amp;</span> q.front() <span style="color:#555">==</span> a[i <span style="color:#555">-</span> k]){
</span></span><span style="display:flex;"><span>            q.pop_front();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">-</span> k <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>) cout <span style="color:#555">&lt;&lt;</span> q.front() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1000100</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,k;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> q[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n <span style="color:#555">&gt;&gt;</span> k;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>) cin <span style="color:#555">&gt;&gt;</span> a[i];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> q[hh] <span style="color:#555">+</span> k <span style="color:#555">&lt;=</span> i) hh <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> a[q[tt]] <span style="color:#555">&gt;=</span> a[i]) tt<span style="color:#555">--</span>;
</span></span><span style="display:flex;"><span>        q[<span style="color:#555">++</span>tt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">&gt;=</span> k) cout <span style="color:#555">&lt;&lt;</span> a[q[hh]] <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> q[hh] <span style="color:#555">+</span> k <span style="color:#555">&lt;=</span> i) hh <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> a[q[tt]] <span style="color:#555">&lt;=</span> a[i]) tt <span style="color:#555">--</span>;
</span></span><span style="display:flex;"><span>        q[<span style="color:#555">++</span>tt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">&gt;=</span> k) cout <span style="color:#555">&lt;&lt;</span> a[q[hh]] <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>滑动窗口扩展——前缀和的滑动窗口</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>     cin <span style="color:#555">&gt;&gt;</span> a[i];
</span></span><span style="display:flex;"><span>     s[i] <span style="color:#555">=</span> s[i<span style="color:#555">-</span><span style="color:#f60">1</span>]<span style="color:#555">+</span>a[i];
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> q.push_back(<span style="color:#f60">0</span>);<span style="color:#09f;font-style:italic">//放入一个0，因为前缀和是从下标1开始的，这里也要放入一个0，防止前缀和计算时越界
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span> <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">-</span> q.front() <span style="color:#555">&gt;</span> m <span style="color:#555">&amp;&amp;</span> <span style="color:#555">!</span>q.empty()){
</span></span><span style="display:flex;"><span>         q.pop_front();
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     ans <span style="color:#555">=</span> max(ans, s[i] <span style="color:#555">-</span> s[q.front()]); <span style="color:#09f;font-style:italic">//为什么要递增滑动窗口？因为s[i] - s[q.front()]
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>     <span style="color:#069;font-weight:bold">while</span>(<span style="color:#555">!</span>q.empty() <span style="color:#555">&amp;&amp;</span> s[q.back()] <span style="color:#555">&gt;=</span> s[i]){ <span style="color:#09f;font-style:italic">//这里应该是要递增的滑动窗口才行
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>         q.pop_back();
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     q.push_back(i);
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p>类似题：第十四届蓝桥杯 —&gt;把滑动窗口变成一个二维的</p>
<p><a href="https://www.acwing.com/problem/content/4967/">https://www.acwing.com/problem/content/4967/</a></p>
</blockquote>
<blockquote>
<p>思路：我们可以固定列的表示，将其转化为一个一维的问题，例如对于A*B窗口，我们首先对于每一个A*1求一个最值$b_i$——&gt;滑动窗口模版</p>
<!-- > <img src="./wdcs.assets/image-20230415153514323.png" alt="image-20230415153514323" style="zoom:40%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqhmv-0.png" alt="20230415153514323"></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;iostream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;cstring&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;algorithm&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> LL;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1010</span>, MOD <span style="color:#555">=</span> <span style="color:#f60">998244353</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n, m, A, B;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> w[N][N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> rmax[N][N], rmin[N][N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> q[N];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">get_max</span>(<span style="color:#078;font-weight:bold">int</span> a[], <span style="color:#078;font-weight:bold">int</span> b[], <span style="color:#078;font-weight:bold">int</span> tot, <span style="color:#078;font-weight:bold">int</span> k)<span style="color:#09f;font-style:italic">//滑动窗口求最大值模版
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> tot; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> q[hh] <span style="color:#555">&lt;=</span> i <span style="color:#555">-</span> k) hh <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span> (hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> a[q[tt]] <span style="color:#555">&lt;=</span> a[i]) tt <span style="color:#555">--</span> ;
</span></span><span style="display:flex;"><span>        q[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        b[i] <span style="color:#555">=</span> a[q[hh]];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">get_min</span>(<span style="color:#078;font-weight:bold">int</span> a[], <span style="color:#078;font-weight:bold">int</span> b[], <span style="color:#078;font-weight:bold">int</span> tot, <span style="color:#078;font-weight:bold">int</span> k) <span style="color:#09f;font-style:italic">//滑动窗口求最小值模版
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> tot; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> q[hh] <span style="color:#555">&lt;=</span> i <span style="color:#555">-</span> k) hh <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span> (hh <span style="color:#555">&lt;=</span> tt <span style="color:#555">&amp;&amp;</span> a[q[tt]] <span style="color:#555">&gt;=</span> a[i]) tt <span style="color:#555">--</span> ;
</span></span><span style="display:flex;"><span>        q[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        b[i] <span style="color:#555">=</span> a[q[hh]];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d%d%d&#34;</span>, <span style="color:#555">&amp;</span>n, <span style="color:#555">&amp;</span>m, <span style="color:#555">&amp;</span>A, <span style="color:#555">&amp;</span>B);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> m; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>w[i][j]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        get_max(w[i], rmax[i], m, B);
</span></span><span style="display:flex;"><span>        get_min(w[i], rmin[i], m, B);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> a[N], b[N], c[N];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> B <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> m; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> n; j <span style="color:#555">++</span> ) a[j] <span style="color:#555">=</span> rmax[j][i];
</span></span><span style="display:flex;"><span>        get_max(a, b, n, A);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> n; j <span style="color:#555">++</span> ) a[j] <span style="color:#555">=</span> rmin[j][i];
</span></span><span style="display:flex;"><span>        get_min(a, c, n, A);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> A <span style="color:#555">-</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;</span> n; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>            res <span style="color:#555">=</span> (res <span style="color:#555">+</span> (LL)b[j] <span style="color:#555">*</span> c[j]) <span style="color:#555">%</span> MOD;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>, res);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="kmp">KMP</h3>
<blockquote>
<p>注意去体会next数组的含义</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// s[]是长文本，p[]是模式串，n是s的长度，m是p的长度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">求模式串的</span>Next数组<span style="color:#a00;background-color:#faa">：</span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> m; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  	<span style="color:#09f;font-style:italic">//模式串第一个位置不存在公共前后缀，故为j初始化为0开始；
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span> (j <span style="color:#555">&amp;&amp;</span> p[i] <span style="color:#555">!=</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">=</span> ne[j];<span style="color:#09f;font-style:italic">//如果不相等，则回溯
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span> (p[i] <span style="color:#555">==</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">++</span> ;<span style="color:#09f;font-style:italic">//如果j+1个位置的字符和第i个位置的字符相等，j++
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    ne[i] <span style="color:#555">=</span> j;<span style="color:#09f;font-style:italic">//j值就是截止到第i个位置，最长前后缀子串的长度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 匹配
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (j <span style="color:#555">&amp;&amp;</span> s[i] <span style="color:#555">!=</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">=</span> ne[j];<span style="color:#09f;font-style:italic">//如果不相等，则回溯
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span> (s[i] <span style="color:#555">==</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">++</span> ;<span style="color:#09f;font-style:italic">//如果模式串的j+1个位置的字符和字符串第i个位置的字符相等，j++
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span> (j <span style="color:#555">==</span> m) <span style="color:#09f;font-style:italic">//如果此时的长度与模式串一样的话，则匹配成功 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        j <span style="color:#555">=</span> ne[j];
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// 匹配成功后的逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> m,n;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1000010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> s[N],p[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> ne[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> cin <span style="color:#555">&gt;&gt;</span> m <span style="color:#555">&gt;&gt;</span> p <span style="color:#555">+</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//按下面的写法的话应该注意下标从1开始
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span> cin <span style="color:#555">&gt;&gt;</span> n <span style="color:#555">&gt;&gt;</span> s <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#09f;font-style:italic">//Get next
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span> <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> m; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">while</span>(j <span style="color:#555">&amp;&amp;</span> p[i] <span style="color:#555">!=</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">=</span> ne[j];
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span>(p[i] <span style="color:#555">==</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>     ne[i] <span style="color:#555">=</span> j;
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">while</span>(j <span style="color:#555">&amp;&amp;</span> s[i] <span style="color:#555">!=</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">=</span> ne[j];
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span>(s[i] <span style="color:#555">==</span> p[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span>(j <span style="color:#555">==</span> m){
</span></span><span style="display:flex;"><span>         cout <span style="color:#555">&lt;&lt;</span> i <span style="color:#555">-</span> m <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>         j <span style="color:#555">=</span> ne[j];
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h4 id="next数组周期">Next数组周期</h4>
<blockquote>
<p>next数组存在周期性，<strong>循环元</strong>
$$
对于next数组，从前往后进行遍历;\
if\ i % (i - ne[i])-&gt;则表示S[1\sim (i-ne[i])]是S[1\sim i]的最小循环元\
那么存在多少个最小循环元呢，答案是：i/(i-ne[i])
$$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1000010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">1</span>; p; p <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(n <span style="color:#555">==</span> <span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">char</span> str[N];
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> str <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Test case #&#34;</span> <span style="color:#555">&lt;&lt;</span> p <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> ne[N];
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//next数组,next数组存在周期性，要利用这个性质
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>, j <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(j <span style="color:#555">&amp;&amp;</span> str[i] <span style="color:#555">!=</span> str[j<span style="color:#555">+</span><span style="color:#f60">1</span>]) j <span style="color:#555">=</span> ne[j];
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(str[i] <span style="color:#555">==</span> str[j <span style="color:#555">+</span> <span style="color:#f60">1</span>]) j <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>            ne[i] <span style="color:#555">=</span> j;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">%</span> (i <span style="color:#555">-</span> ne[i])<span style="color:#555">==</span><span style="color:#f60">0</span> <span style="color:#555">&amp;&amp;</span> ne[i]){
</span></span><span style="display:flex;"><span>                cout <span style="color:#555">&lt;&lt;</span> i <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span> <span style="color:#555">&lt;&lt;</span> i <span style="color:#555">/</span> (i <span style="color:#555">-</span> ne[i]) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="trie树">Trie树</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Trie的基本操作过程：
</span></span><span style="display:flex;"><span>1.初始化
</span></span><span style="display:flex;"><span>	一棵空Trie仅包含一个根节点，该点的字符指针均指向空。
</span></span><span style="display:flex;"><span>2.插入
</span></span><span style="display:flex;"><span>	当需要插入一个字符串S时，我们令一个指针P起初指向根节点。然后，依次扫描S中的每个字符c;
</span></span><span style="display:flex;"><span>	1)若P的c字符指针指向一个已经存在的结点Q,则令P = Q
</span></span><span style="display:flex;"><span>	2)若P的c字符指针指向空，则新建一个结点Q，令P的c字符指针指向Q,然后令P = Q
</span></span><span style="display:flex;"><span>	当S中的字符扫描完毕时，在当前结点P上标记它是一个字符串的末尾
</span></span><span style="display:flex;"><span>3.检索
</span></span><span style="display:flex;"><span>	当需要检索一个字符串S在Trie中是否存在时，我们令一个指针P起初指向根节点，然后依次扫描S中的每个字符c;
</span></span><span style="display:flex;"><span>	1)若P的c字符指针指向空，则说明S没用被插入过Trie，结束检索。
</span></span><span style="display:flex;"><span>	2)若P的c字符指针指向一个已经存在的结点Q,则令P = Q
</span></span><span style="display:flex;"><span>	当S中的字符扫描完毕时，若当前结点P被标记为一个字符串的末尾，则说明S在Trie中存在，否则说明S没有被插入过Trie
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> trie[SIZE][<span style="color:#f60">26</span>], tot <span style="color:#555">=</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//初始化，假设字符串由小写字母构成
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>str)
</span></span><span style="display:flex;"><span>{<span style="color:#09f;font-style:italic">//插入一个字符串
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span> <span style="color:#078;font-weight:bold">int</span> len <span style="color:#555">=</span> strlen(str), p <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">0</span>; k <span style="color:#555">&lt;</span> len; k <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span> {
</span></span><span style="display:flex;"><span>     <span style="color:#078;font-weight:bold">int</span> ch <span style="color:#555">=</span> str[k] <span style="color:#555">-</span> <span style="color:#c30">&#39;a&#39;</span>;
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span>(trie[p][ch] <span style="color:#555">==</span> <span style="color:#f60">0</span>) trie[p][ch] <span style="color:#555">=</span> <span style="color:#555">++</span>tot;
</span></span><span style="display:flex;"><span>     p <span style="color:#555">=</span> trie[p][ch];
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> end[p] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">search</span>(<span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>str)
</span></span><span style="display:flex;"><span>{<span style="color:#09f;font-style:italic">//检索字符串是否存在
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span> <span style="color:#078;font-weight:bold">int</span> len <span style="color:#555">=</span> strlen(str), p <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">0</span>; k <span style="color:#555">&lt;</span> len; k <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span> {
</span></span><span style="display:flex;"><span>     p <span style="color:#555">=</span> trie[p][str[k] <span style="color:#555">-</span> <span style="color:#c30">&#39;a&#39;</span>];
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span>(p <span style="color:#555">==</span> <span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>yxc模版</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> son[N][<span style="color:#f60">26</span>], cnt[N], idx;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 0号点既是根节点，又是空节点 &lt;---
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// son[][]存储树中每个节点的子节点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// cnt[]存储以每个节点结尾的单词数量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 插入一个字符串
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>str)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; str[i]; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span> {
</span></span><span style="display:flex;"><span>     <span style="color:#078;font-weight:bold">int</span> u <span style="color:#555">=</span> str[i] <span style="color:#555">-</span> <span style="color:#c30">&#39;a&#39;</span>;
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>son[p][u]) son[p][u] <span style="color:#555">=</span> <span style="color:#555">++</span> idx;
</span></span><span style="display:flex;"><span>     p <span style="color:#555">=</span> son[p][u];
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> cnt[p] <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 查询字符串出现的次数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">query</span>(<span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>str)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; str[i]; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span> {
</span></span><span style="display:flex;"><span>     <span style="color:#078;font-weight:bold">int</span> u <span style="color:#555">=</span> str[i] <span style="color:#555">-</span> <span style="color:#c30">&#39;a&#39;</span>;
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>son[p][u]) <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>     p <span style="color:#555">=</span> son[p][u];
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#069;font-weight:bold">return</span> cnt[p];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h4 id="最大异或和">最大异或和</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/3488/">https://www.acwing.com/problem/content/3488/</a></p>
</blockquote>
<blockquote>
<p>一看到区间和——&gt;就要想到前缀和</p>
<blockquote>
<p>Trie树_最大异或对(Trie建树求解思想) —⭐️在这个基础上增加了长度限制（是关键）</p>
</blockquote>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">3100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> trie[N][<span style="color:#f60">2</span>],n,m;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> s[N],idx; <span style="color:#09f;font-style:italic">//idx索引编号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> cnt[N];<span style="color:#09f;font-style:italic">//cnt[n]的作用是标记滑动窗口内0，1的数量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">insert</span>(<span style="color:#078;font-weight:bold">int</span> x, <span style="color:#078;font-weight:bold">int</span> v){
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">30</span>; <span style="color:#555">~</span>i; i <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> x <span style="color:#555">&gt;&gt;</span> i <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>trie[p][t]) trie[p][t] <span style="color:#555">=</span> <span style="color:#555">++</span>idx;
</span></span><span style="display:flex;"><span>        p <span style="color:#555">=</span> trie[p][t];
</span></span><span style="display:flex;"><span>        cnt[p] <span style="color:#555">+=</span> v;<span style="color:#09f;font-style:italic">//⭐️:v表示有多少个节点可以到达此处
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">query</span>(<span style="color:#078;font-weight:bold">int</span> x){
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">30</span>; <span style="color:#555">~</span>i; i <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> x <span style="color:#555">&gt;&gt;</span> i <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(cnt[trie[p][<span style="color:#555">!</span>t]] <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>){<span style="color:#09f;font-style:italic">//当x对面的那个数！x存在时(0,1)，另外一个分支⭐️
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            t <span style="color:#555">=</span> (t <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">%</span> <span style="color:#f60">2</span>;<span style="color:#09f;font-style:italic">//x就变成另外一个数 !x
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        res <span style="color:#555">^=</span> t <span style="color:#555">&lt;&lt;</span> i;
</span></span><span style="display:flex;"><span>        p <span style="color:#555">=</span> trie[p][t];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ios<span style="color:#555">::</span>sync_with_stdio(<span style="color:#366">false</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#f60">0</span>),cout.tie(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n <span style="color:#555">&gt;&gt;</span> m;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> s[i];
</span></span><span style="display:flex;"><span>        s[i] <span style="color:#555">=</span> s[i <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">^</span> s[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> ans <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    insert(<span style="color:#f60">0</span>,<span style="color:#f60">1</span>); <span style="color:#09f;font-style:italic">//先插入一个0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>;i <span style="color:#555">&lt;=</span> n;i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">&gt;</span> m) insert(s[i <span style="color:#555">-</span> m <span style="color:#555">-</span> <span style="color:#f60">1</span>], <span style="color:#555">-</span><span style="color:#f60">1</span>);<span style="color:#09f;font-style:italic">//将滑动窗口外的数除去，这时就要修改cnt，故-1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        ans <span style="color:#555">=</span> max(ans,query(s[i]));<span style="color:#09f;font-style:italic">//在滑动窗口内求最大值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        insert(s[i], <span style="color:#f60">1</span>);<span style="color:#09f;font-style:italic">//求完后记得插入该值，方便后面的值进行异或
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> ans <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="bfs广度优先遍历">BFS广度优先遍历</h3>
<p>bfs模版：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span>st[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#366">true</span>; <span style="color:#09f;font-style:italic">// 表示1号点已经被遍历过
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>q.push(<span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">while</span> (q.size())
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>    q.pop();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[t]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[j])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            st[j] <span style="color:#555">=</span> <span style="color:#366">true</span>; <span style="color:#09f;font-style:italic">// 表示点j已经被遍历过
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            q.push(j);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="1562-微博转发">1562.微博转发</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1564/">https://www.acwing.com/problem/content/1564/</a></p>
</blockquote>
<blockquote>
<p>思路点：bfs广度优先遍历，别忘了怎么建图，与此同时，这里限制bfs的层数的方面值得学习！</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1100</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> h[N],ne[N<span style="color:#555">*</span><span style="color:#f60">100</span>],e[N<span style="color:#555">*</span><span style="color:#f60">100</span>],idx;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> vis[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,l,k;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">add</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b){
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#555">=</span> b;
</span></span><span style="display:flex;"><span>    ne[idx] <span style="color:#555">=</span> h[a];
</span></span><span style="display:flex;"><span>    h[a] <span style="color:#555">=</span> idx<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">bfs</span>(<span style="color:#078;font-weight:bold">int</span> x){
</span></span><span style="display:flex;"><span>    queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span>    q.push(x);
</span></span><span style="display:flex;"><span>    memset(vis,<span style="color:#f60">0</span>,<span style="color:#069;font-weight:bold">sizeof</span> vis);
</span></span><span style="display:flex;"><span>    vis[x] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> u <span style="color:#555">=</span> <span style="color:#f60">0</span>; u <span style="color:#555">&lt;</span> l; u <span style="color:#555">++</span>){<span style="color:#09f;font-style:italic">//限制遍历层数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#078;font-weight:bold">int</span> sz <span style="color:#555">=</span> q.size(); <span style="color:#09f;font-style:italic">//每一层的节点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">while</span>(sz <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>            q.pop();
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[t]; <span style="color:#555">~</span>i; i <span style="color:#555">=</span> ne[i]){
</span></span><span style="display:flex;"><span>                <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>vis[j]){
</span></span><span style="display:flex;"><span>                    q.push(j);
</span></span><span style="display:flex;"><span>                    vis[j] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>                    res <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ios<span style="color:#555">::</span>sync_with_stdio(<span style="color:#366">false</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#f60">0</span>),cout.tie(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n <span style="color:#555">&gt;&gt;</span> l;
</span></span><span style="display:flex;"><span>    memset(h,<span style="color:#555">-</span><span style="color:#f60">1</span>,<span style="color:#069;font-weight:bold">sizeof</span> h);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> m;
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> m;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span>(m <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> a;
</span></span><span style="display:flex;"><span>            cin <span style="color:#555">&gt;&gt;</span> a;
</span></span><span style="display:flex;"><span>            add(a,i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> k;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(k <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> x;
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> x;
</span></span><span style="display:flex;"><span>        cout <span style="color:#555">&lt;&lt;</span> bfs(x) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="dfs深度优先遍历">DFS深度优先遍历</h3>
<p>dfs模版：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>int dfs(int u)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    st[u] = true; // st[u] 表示点u已经被遍历过
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    for (int i = h[u]; i != -1; i = ne[i])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        int j = e[i];
</span></span><span style="display:flex;"><span>        if (!st[j]) dfs(j);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="165-小猫爬山">165. 小猫爬山⭐️</h4>
<blockquote>
<p>因为这里N比较小，但M比较大，故此这里不是一个背包问题，是一个DFS搜索问题。
同时也要想到怎么样才能不重不漏地枚举到每一个元素：
$$
对于每一个C_i 都有\
\begin{eqnarray}
C_i=
\begin{cases}
放到已有的车&amp; 枚举每辆车看是否超重，若没有超过则继续递归 (1)\
放到新的车&amp; 新加一辆车(2)
\end{cases}
\end{eqnarray}
$$
dfs的参数dfs(u,k) u表示当前枚举的猫的个数，k表示当前车的个数</p>
<p>$$
剪枝优化\
(1)k\ge ans &amp; return\
(2)dfs是一棵递归树，尽可能考虑决策少的分支 &amp;\
(3)对于（10）中的（1）可以进行划分，重的猫选择更少，可以优先选择重的猫
$$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n, m;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> w[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> sum[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> ans <span style="color:#555">=</span> N; <span style="color:#09f;font-style:italic">//注意首先就是，每只猫都安排一辆车，此时ans最大
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">dfs</span>(<span style="color:#078;font-weight:bold">int</span> u, <span style="color:#078;font-weight:bold">int</span> k)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 最优性剪枝
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span> (k <span style="color:#555">&gt;=</span> ans) <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (u <span style="color:#555">==</span> n)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ans <span style="color:#555">=</span> k;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> k; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (sum[i] <span style="color:#555">+</span> w[u] <span style="color:#555">&lt;=</span> m) <span style="color:#09f;font-style:italic">// 可行性剪枝
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            sum[i] <span style="color:#555">+=</span> w[u];
</span></span><span style="display:flex;"><span>            dfs(u <span style="color:#555">+</span> <span style="color:#f60">1</span>, k);
</span></span><span style="display:flex;"><span>            sum[i] <span style="color:#555">-=</span> w[u]; <span style="color:#09f;font-style:italic">// 恢复现场
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 新开一辆车
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    sum[k] <span style="color:#555">=</span> w[u];
</span></span><span style="display:flex;"><span>    dfs(u <span style="color:#555">+</span> <span style="color:#f60">1</span>, k <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    sum[k] <span style="color:#555">=</span> <span style="color:#f60">0</span>; <span style="color:#09f;font-style:italic">// 恢复现场
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n <span style="color:#555">&gt;&gt;</span> m;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> ) cin <span style="color:#555">&gt;&gt;</span> w[i];
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 优化搜索顺序
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    sort(w, w <span style="color:#555">+</span> n);
</span></span><span style="display:flex;"><span>    reverse(w, w <span style="color:#555">+</span> n);
</span></span><span style="display:flex;"><span>    dfs(<span style="color:#f60">0</span>, <span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> ans <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="1209-带分数-强化版全排列">1209.带分数（强化版全排列）</h4>
<blockquote>
<p>很有意思的题</p>
<ol>
<li>运用到了dfs的全排列；</li>
<li>将除法运算转化为了乘法运算；</li>
<li>将全排列分成了三个部分进行分析计算；</li>
</ol>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//stl函数的方法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#069;font-weight:bold">do</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> <span style="color:#f60">9</span>; i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> i <span style="color:#555">+</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;</span> <span style="color:#f60">9</span>; j<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> a <span style="color:#555">=</span> calc(<span style="color:#f60">0</span>, i);
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> b <span style="color:#555">=</span> calc(i <span style="color:#555">+</span> <span style="color:#f60">1</span>, j);
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> c <span style="color:#555">=</span> calc(j <span style="color:#555">+</span> <span style="color:#f60">1</span>, <span style="color:#f60">8</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (a <span style="color:#555">==</span> <span style="color:#f60">0</span> <span style="color:#555">||</span> b <span style="color:#555">==</span> <span style="color:#f60">0</span> <span style="color:#555">||</span> c <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (a <span style="color:#555">*</span> c <span style="color:#555">+</span> b <span style="color:#555">==</span> c <span style="color:#555">*</span> target) {
</span></span><span style="display:flex;"><span>          <span style="color:#555">++</span>res;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 调用函数生成全排列
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  } <span style="color:#069;font-weight:bold">while</span> (next_permutation(num, num <span style="color:#555">+</span> <span style="color:#f60">9</span>));
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//全排列升级版
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">110</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> num[N],vis[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> ans,n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">calnum</span>(<span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r){
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> l; i <span style="color:#555">&lt;=</span> r; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        res <span style="color:#555">=</span> res<span style="color:#555">*</span><span style="color:#f60">10</span><span style="color:#555">+</span>num[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">dfs</span>(<span style="color:#078;font-weight:bold">int</span> u){
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//递归出口
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span>(u <span style="color:#555">==</span> <span style="color:#f60">9</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//这里我们应该将原问题分成三个部分
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> <span style="color:#f60">7</span>; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> i <span style="color:#555">+</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;</span> <span style="color:#f60">8</span>; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#078;font-weight:bold">int</span> a <span style="color:#555">=</span> calnum(<span style="color:#f60">0</span>,i);
</span></span><span style="display:flex;"><span>                <span style="color:#078;font-weight:bold">int</span> b <span style="color:#555">=</span> calnum(i<span style="color:#555">+</span><span style="color:#f60">1</span>,j);
</span></span><span style="display:flex;"><span>                <span style="color:#078;font-weight:bold">int</span> c <span style="color:#555">=</span> calnum(j<span style="color:#555">+</span><span style="color:#f60">1</span>,<span style="color:#f60">8</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#09f;font-style:italic">//将除法转化为乘法⭐️
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">if</span>(n<span style="color:#555">*</span>c <span style="color:#555">==</span> a<span style="color:#555">*</span>c<span style="color:#555">+</span>b) ans<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//全排列的递归搜索
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> <span style="color:#f60">9</span>; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>vis[i]){
</span></span><span style="display:flex;"><span>            num[u] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>            vis[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            dfs(u<span style="color:#555">+</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>            num[u] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            vis[i] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ios<span style="color:#555">::</span>sync_with_stdio(<span style="color:#366">false</span>);
</span></span><span style="display:flex;"><span>    cin.tie(<span style="color:#f60">0</span>),cout.tie(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    dfs(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> ans <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="搜索与图论概述">搜索与图论概述</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>graph LR
</span></span><span style="display:flex;"><span>A[最短路问题````] --&gt; B[单源最短路````]
</span></span><span style="display:flex;"><span>A --&gt; C[多源最短路````]
</span></span><span style="display:flex;"><span>B --&gt; D[从一个点到另外一个点````]
</span></span><span style="display:flex;"><span>C --&gt; E[从一个起点到终点```````]
</span></span><span style="display:flex;"><span>D --&gt; F[所有边权值为正数```````] --&gt; G[朴素的Dijkstra算法On2`````````]
</span></span><span style="display:flex;"><span>F --&gt; H[堆优化的Dijkstra算法Omlogn```````````]
</span></span><span style="display:flex;"><span>D --&gt; I[存在一些负权边``````]
</span></span><span style="display:flex;"><span>I --&gt; J[Bellman-Ford算法 Onm``````````]
</span></span><span style="display:flex;"><span>I --&gt; K[SPFA算法 Om-&gt;Onm`````````]
</span></span><span style="display:flex;"><span>E --&gt; M[Floyd算法 On3``````]
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="拓扑排序">拓扑排序</h4>
<blockquote>
<ul>
<li>必须是有向图</li>
<li>是宽搜的扩展</li>
</ul>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> d[N]; <span style="color:#09f;font-style:italic">//存放每个点的入度 ，注意输入时候需要给入度自增
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//邻接表完成算法，头插法可以使用y总的模板，尾插法可以使用 vector&lt;int&gt; Gt[N]; 直接push_back可以在尾部增加结点。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">topsort</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> hh <span style="color:#555">=</span> <span style="color:#f60">0</span>, tt <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;<span style="color:#09f;font-style:italic">//数组模拟队列
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// d[i] 存储点i的入度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>d[i])
</span></span><span style="display:flex;"><span>            q[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> i; <span style="color:#09f;font-style:italic">//存入队列为0的点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (hh <span style="color:#555">&lt;=</span> tt) <span style="color:#09f;font-style:italic">//队列不为空
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> q[hh <span style="color:#555">++</span> ]; <span style="color:#09f;font-style:italic">//获取队头元素，并出队操作
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[t]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i]) <span style="color:#09f;font-style:italic">//第i个单链表往后查找
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i]; 
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">--</span> d[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) <span style="color:#09f;font-style:italic">//如果j的入度也为0了，则也将j入队
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                q[ <span style="color:#555">++</span> tt] <span style="color:#555">=</span> j;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 如果所有点都入队了，说明存在拓扑序列；否则不存在拓扑序列。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> tt <span style="color:#555">==</span> n <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>时刻注意看到DAG就耀想到拓扑排序！！！！</strong> 有向无环图</p>
</blockquote>
<h4 id="3696-构造有向无环图">3696. 构造有向无环图</h4>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/3699/">https://www.acwing.com/problem/content/3699/</a></p>
<p>先看已经有的有向边，如果已经构成了环，那么肯定不能输出一个DAG
如果没有的话，那么后续的无向边只需按top顺序输出即可</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">200010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> h[N],ne[N],e[N],d[N],idx,n,m,t,k,x,y;
</span></span><span style="display:flex;"><span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> anstop;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">Edge</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> a,b;
</span></span><span style="display:flex;"><span>}edge[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> pos[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">add</span>(<span style="color:#078;font-weight:bold">int</span> a,<span style="color:#078;font-weight:bold">int</span> b){
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#555">=</span> b, ne[idx] <span style="color:#555">=</span> h[a], h[a] <span style="color:#555">=</span> idx<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">topsort</span>(){
</span></span><span style="display:flex;"><span>    queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>d[i]) q.push(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(q.size()){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>        q.pop();
</span></span><span style="display:flex;"><span>        anstop.push_back(t);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[t]; <span style="color:#555">~</span>i; i<span style="color:#555">=</span>ne[i]){
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">--</span>d[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) q.push(j);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(anstop.size() <span style="color:#555">==</span> n) <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>t);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(t <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> cnt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>m);
</span></span><span style="display:flex;"><span>        memset(h,<span style="color:#555">-</span><span style="color:#f60">1</span>,<span style="color:#069;font-weight:bold">sizeof</span> h);
</span></span><span style="display:flex;"><span>        memset(d,<span style="color:#f60">0</span>,<span style="color:#069;font-weight:bold">sizeof</span> d);
</span></span><span style="display:flex;"><span>        idx <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        anstop.clear();
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> m; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>,<span style="color:#555">&amp;</span>k,<span style="color:#555">&amp;</span>x,<span style="color:#555">&amp;</span>y);
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>k) edge[cnt <span style="color:#555">++</span>] <span style="color:#555">=</span> {x,y};
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>                add(x,y);
</span></span><span style="display:flex;"><span>                d[y] <span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>topsort()) puts(<span style="color:#c30">&#34;NO&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>            puts(<span style="color:#c30">&#34;YES&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> h[i]; <span style="color:#555">~</span>j; j <span style="color:#555">=</span> ne[j]){
</span></span><span style="display:flex;"><span>                    printf(<span style="color:#c30">&#34;%d %d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,i, e[j]); <span style="color:#09f;font-style:italic">//注意⭐️ i --&gt; e[j]
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) pos[anstop[i]] <span style="color:#555">=</span> i; <span style="color:#09f;font-style:italic">//标记拓扑顺序
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> cnt; i <span style="color:#555">++</span>){ <span style="color:#09f;font-style:italic">//找拓扑顺序
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#078;font-weight:bold">int</span> a <span style="color:#555">=</span> edge[i].a, b <span style="color:#555">=</span> edge[i].b;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span> (pos[a] <span style="color:#555">&gt;</span> pos[b]) swap(a, b);
</span></span><span style="display:flex;"><span>                printf(<span style="color:#c30">&#34;%d %d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>, a, b);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="dijkstra算法">Dijkstra算法</h4>
<h4 id="朴素dijkstra">朴素Dijkstra</h4>
<blockquote>
<p>适合稠密图On2，稠密图适合用邻接矩阵来存储</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> g[N][N];  <span style="color:#09f;font-style:italic">// 存储每条边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> dist[N];  <span style="color:#09f;font-style:italic">// 存储1号点到每个点的最短距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];   <span style="color:#09f;font-style:italic">// 存储每个点的最短路是否已经确定
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 求1号点到n号点的最短路，如果不存在则返回-1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">dijkstra</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    memset(dist, <span style="color:#f60">0x3f</span>, <span style="color:#069;font-weight:bold">sizeof</span> dist);
</span></span><span style="display:flex;"><span>    dist[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">++</span> ) <span style="color:#09f;font-style:italic">//迭代n次
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;     <span style="color:#09f;font-style:italic">// 在还未确定最短路的点中，寻找距离最小的点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span> ) <span style="color:#09f;font-style:italic">//然后遍历一下所有点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[j] <span style="color:#555">&amp;&amp;</span> (t <span style="color:#555">==</span> <span style="color:#555">-</span><span style="color:#f60">1</span> <span style="color:#555">||</span> dist[t] <span style="color:#555">&gt;</span> dist[j])) <span style="color:#09f;font-style:italic">//t还没有遍历或者当前这个t不是最短的
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                t <span style="color:#555">=</span> j; <span style="color:#09f;font-style:italic">//那么就把当前的t更新为j //这一步是为了找还没有遍历的j中，dist[t]的最小值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//if(t == n) break;
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// 用t更新其他点的距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>            dist[j] <span style="color:#555">=</span> min(dist[j], dist[t] <span style="color:#555">+</span> g[t][j]); <span style="color:#09f;font-style:italic">//用1~j的长度更新一下1~t~j的长度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        st[t] <span style="color:#555">=</span> <span style="color:#366">true</span>; <span style="color:#09f;font-style:italic">//标记t已经倍访问了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (dist[n] <span style="color:#555">==</span> <span style="color:#f60">0x3f3f3f3f</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> dist[n];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="堆优化的dijkstra算法">堆优化的Dijkstra算法</h4>
<blockquote>
<p>适合稀疏图，时间复杂度O(mlogn)</p>
<blockquote>
<p>①初始化距离：dis[1] = 0；dist[x] = +∞  //起点为0，其他无穷大
②for i : 0~n
s[N]表示当前已经确定最短距离的点
t &lt;&mdash; 不在s中的距离最近的点    //优化这里的目的是找最小的点&mdash;&gt;采用堆来优化，每次就能获取到最小的值了，时间复杂度到了O(1)
将t加到s里面去，然后用t来更新其他点的距离(判断dist[x] ?&gt; dist[t])  //改为遍历所有的边m
&mdash;-&gt;这里这一步又要去更改堆中的数，修改堆中的数的时间复杂度(Ologn) 故一共mlogn</p>
</blockquote>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, <span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> PII; <span style="color:#09f;font-style:italic">//维护距离和结点编号，故此是个PII存
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;      <span style="color:#09f;font-style:italic">// 点的数量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> h[N], w[N], e[N], ne[N], idx;       <span style="color:#09f;font-style:italic">// 邻接表存储所有边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> dist[N];        <span style="color:#09f;font-style:italic">// 存储所有点到1号点的距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];     <span style="color:#09f;font-style:italic">// 存储每个点的最短距离是否已确定
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 求1号点到n号点的最短距离，如果不存在，则返回-1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">dijkstra</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    memset(dist, <span style="color:#f60">0x3f</span>, <span style="color:#069;font-weight:bold">sizeof</span> dist);
</span></span><span style="display:flex;"><span>    dist[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    priority_queue<span style="color:#555">&lt;</span>PII, vector<span style="color:#555">&lt;</span>PII<span style="color:#555">&gt;</span>, greater<span style="color:#555">&lt;</span>PII<span style="color:#555">&gt;&gt;</span> heap; <span style="color:#09f;font-style:italic">//优先队列默认是大根堆，改为小根堆
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    heap.push({<span style="color:#f60">0</span>, <span style="color:#f60">1</span>});      <span style="color:#09f;font-style:italic">// first存储距离，second存储节点编号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (heap.size())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> heap.top(); <span style="color:#09f;font-style:italic">//每次找到当前距离最小的点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        heap.pop();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> ver <span style="color:#555">=</span> t.second, distance <span style="color:#555">=</span> t.first;
</span></span><span style="display:flex;"><span>		<span style="color:#09f;font-style:italic">//ver表示编号，distance表示距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span> (st[ver]) <span style="color:#069;font-weight:bold">continue</span>;  <span style="color:#09f;font-style:italic">//如果当前点之前已经出来过了（可能是个冗余备份（STL优先队列性质））那就不必处理了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        st[ver] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[ver]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i]; <span style="color:#09f;font-style:italic">//遍历所有边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (dist[j] <span style="color:#555">&gt;</span> distance <span style="color:#555">+</span> w[i]) <span style="color:#09f;font-style:italic">//如果1~j大于1~t~j就把dist[j]更新一下
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            {
</span></span><span style="display:flex;"><span>                dist[j] <span style="color:#555">=</span> distance <span style="color:#555">+</span> w[i];
</span></span><span style="display:flex;"><span>                heap.push({dist[j], j});
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (dist[n] <span style="color:#555">==</span> <span style="color:#f60">0x3f3f3f3f</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> dist[n];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="dijikstra-超级源点问题-单源最短路的组合">Dijikstra （超级源点问题）-单源最短路的组合</h5>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1490/">https://www.acwing.com/problem/content/1490/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span><span style="color:#555">*</span><span style="color:#f60">3</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,m;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> h[N],ne[N],w[N],e[N],st[N],idx;
</span></span><span style="display:flex;"><span>ll dist[N];
</span></span><span style="display:flex;"><span>ll ans[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> shop[N];
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, ll<span style="color:#555">&gt;</span> PII;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">add</span>(<span style="color:#078;font-weight:bold">int</span> a,<span style="color:#078;font-weight:bold">int</span> b,<span style="color:#078;font-weight:bold">int</span> c){
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#555">=</span> b, w[idx] <span style="color:#555">=</span> c, ne[idx] <span style="color:#555">=</span> h[a], h[a] <span style="color:#555">=</span> idx<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">dijikstra</span>(){
</span></span><span style="display:flex;"><span>    memset(dist,<span style="color:#f60">0x3f</span>,<span style="color:#069;font-weight:bold">sizeof</span> dist);
</span></span><span style="display:flex;"><span>    memset(st,<span style="color:#f60">0</span>,<span style="color:#069;font-weight:bold">sizeof</span> st);
</span></span><span style="display:flex;"><span>    dist[<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>; <span style="color:#09f;font-style:italic">//超级源点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    priority_queue<span style="color:#555">&lt;</span>PII, vector<span style="color:#555">&lt;</span>PII<span style="color:#555">&gt;</span>, greater<span style="color:#555">&lt;</span>PII<span style="color:#555">&gt;&gt;</span> heap;
</span></span><span style="display:flex;"><span>    heap.push({<span style="color:#f60">0</span>,<span style="color:#f60">0</span>});
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(heap.size()){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> cur <span style="color:#555">=</span> heap.top();
</span></span><span style="display:flex;"><span>        heap.pop();
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> ver <span style="color:#555">=</span> cur.second;
</span></span><span style="display:flex;"><span>        ll distance <span style="color:#555">=</span> cur.first;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(st[ver]) <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>        st[ver] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[ver]; <span style="color:#555">~</span>i; i <span style="color:#555">=</span> ne[i]){
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(dist[j] <span style="color:#555">&gt;</span> distance <span style="color:#555">+</span> w[i]){
</span></span><span style="display:flex;"><span>                dist[j] <span style="color:#555">=</span> distance <span style="color:#555">+</span> w[i];
</span></span><span style="display:flex;"><span>                ans[j] <span style="color:#555">=</span> min(ans[j], dist[j]);
</span></span><span style="display:flex;"><span>                heap.push({dist[j],j});
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>n,<span style="color:#555">&amp;</span>m);
</span></span><span style="display:flex;"><span>    memset(h,<span style="color:#555">-</span><span style="color:#f60">1</span>,<span style="color:#069;font-weight:bold">sizeof</span> h);
</span></span><span style="display:flex;"><span>    memset(ans,<span style="color:#f60">0x3f</span>,<span style="color:#069;font-weight:bold">sizeof</span> ans);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> m ; i<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> x,y,z;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>,<span style="color:#555">&amp;</span>x,<span style="color:#555">&amp;</span>y,<span style="color:#555">&amp;</span>z);
</span></span><span style="display:flex;"><span>        add(x,y,z),add(y,x,z);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> k;
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>k);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> k; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>shop[i]);
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// ans[shop[i]] = 0;
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">//超级源点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        add(<span style="color:#f60">0</span>,shop[i],<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// dijikstra(shop[i]);
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    dijikstra();
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> p;
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>p);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(p <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> query;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>query);
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// printf(&#34;%lld\n&#34;,ans[query]);
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,dist[query]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="bellman-ford算法">Bellman-Ford算法</h4>
<blockquote>
<p>时间复杂度$O(n*m)$</p>
</blockquote>
<blockquote>
<p>①循环n次  for 1~n   &lt;&mdash;-这里迭代n次就是不超过n条边
每一次的话 循环所有边
for 所有边 a,b,w   a &mdash;w&ndash;&gt; b
存储方式可以是开一个结构体数组 {a,b,w}
dist[b] = min(dist[b], dist[a]+w)   &ndash;&gt;更新过程叫做 松弛操作
遍历完毕后 都可以满足 dist[b] ≤ dist[a] + w</p>
<p>TIP：如果有负权回路的情况下，最短路径是可能不存在的</p>
<blockquote>
<p>迭代完n次，也就是一条路径上有n条边，n+1个点，说明一定存在一个负环  &lt;&mdash;但bellman算法的时间复杂度较高，一般还是得用SPFA来求负环</p>
</blockquote>
</blockquote>
<blockquote>
<p>什么时候只能用Bellman算法？
<strong>有边数限制的情况下</strong>：如，从1号点到n号店的最多经过k条边的最短距离</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n, m;       <span style="color:#09f;font-style:italic">// n表示点数，m表示边数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> dist[N];        <span style="color:#09f;font-style:italic">// dist[x]存储1到x的最短路距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">Edge</span>     <span style="color:#09f;font-style:italic">// 边，a表示出点，b表示入点，w表示边的权重
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> a, b, w;
</span></span><span style="display:flex;"><span>}edges[M];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 求1到n的最短路距离，如果无法从1走到n，则返回-1。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">bellman_ford</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    memset(dist, <span style="color:#f60">0x3f</span>, <span style="color:#069;font-weight:bold">sizeof</span> dist);
</span></span><span style="display:flex;"><span>    dist[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 如果第n次迭代仍然会松弛三角不等式，就说明存在一条长度是n+1的最短路径，由抽屉原理，路径中至少存在两个相同的点，说明图中存在负权回路。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> m; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> a <span style="color:#555">=</span> edges[j].a, b <span style="color:#555">=</span> edges[j].b, w <span style="color:#555">=</span> edges[j].w;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (dist[b] <span style="color:#555">&gt;</span> dist[a] <span style="color:#555">+</span> w)
</span></span><span style="display:flex;"><span>                dist[b] <span style="color:#555">=</span> dist[a] <span style="color:#555">+</span> w;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (dist[n] <span style="color:#555">&gt;</span> <span style="color:#f60">0x3f3f3f3f</span> <span style="color:#555">/</span> <span style="color:#f60">2</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> dist[n];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="spfa算法">SPFA算法</h4>
<blockquote>
<p>必须要求不含有负环</p>
</blockquote>
<blockquote>
<p><strong>队列优化的Bellman-ford算法</strong></p>
<p>1.建立一个队列，最初队列中只含有起点1
2.取出队头节点x，扫描它的所有出边（x,y,z），若dist[y] &gt; dist[x] + z的话，则使用dist[x] + z更新dist[y]。同时，若y不在队列中的话，则把y入队。
3.重复上述的步骤，直到队列为空</p>
<blockquote>
<p>发现：在任意时刻，该算法的队列中都保存着待扩展的节点。每次入队相当于完成一次dist数组的更新操作，使其满足三角形不等式。一个节点可能会入队、出队多次。最终，图中节点收敛到全部满足三角形不等式的形态。</p>
<p><strong>!Tip</strong> <code>优化的方式：这个队列避免了Bellman-ford算法中对不需要扩展的节点的冗余扫描，在随机图上的运行效率为O(km)级别，k是一个较小的常数，但是！在某些特殊构造的图中，该算法可能退化到O(nm)，需谨慎使用！</code></p>
</blockquote>
</blockquote>
<p>[模板](网格状的图更容易卡SPFA到O(nm))</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;      <span style="color:#09f;font-style:italic">// 总点数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> h[N], w[N], e[N], ne[N], idx;       <span style="color:#09f;font-style:italic">// 邻接表存储所有边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> dist[N];        <span style="color:#09f;font-style:italic">// 存储每个点到1号点的最短距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];     <span style="color:#09f;font-style:italic">// 存储每个点是否在队列中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 求1号点到n号点的最短路距离，如果从1号点无法走到n号点则返回-1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">spfa</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    memset(dist, <span style="color:#f60">0x3f</span>, <span style="color:#069;font-weight:bold">sizeof</span> dist);
</span></span><span style="display:flex;"><span>    dist[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span>    q.push(<span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    st[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (q.size())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>        q.pop();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        st[t] <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[t]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (dist[j] <span style="color:#555">&gt;</span> dist[t] <span style="color:#555">+</span> w[i])
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                dist[j] <span style="color:#555">=</span> dist[t] <span style="color:#555">+</span> w[i];
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[j])     <span style="color:#09f;font-style:italic">// 如果队列中已存在j，则不需要将j重复插入
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                {
</span></span><span style="display:flex;"><span>                    q.push(j);
</span></span><span style="display:flex;"><span>                    st[j] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (dist[n] <span style="color:#555">==</span> <span style="color:#f60">0x3f3f3f3f</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> dist[n];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="spfa算法判负环">SPFA算法判负环</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>利用 spfa 算法判断负环有两种方法：
</span></span><span style="display:flex;"><span>- spfa 的 dfs 形式，判断条件是存在一点在一条路径上出现多次。
</span></span><span style="display:flex;"><span>- spfa 的 bfs 形式，判断条件是存在一点入队次数大于总顶点数。
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>设cnt[x]表示从1到x的最短路径包含的边数，cnt[1] = 0。当执行更新dist[y] = dist[x] + z时，同样更新cnt[y] = cnt[x] + 1。此时如果发现cnt[x] ≥ n，则由抽屉原理可以知道，该图中一定存在负环。</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;      <span style="color:#09f;font-style:italic">// 总点数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> h[N], w[N], e[N], ne[N], idx;       <span style="color:#09f;font-style:italic">// 邻接表存储所有边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> dist[N], cnt[N];        <span style="color:#09f;font-style:italic">// dist[x]存储1号点到x的最短距离，cnt[x]存储1到x的最短路中经过的点数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];     <span style="color:#09f;font-style:italic">// 存储每个点是否在队列中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 如果存在负环，则返回true，否则返回false。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">spfa</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 不需要初始化dist数组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// 原理：如果某条最短路径上有n个点（除了自己），那么加上自己之后一共有n+1个点，由抽屉原理一定有两个点相同，所以存在环。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> q;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        q.push(i);
</span></span><span style="display:flex;"><span>        st[i] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (q.size())
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> q.front();
</span></span><span style="display:flex;"><span>        q.pop();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        st[t] <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[t]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (dist[j] <span style="color:#555">&gt;</span> dist[t] <span style="color:#555">+</span> w[i])
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                dist[j] <span style="color:#555">=</span> dist[t] <span style="color:#555">+</span> w[i];
</span></span><span style="display:flex;"><span>                cnt[j] <span style="color:#555">=</span> cnt[t] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span> (cnt[j] <span style="color:#555">&gt;=</span> n) <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;     <span style="color:#09f;font-style:italic">// 如果从1号点到x的最短路中包含至少n个点（不包括自己），则说明存在环
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[j])
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    q.push(j);
</span></span><span style="display:flex;"><span>                    st[j] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="spfa输出路径">SPFA输出路径</h5>
<blockquote>
<p>我们定义一个path[]数组，path[i]表示源点s到i的最短路程中，结点i之前的结点的编号(父结点)，我们在借助结点u对结点v松弛的同时，标记下path[v]=u，记录的工作就完成了。然后递归输出即可。</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">printpath</span>(<span style="color:#078;font-weight:bold">int</span> k){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (path[k]<span style="color:#555">!=</span><span style="color:#f60">0</span>) printpath(path[k]);
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> k <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="floyd算法-多源最短路">Floyd算法（多源最短路）</h4>
<blockquote>
<p>d[i，j] 原理：基于动态规划DP</p>
<blockquote>
<p>for k: 1 ~ n
for i : 1 ~ n
for j : 1 ~ n
d[i,j] = min (d[i,j], d[i,k] + d[k,j])</p>
</blockquote>
<blockquote>
<p><strong>原理：</strong></p>
<p>状态表示：d[k, i, j ]表示<strong>经过若干个编号不超过k的节点</strong>，从i到j的最短长度。该问题可以划分为两个子问题，经过编号不超过k-1的节点从i到j，或者从i先到k再到j。
状态更新：	<strong>D[k,i,j] = min(D[k-1,i,j], D[k-1, i, k] + D[k-1,k,j])</strong>			
最初值为D[0,i,j] = A[i,j] 可以发现<strong>k是阶段，所以必须置于最外层的循环中</strong></p>
<p>与背包问题的状态转移方程类似，k这一维可被忽略，最初，我们可以直接用D保存邻接矩阵，然后执行动态规划的过程。当最外层循环到k时，内层由状态转移：
<strong>D[i,j] = min(D[i,j], D[i,k]+D[k,j])</strong></p>
</blockquote>
<blockquote>
<p>Floyd算法的应用：
传递闭包：Floyd算法可以用于解决传递闭包问题
<code>建立邻接矩阵d[i,j],   d[i,j]=1表示i与j有关系， d[i,j]=0表示i与j没有关系。特别的：d[i,i]=1</code></p>
</blockquote>
</blockquote>
<p>【模板】</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">初始化：</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">==</span> j) d[i][j] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">else</span> d[i][j] <span style="color:#555">=</span> INF;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 算法结束后，d[a][b]表示a到b的最短距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">floyd</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">1</span>; k <span style="color:#555">&lt;=</span> n; k <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>                d[i][j] <span style="color:#555">=</span> min(d[i][j], d[i][k] <span style="color:#555">+</span> d[k][j]);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【FLOYD的妙用】</strong></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">900</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,de[N],st[N];
</span></span><span style="display:flex;"><span>ll ans[N],d[N][N];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//floyd yyds!!!
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%lld&#34;</span>,<span style="color:#555">&amp;</span>d[i][j]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>) scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>de[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> n; k <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>; k <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> v <span style="color:#555">=</span> de[k]; <span style="color:#09f;font-style:italic">//当前添加的点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        st[v] <span style="color:#555">=</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//确认添加点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>                d[i][j] <span style="color:#555">=</span> min(d[i][j],d[i][v] <span style="color:#555">+</span> d[v][j]);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ll sum <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span>(st[i] <span style="color:#555">&amp;&amp;</span> st[j]) sum <span style="color:#555">+=</span> d[i][j];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ans[k] <span style="color:#555">=</span> sum;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>) printf(<span style="color:#c30">&#34;%lld &#34;</span>,ans[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>【Floyd的妙用2】</p>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/3515/">https://www.acwing.com/problem/content/3515/</a></p>
<p>【深刻理解floyd】
floyd动态规划过程：f(k,i,j) 表示从i到j在只经过1~k中的点作为中间点的所有路径的最短距离</p>
<p>在这里可以逆序枚举k点</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span>ll res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">510</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>ll ans[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> d[N][N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> st[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//memset(d,0x3f,sizeof d);
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>d[i][j]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> n; k <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>; k <span style="color:#555">--</span>){<span style="color:#09f;font-style:italic">//逆序枚举删点，当k==1表示只剩下最后一个点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> i <span style="color:#555">+</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>                d[i][j] <span style="color:#555">=</span> d[j][i] <span style="color:#555">=</span> min(d[i][k] <span style="color:#555">+</span> d[k][j], d[i][j]); <span style="color:#09f;font-style:italic">//枚举一半，优化速度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">&gt;=</span> k <span style="color:#555">&amp;&amp;</span> j <span style="color:#555">&gt;=</span> k){ <span style="color:#09f;font-style:italic">//i和j不能在1～k的范围内
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                    res <span style="color:#555">+=</span> <span style="color:#f60">2</span> <span style="color:#555">*</span> d[i][j];
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,res);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="最小生成树">最小生成树</h3>
<h4 id="朴素版prim算法">朴素版Prim算法</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>算法流程与dijikstra算法很像
</span></span><span style="display:flex;"><span>1.初始化距离为正∞ dist[i] &lt;- ∞
</span></span><span style="display:flex;"><span>2. n次循环 1~n
</span></span><span style="display:flex;"><span>	(1)找到集合外距离最近的点 --&gt;赋值给t
</span></span><span style="display:flex;"><span>	(2)用t更新其他点到集合的距离 st[t] = true &lt;-- 与dijikstra算法的区别
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>&gt;注意巧妙处理重边问题
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>时间复杂度 $O(n^2+m)$ n表示点数，m表示边</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;      <span style="color:#09f;font-style:italic">// n表示点数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> g[N][N];        <span style="color:#09f;font-style:italic">// 邻接矩阵，存储所有边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> dist[N];        <span style="color:#09f;font-style:italic">// 存储其他点到当前最小生成树的距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];     <span style="color:#09f;font-style:italic">// 存储每个点是否已经在生成树中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 如果图不连通，则返回INF(值是0x3f3f3f3f), 否则返回最小生成树的树边权重之和
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">prim</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    memset(dist, <span style="color:#f60">0x3f</span>, <span style="color:#069;font-weight:bold">sizeof</span> dist);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span> )<span style="color:#09f;font-style:italic">//循环n次
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span> ) <span style="color:#09f;font-style:italic">//找到集合外距离最近的点并赋值给t
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[j] <span style="color:#555">&amp;&amp;</span> (t <span style="color:#555">==</span> <span style="color:#555">-</span><span style="color:#f60">1</span> <span style="color:#555">||</span> dist[t] <span style="color:#555">&gt;</span> dist[j]))
</span></span><span style="display:flex;"><span>                t <span style="color:#555">=</span> j;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&amp;&amp;</span> dist[t] <span style="color:#555">==</span> INF) <span style="color:#069;font-weight:bold">return</span> INF;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (i) res <span style="color:#555">+=</span> dist[t];
</span></span><span style="display:flex;"><span>        st[t] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">++</span> ) dist[j] <span style="color:#555">=</span> min(dist[j], g[t][j]); <span style="color:#09f;font-style:italic">//用t更新其他点到集合的距离--&gt;与dijikstra的唯一区别
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="朴素版kruscal算法">朴素版Kruscal算法</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1.先将所有边按权重从小到大的顺序进行排序 O(mlogn)
</span></span><span style="display:flex;"><span>2.从小到大枚举每条边w(a,b)=c,如果当前a,b不连通的话，那我们就将这条边加入到集合中
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>时间复杂度 $O(mlogm)$, n表示点数，m表示边</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n, m;       <span style="color:#09f;font-style:italic">// n是点数，m是边数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> p[N];       <span style="color:#09f;font-style:italic">// 并查集的父节点数组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">Edge</span>     <span style="color:#09f;font-style:italic">// 存储边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> a, b, w;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">bool</span> <span style="color:#069;font-weight:bold">operator</span><span style="color:#555">&lt;</span> (<span style="color:#069;font-weight:bold">const</span> Edge <span style="color:#555">&amp;</span>W)<span style="color:#069;font-weight:bold">const</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> w <span style="color:#555">&lt;</span> W.w;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}edges[M];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//只要存储所有边就好了，故此没必要用很复杂的数据结构
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">find</span>(<span style="color:#078;font-weight:bold">int</span> x)     <span style="color:#09f;font-style:italic">// 并查集核心操作
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (p[x] <span style="color:#555">!=</span> x) p[x] <span style="color:#555">=</span> find(p[x]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> p[x];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">kruskal</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    sort(edges, edges <span style="color:#555">+</span> m);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> ) p[i] <span style="color:#555">=</span> i;    <span style="color:#09f;font-style:italic">// 初始化并查集
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>, cnt <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> m; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> a <span style="color:#555">=</span> edges[i].a, b <span style="color:#555">=</span> edges[i].b, w <span style="color:#555">=</span> edges[i].w;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        a <span style="color:#555">=</span> find(a), b <span style="color:#555">=</span> find(b);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (a <span style="color:#555">!=</span> b)     <span style="color:#09f;font-style:italic">// 如果两个连通块不连通，则将这两个连通块合并
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            p[a] <span style="color:#555">=</span> b;
</span></span><span style="display:flex;"><span>            res <span style="color:#555">+=</span> w;
</span></span><span style="display:flex;"><span>            cnt <span style="color:#555">++</span> ; <span style="color:#09f;font-style:italic">//存放的是最小生成树中的边的数目
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (cnt <span style="color:#555">&lt;</span> n <span style="color:#555">-</span> <span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">return</span> INF;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="割点">割点</h3>
<h4 id="tarjan算法">Tarjan算法</h4>
<blockquote>
<p>在无向图中可以用于求 <strong>割点</strong> 或 <strong>桥</strong></p>
<blockquote>
<p><strong>割点</strong>：在某无向连通图中，如果去掉与其相连的边，图就不再连通，则其为割点</p>
</blockquote>
<blockquote>
<p><strong>桥</strong>：在某无向连通图中，如果去掉某一条边则不再连通，则该边为桥</p>
</blockquote>
</blockquote>
<p>Tarjan算法引入几点定义：</p>
<blockquote>
<p>时间戳dfn[x]</p>
</blockquote>
<p>在图的深度优先遍历过程中，按照每个结点第一次被访问的时间顺序，依次给予N个结点1~N的整数标记，该标记就被称为“时间戳”，记为dfn[x];</p>
<blockquote>
<p>搜索树</p>
</blockquote>
<p>在无向连通图中任选一个结点出发进行深度优先遍历，每个点只访问一次。所有发生递归的边(x,y)构成一棵树，我们把它称为“无向连通图的搜索树”。</p>
<blockquote>
<p>追溯值low[x]</p>
</blockquote>
<p>除了时间戳之外，tarjan算法还引入了一个追溯值low[x]。设subtree(x)表示搜索树中以x为根的子树，low[x]定义为以下结点的时间戳的最小值：
1.subtree(x)中的结点
2.通过1条不在搜索树上的边，能够到达subtree(x)的结点</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>追溯值用来表示从当前节点 x 作为搜索树的根节点出发，能够访问到的所有节点中，时间戳最小的值 —— low[x]。那么，我们要限定下什么是“能够访问到的所有节点”？，其需要满足下面的条件之一即可：
</span></span><span style="display:flex;"><span>	·以 x 为根的搜索树的所有节点
</span></span><span style="display:flex;"><span>	·通过一条非搜索树上的边，能够到达搜索树的所有节点
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>&#x1f514;对tarjan算法代码的理解：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(割点)
</span></span><span style="display:flex;"><span>主函数中；
</span></span><span style="display:flex;"><span>进行一次完整的dfs,
</span></span><span style="display:flex;"><span>for(i = 0 ;i &lt; v; i ++)
</span></span><span style="display:flex;"><span>	if(!dfs[i]) dfs(i)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>深度搜索dfs的过程：
</span></span><span style="display:flex;"><span>dfs(x)
</span></span><span style="display:flex;"><span>//进行一下初始化
</span></span><span style="display:flex;"><span>dfn[x] = low[x] = time++; //时间戳和追溯值
</span></span><span style="display:flex;"><span>child = 0;//因为割点的判定中有child数量的计数关系，故此再设一变量记录
</span></span><span style="display:flex;"><span>//扫描一下哪些点和x相邻
</span></span><span style="display:flex;"><span>for(y = 0; y &lt; v ; y ++)
</span></span><span style="display:flex;"><span>	if(g[x][y]) //表示x--&gt;y
</span></span><span style="display:flex;"><span>		if(!dfn[y]) // 表示y还没被访问过--&gt;x是y的父节点
</span></span><span style="display:flex;"><span>			child++;//这个时候才能表示y是x的孩子
</span></span><span style="display:flex;"><span>			fa[y] = x; //y的父节点是x --&gt;表示y一定能访问到x --&gt;不能去更新时间戳
</span></span><span style="display:flex;"><span>			dfs(y);//又以y为起点进行dfs
</span></span><span style="display:flex;"><span>			//判断是否为割点，注意进行割点存储
</span></span><span style="display:flex;"><span>			if(fa[x] == -1 &amp;&amp; child &gt;=2) //case1:x是割点(x是根结点并且有2个或以上的子节点)
</span></span><span style="display:flex;"><span>			if(fa[x] != -1 &amp;&amp; low[y] &gt;= dfn[x]) //case2: x不是根节点，x有子节点
</span></span><span style="display:flex;"><span>			if(low[y] &gt; dfn[x]) //x -&gt; y是桥📍
</span></span><span style="display:flex;"><span>			//注意更新
</span></span><span style="display:flex;"><span>			low[x] = min(low[x],dfn[y]); //如果y可以追溯到比x更早的时间戳祖先，则将low[x]更新📍
</span></span><span style="display:flex;"><span>		else if(y!=fa[x])(y不是x的父节点，y可能是x的祖先结点，如果y是x的父节点，那不能去更新，否则割边求的时候会出问题)
</span></span><span style="display:flex;"><span>			low[x] = min(low[x],dfn[y]); 📍
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>Tarjan判断强连通分量</strong></p>
<!-- > <img src="./wdcs.assets/image-20210723170551495.png" alt="image-20210723170551495" style="zoom:80%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqg7s-0.png" alt="20210723170551495"></p>
<p>DFS搜索时，把每个顶点都放入栈内，然后回溯更新追溯值，直到到达某个点时的追溯值和时间戳相等时如上b(2,2)，出栈直到该点，那么出栈的这些元素便是一个强连通分量(b,c,d)</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Tarjan求取强连通分量的代码思路
</span></span><span style="display:flex;"><span>time //时间戳
</span></span><span style="display:flex;"><span>stack //需要一个栈来存放DFS的元素
</span></span><span style="display:flex;"><span>dfn[] = low[] = {0}初始化为0
</span></span><span style="display:flex;"><span>主函数：
</span></span><span style="display:flex;"><span>	for(x= 0; x &lt; v; x ++)
</span></span><span style="display:flex;"><span>		if(dfn[x] == 0) dfs(x) //进行一次深搜
</span></span><span style="display:flex;"><span>深搜dfs函数：
</span></span><span style="display:flex;"><span>	stack.push(v);
</span></span><span style="display:flex;"><span>	dfn[x] = low[x] = time ++; //初始化时间戳和追溯值
</span></span><span style="display:flex;"><span>	for(y = 0; y &lt; v; y ++)//判断与x相连的点
</span></span><span style="display:flex;"><span>		if(g[x][y]) //如果x能够到达y
</span></span><span style="display:flex;"><span>			if(dfn[y] == 0) //如果y之前没有被访问过，可确定x为y的父节点
</span></span><span style="display:flex;"><span>				dfs(y); //以y为起点再进行一次深搜
</span></span><span style="display:flex;"><span>				low[x] = min(low[x],low[y]) //注意更新一下low
</span></span><span style="display:flex;"><span>			else if(y in stack)//如果y在栈内的话
</span></span><span style="display:flex;"><span>				low[x] = min(low[x],low[y]) //y可能回溯到更早的位置，因此x也要更新一下low
</span></span><span style="display:flex;"><span>	if(dfn[x] == low[x])
</span></span><span style="display:flex;"><span>		stack.pop 直到x --&gt;注意存一下出栈的元素，这些元素便是一个强连通分量
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">/**********************************************
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">    强连通分量 strongly connected component
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">**********************************************/</span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//代码用邻接表存储的图。换邻接表的效率更高
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">tarjan_dfs</span>(<span style="color:#078;font-weight:bold">int</span> x, <span style="color:#078;font-weight:bold">int</span> dfn[], <span style="color:#078;font-weight:bold">int</span> low[], stack<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;&amp;</span> s, <span style="color:#078;font-weight:bold">bool</span> in_stack[])
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">static</span> <span style="color:#078;font-weight:bold">int</span> time <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    dfn[x] <span style="color:#555">=</span> low[x] <span style="color:#555">=</span> time<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>    s.push(x);
</span></span><span style="display:flex;"><span>    in_stack[x] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> y <span style="color:#555">=</span> <span style="color:#f60">0</span>; y <span style="color:#555">&lt;</span> V; y<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(g[x][y])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(<span style="color:#f60">0</span> <span style="color:#555">==</span> dfn[y])
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                tarjan_dfs(y, dfn, low, s, in_stack);
</span></span><span style="display:flex;"><span>                low[x] <span style="color:#555">=</span> min(low[x], low[y]);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span>(in_stack[y])
</span></span><span style="display:flex;"><span>                low[x] <span style="color:#555">=</span> min(low[x], dfn[y]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(dfn[x] <span style="color:#555">==</span> low[x])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> tmp;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            tmp <span style="color:#555">=</span> s.top(); s.pop();
</span></span><span style="display:flex;"><span>            in_stack[tmp] <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>            cout<span style="color:#555">&lt;&lt;</span>tmp<span style="color:#555">&lt;&lt;</span><span style="color:#c30">&#34;-&#34;</span>;
</span></span><span style="display:flex;"><span>        }<span style="color:#069;font-weight:bold">while</span>(tmp <span style="color:#555">!=</span> x);
</span></span><span style="display:flex;"><span>        cout<span style="color:#555">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">scc_tarjan</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> dfn[V] <span style="color:#555">=</span> {<span style="color:#f60">0</span>}, low[V] <span style="color:#555">=</span> {<span style="color:#f60">0</span>};
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">bool</span> in_stack[V] <span style="color:#555">=</span> {<span style="color:#366">false</span>};
</span></span><span style="display:flex;"><span>    stack<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> s;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> V; i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>dfn[i])
</span></span><span style="display:flex;"><span>            tarjan_dfs(i, dfn, low, s, in_stack);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scc_tarjan();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>割点判定法则：</strong></p>
<p>x是割点的两种情况：</p>
<ol>
<li><code>x不是根节点&amp;&amp;x有儿子结点&amp;&amp;low[x的儿子]&gt;=dfn[x]</code></li>
<li><code>x是根节点&amp;&amp;x有&gt;=两个子节点</code></li>
</ol>
<!-- > <img src="./wdcs.assets/image-20210723150554383.png" alt="image-20210723150554383" style="zoom:67%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqgra-0.png" alt="20210723150554383"></p>
</blockquote>
<blockquote>
<p><strong>割边判定法则：</strong></p>
<p>无向边(x,y)是桥，当且仅当搜索树上存在x的一个子节点y，满足：
dfn[x] &lt; low[y]</p>
<p><strong>易知：桥一定是搜索树中的边，并且一个简单环中的边一定都不是桥</strong></p>
<!-- > <img src="./wdcs.assets/image-20210723150747216.png" alt="image-20210723150747216" style="zoom:67%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/mehpsl-0.png" alt="20210723150747216"></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//下面程序可以求出一张无向图中的所有的桥。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//特别注意：因为遍历的是无向图，故此从每个子节点出发都一定能访问到其父节点fa。根据low的计算方法，(x,fa)属于搜索树上的边，且fa不是x的子节点，故不能用fa的时间戳来更新low[x]
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//但是这样如果只记录每个结点的父结点，会出现无法处理重边的情况——当x与fa之间有多条边时，(x,fa)一定不是桥。在这些重复计算的边中，只有一条算是“搜索树上的边”，其他的几条都不算。故有重边时，dfn[fa]能用来更新low[x]
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//巧妙的处理方法是：改为记录“递归进入每个结点的边的编号”。编号可以认为是边在邻接表中存储的下标位置。将每一条无向边看作是双向的有向边。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> SIZE <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> h[SIZE],ver[SIZE<span style="color:#555">*</span><span style="color:#f60">2</span>],next[SIZE<span style="color:#555">*</span><span style="color:#f60">2</span>];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> dfn[SIZE],low[SIZE],n,m,tot,num;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> bridge[SIZE<span style="color:#555">*</span><span style="color:#f60">2</span>];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">add</span>(<span style="color:#078;font-weight:bold">int</span> x, <span style="color:#078;font-weight:bold">int</span> y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ver[<span style="color:#555">++</span>tot] <span style="color:#555">=</span> y;
</span></span><span style="display:flex;"><span>    next[tot] <span style="color:#555">=</span> head[x];
</span></span><span style="display:flex;"><span>    head[x] <span style="color:#555">=</span> tot;
</span></span><span style="display:flex;"><span>}<span style="color:#09f;font-style:italic">//类似于头插法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// x 代表当前搜索树的根节点，in_edge 代表其对应的序号（tot）
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">tarjan</span>(<span style="color:#078;font-weight:bold">int</span> x, <span style="color:#078;font-weight:bold">int</span> in_edge)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 在搜索之前，先初始化节点 x 的时间戳与追溯值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    dfx[x] <span style="color:#555">=</span> low[x] <span style="color:#555">=</span> <span style="color:#555">++</span>num;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 通过 head 变量获取节点 x 的直接连接的第一个相邻节点的序号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// 通过 Next 变量，迭代获取剩下的与节点 x 直接连接的节点的序号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> head[x]; i; i <span style="color:#555">=</span> next[i])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// 此时，i 代表节点 y 的序号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#078;font-weight:bold">int</span> y <span style="color:#555">=</span> ver[i];
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// 如果当前节点 y 没有被访问过
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>dfn[y])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">// 递归搜索以 y 为根的子树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            tarjan(y,i);
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">// 计算 x 的追溯值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            low[x] <span style="color:#555">=</span> min(low[x],low[y]);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">// 桥的判定法则
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span>(low[y] <span style="color:#555">&gt;</span> dfn[x])
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                bridge[i] <span style="color:#555">=</span> bridge[i<span style="color:#555">^</span><span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#366">true</span>;<span style="color:#09f;font-style:italic">// 标记当前节点是否为桥
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">!=</span> (in_edge <span style="color:#555">^</span> <span style="color:#f60">1</span> )) <span style="color:#09f;font-style:italic">// 当前节点被访问过，且 y 不是 x 的“父节点”
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            low[x] <span style="color:#555">=</span> min (low[x],dfn[y]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>(){
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n <span style="color:#555">&gt;&gt;</span> m;
</span></span><span style="display:flex;"><span>    tot <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> m; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> x,y;
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> x <span style="color:#555">&gt;&gt;</span> y;
</span></span><span style="display:flex;"><span>        add(x,y),add(y,x); <span style="color:#09f;font-style:italic">//无向边的连接
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>dfn[i]) tarjan(i,<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;</span> tot; i <span style="color:#555">+=</span> <span style="color:#f60">2</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(bridge[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            cout <span style="color:#555">&lt;&lt;</span> ver[i<span style="color:#555">^</span><span style="color:#f60">1</span>] <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span> <span style="color:#555">&lt;&lt;</span> ver[i] <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="数论">数论</h3>
<h4 id="质数">质数</h4>
<ul>
<li>
<p>试除法求质数</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">is_prime</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">&lt;</span> <span style="color:#f60">2</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> x <span style="color:#555">/</span> i; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//端点判定
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">用</span>i <span style="color:#555">&lt;=</span> x<span style="color:#555">/</span>i <span style="color:#a00;background-color:#faa">就肯定不会溢出</span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//如果是i*i &lt;= x 的话，如果i ~ INT_MAX的时候，i*i容易溢出(溢出就会变成负数)
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>分解质因数—试除法(枚举)</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">divide</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> x <span style="color:#555">/</span> i; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> s <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>) x <span style="color:#555">/=</span> i, s <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>            cout <span style="color:#555">&lt;&lt;</span> i <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#39; &#39;</span> <span style="color:#555">&lt;&lt;</span> s <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>) cout <span style="color:#555">&lt;&lt;</span> x <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#39; &#39;</span> <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h5 id="朴素筛法求素数">朴素筛法求素数</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> primes[N], cnt;     <span style="color:#09f;font-style:italic">// primes[]存储所有素数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];         <span style="color:#09f;font-style:italic">// st[x]存储x是否被筛掉
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">get_primes</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (st[i]) <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>        primes[cnt <span style="color:#555">++</span> ] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> i <span style="color:#555">+</span> i; j <span style="color:#555">&lt;=</span> n; j <span style="color:#555">+=</span> i)
</span></span><span style="display:flex;"><span>            st[j] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="埃氏-eratosthenes-筛法">埃氏（Eratosthenes）筛法</h5>
<!-- > <img src="./wdcs.assets/image-20210720192649097.png" alt="image-20210720192649097" style="zoom:80%;" /> -->
<blockquote>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqp5x-0.png" alt="20210720192649097"></p>
</blockquote>
<p>O(nlognlogn)</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> MAX_N <span style="color:#555">=</span> <span style="color:#f60">10005</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> prime[MAX_N];  <span style="color:#09f;font-style:italic">//第i个素数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> is_prime[MAX_N<span style="color:#555">+</span><span style="color:#f60">1</span>];  <span style="color:#09f;font-style:italic">//is_prime[i]为true时表示i是素数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//返回n以内素数的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">sieve</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">++</span>) is_prime[i] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    is_prime[<span style="color:#f60">0</span>] <span style="color:#555">=</span> is_prime[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(is_prime[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            prime[p<span style="color:#555">++</span>] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">2</span><span style="color:#555">*</span>i; j <span style="color:#555">&lt;=</span> n; j<span style="color:#555">+=</span>i) is_prime[j] <span style="color:#555">=</span> <span style="color:#366">false</span>;  <span style="color:#09f;font-style:italic">//筛去所有素数的倍数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> p;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="线性筛法求素数-欧拉筛-埃筛的优化版">线性筛法求素数(欧拉筛|埃筛的优化版)</h5>
<blockquote>
<p>n只会被最小质因子筛掉</p>
<p>埃筛每次筛都有可能有重复的筛法如，2x3 = 6筛一次，3x2 = 6又筛一次
我们只需要筛它的最小质因子就好了。</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> primes[N], cnt;     <span style="color:#09f;font-style:italic">// primes[]存储所有素数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];         <span style="color:#09f;font-style:italic">// st[x]存储x是否被筛掉
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//这个模板下标是从0开始的
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">get_primes</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[i]) primes[cnt <span style="color:#555">++</span> ] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; primes[j] <span style="color:#555">&lt;</span> n <span style="color:#555">/</span> i; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">//因为primes[j]是从小到大开始的，所以获取的primes[j]一定是最小质因数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#09f;font-style:italic">//最小质因数 pj*i 一定是个合数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>           
</span></span><span style="display:flex;"><span>            st[primes[j] <span style="color:#555">*</span> i] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">%</span> primes[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) <span style="color:#069;font-weight:bold">break</span>; <span style="color:#09f;font-style:italic">//成立时，primes[j]一定是i的最小质因子
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            			<span style="color:#09f;font-style:italic">//不成立时，pj一定小于i的所有质因子，pj也一定是Pj*i的最小质因子
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="约数">约数</h4>
<h5 id="试除法求所有约数">试除法求所有约数</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> get_divisors(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> res;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> x <span style="color:#555">/</span> i; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            res.push_back(i);
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">!=</span> x <span style="color:#555">/</span> i) res.push_back(x <span style="color:#555">/</span> i);<span style="color:#09f;font-style:italic">//如果n是i的平方，可能有两个，这里目的是只存下一个
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    sort(res.begin(), res.end());
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="约数个数与约数之和">约数个数与约数之和</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">如果</span> N <span style="color:#555">=</span> p1<span style="color:#555">^</span>c1 <span style="color:#555">*</span> p2<span style="color:#555">^</span>c2 <span style="color:#555">*</span> ... <span style="color:#555">*</span>pk<span style="color:#555">^</span>ck
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">约数个数：</span> (c1 <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (c2 <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> ... <span style="color:#555">*</span> (ck <span style="color:#555">+</span> <span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">约数之和：</span> (p1<span style="color:#555">^</span><span style="color:#f60">0</span> <span style="color:#555">+</span> p1<span style="color:#555">^</span><span style="color:#f60">1</span> <span style="color:#555">+</span> ... <span style="color:#555">+</span> p1<span style="color:#555">^</span>c1) <span style="color:#555">*</span> ... <span style="color:#555">*</span> (pk<span style="color:#555">^</span><span style="color:#f60">0</span> <span style="color:#555">+</span> pk<span style="color:#555">^</span><span style="color:#f60">1</span> <span style="color:#555">+</span> ... <span style="color:#555">+</span> pk<span style="color:#555">^</span>ck)
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>$N = p_1^{c_1} * p_2^{c_2} * &hellip; *p_k^{c_k}$</p>
</blockquote>
<p>c1,c2,&hellip;.ck 取不同的值的话，就构成了不同的约数。 c1 有 [0<del>c1]种选法&mdash;&gt; 也就是c1+1种选法，每一种选法相乘的话，得到的便是约数的个数
将求约数的个数转化为c1</del>ck的选法的个数[即乘法原理]</p>
<p><strong>欧拉筛筛约数个数</strong></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">inline</span> <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">sieve</span>(<span style="color:#078;font-weight:bold">int</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>;i <span style="color:#555">&lt;=</span> x;i <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span> vis[i]) {
</span></span><span style="display:flex;"><span>        	prim[<span style="color:#555">++</span> len] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>        	d[i] <span style="color:#555">=</span> <span style="color:#f60">2</span>;	<span style="color:#09f;font-style:italic">//质数的约数只有1和它本身
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        	sum[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(reg <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>;j <span style="color:#555">&lt;=</span> len <span style="color:#555">&amp;&amp;</span> i <span style="color:#555">*</span> prim[j] <span style="color:#555">&lt;=</span> x;j <span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>            vis[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">%</span> prim[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>            	sum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> sum[i] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            	d[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> d[i] <span style="color:#555">/</span> (sum[i] <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (sum[i] <span style="color:#555">+</span> <span style="color:#f60">2</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            sum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            d[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> d[i] <span style="color:#555">*</span> <span style="color:#f60">2</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>欧拉筛筛约数和</strong></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">sieve</span> (<span style="color:#078;font-weight:bold">int</span> n){
</span></span><span style="display:flex;"><span>	sum[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>vis[i]){
</span></span><span style="display:flex;"><span>            prim[<span style="color:#555">++</span>cnt] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>            psum[i] <span style="color:#555">=</span> sum[i] <span style="color:#555">=</span> i <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> cnt <span style="color:#555">&amp;&amp;</span> i <span style="color:#555">*</span> prim[j] <span style="color:#555">&lt;=</span> n; j<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            vis[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">%</span> prim[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>                psum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> psum[i] <span style="color:#555">*</span> prim[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>                sum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> sum[i] <span style="color:#555">/</span> psum[i] <span style="color:#555">*</span> psum[i <span style="color:#555">*</span> prim[j]];
</span></span><span style="display:flex;"><span>				<span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            psum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> prim[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            sum[i <span style="color:#555">*</span> prim[j]] <span style="color:#555">=</span> sum[i] <span style="color:#555">*</span> (prim[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="最大公约数-欧几里得算法-辗转相除法">最大公约数|欧几里得算法|辗转相除法</h5>
<blockquote>
<p>(a，b)  ||  (b，a mod b)
左边的最大公约数 = 右边的最大公约数</p>
<p>当b = 0 时候， (a，0)的最大公约数就是a  (0能整除任何数)</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">gcd</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> b <span style="color:#555">?</span> gcd(b, a <span style="color:#555">%</span> b) <span style="color:#555">:</span> a;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">证明：</span>a可以表示成a <span style="color:#555">=</span> kb <span style="color:#555">+</span> r<span style="color:#a00;background-color:#faa">，则</span>r <span style="color:#555">=</span> a mod b
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">假设</span>d是a,b的一个公约数<span style="color:#a00;background-color:#faa">，则有</span>
</span></span><span style="display:flex;"><span>d<span style="color:#555">|</span>a, d<span style="color:#555">|</span>b<span style="color:#a00;background-color:#faa">，而</span>r <span style="color:#555">=</span> a <span style="color:#555">-</span> kb<span style="color:#a00;background-color:#faa">，因此</span>d<span style="color:#555">|</span>r
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">因此</span>d是(b,a mod b)<span style="color:#a00;background-color:#faa">的公约数</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">假设</span>d <span style="color:#a00;background-color:#faa">是</span>(b,a mod b)<span style="color:#a00;background-color:#faa">的公约数，则</span>
</span></span><span style="display:flex;"><span>d <span style="color:#555">|</span> b <span style="color:#a00;background-color:#faa">，</span> d <span style="color:#555">|</span>r <span style="color:#a00;background-color:#faa">，但是</span>a <span style="color:#555">=</span> kb <span style="color:#555">+</span>r
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">因此</span>d也是(a,b)<span style="color:#a00;background-color:#faa">的公约数</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">因此</span>(a,b)<span style="color:#a00;background-color:#faa">和</span>(b,a mod b)<span style="color:#a00;background-color:#faa">的公约数是一样的，其最大公约数也必然相等，得证。</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h5 id="扩展的欧几里得算法">扩展的欧几里得算法</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 求x, y，使得ax + by = gcd(a, b)
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">exgcd</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b, <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">&amp;</span>x, <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">&amp;</span>y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>b)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        x <span style="color:#555">=</span> <span style="color:#f60">1</span>; y <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> a;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> d <span style="color:#555">=</span> exgcd(b, a <span style="color:#555">%</span> b, y, x);
</span></span><span style="display:flex;"><span>    y <span style="color:#555">-=</span> (a<span style="color:#555">/</span>b) <span style="color:#555">*</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> d;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="整除分块">整除分块</h4>
<blockquote>
<p>求：$\sum_{i=1}^n\lfloor\frac{n}{i}\rfloor$</p>
</blockquote>
<p><strong>对于每个$\lfloor\frac{n}{i}\rfloor$​ 相同的区间[l,r]，有r = n/(n/l)</strong></p>
<p>整除分块就是合并所有个数相同的情况的约数，因为个数相同的情况是连续出现的，故此如果具体到求约数的和的问题可以采用等差数列的方法进行求解。</p>
<blockquote>
<p>将时间复杂度降低到$O(\sqrt n)$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">1</span>, r; l <span style="color:#555">&lt;=</span> n; l <span style="color:#555">=</span> r <span style="color:#555">+</span> <span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    r <span style="color:#555">=</span> n <span style="color:#555">/</span> (n <span style="color:#555">/</span> l);
</span></span><span style="display:flex;"><span>    ans <span style="color:#555">+=</span> (r <span style="color:#555">-</span> l <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (n <span style="color:#555">/</span> l);
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//整除分块，合并计算所有约数个数相同的部分，降低时间复杂度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="整除分块-求解1-n约数之和">整除分块，求解1~n约数之和</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>LL <span style="color:#c0f">sum</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    LL s <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(n <span style="color:#555">&lt;=</span> <span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">return</span> n;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">1</span>,r; l <span style="color:#555">&lt;=</span> n; l <span style="color:#555">=</span> r <span style="color:#555">+</span> <span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        r <span style="color:#555">=</span> n<span style="color:#555">/</span>(n<span style="color:#555">/</span>l);
</span></span><span style="display:flex;"><span>        s  <span style="color:#555">+=</span> (r <span style="color:#555">-</span> l <span style="color:#555">+</span> <span style="color:#f60">1</span>) <span style="color:#555">*</span> (n<span style="color:#555">/</span>l) <span style="color:#555">*</span> (l<span style="color:#555">+</span>r) <span style="color:#555">/</span><span style="color:#f60">2</span>; <span style="color:#09f;font-style:italic">// n(a1+an)/2
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">//如果遇到相同的部分，按等差数列进行求和计算
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> s;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="整除规律">整除规律</h4>
<p><strong>被1整除：</strong>
任何数都能被1整除
<strong>被2整除：</strong>
个位上是0、2、4、6、8的都能被2整除
<strong>被3整除：</strong>
每一位数字之和能被3整除，那么就能被3整除
<strong>被4整除：</strong>
若一个整数的末尾两位数能被4整除，则这个数能被4整除。
<strong>被5整除：</strong>
若一个整数的末位是0或5，则这个数能被5整除。
<strong>被6整除：</strong>
若一个整数能被2和3整除，则这个数能被6整除。
<strong>被7整除：（比较麻烦一点）</strong>
若一个整数的个位数字截去，再从余下的数中，减去个位数的2倍，如果差是7的倍数，则原数能被7整除。如果差太大或心算不易看出是否7的倍数，就需要继续上述「截尾、倍大、相减、验差」的过程，直到能清楚判断为止。例如，判断133是否7的倍数的过程如下：13－3×2＝7，所以133是7的倍数；又例如判断6139是否7的倍数的过程如下：613－9×2＝595 ， 59－5×2＝49，所以6139是7的倍数，余类推。
<strong>被8整除：</strong>
若一个整数的未尾三位数能被8整除，则这个数能被8整除。
<strong>被9整除：</strong>
若一个整数的数字和能被9整除，则这个整数能被9整除。
<strong>被10整除：</strong>
若一个整数的末位是0，则这个数能被10整除。
<strong>被11整除：</strong>
若一个整数的奇位数字之和与偶位数字之和的差能被11整除，则这个数能被11整除。11的倍数检验法也可用上述检查7的「割尾法」处理！过程唯一不同的是：倍数不是2而是1！
<strong>被12整除：</strong>
若一个整数能被3和4整除，则这个数能被12整除。
<strong>被13整除：</strong>
若一个整数的个位数字截去，再从余下的数中，加上个位数的4倍，如果差是13的倍数，则原数能被13整除。如果差太大或心算不易看出是否13的倍数，就需要继续上述「截尾、倍大、相加、验差」的过程，直到能清楚判断为止。
<strong>被17整除：</strong>
若一个整数的个位数字截去，再从余下的数中，减去个位数的5倍，如果差是17的倍数，则原数能被17整除。如果差太大或心算不易看出是否17的倍数，就需要继续上述「截尾、倍大、相减、验差」的过程，直到能清楚判断为止。
若一个整数的末三位与3倍的前面的隔出数的差能被17整除，则这个数能被17整除。
<strong>被19整除：</strong>
若一个整数的末三位与7倍的前面的隔出数的差能被19整除，则这个数能被19整除。
若一个整数的个位数字截去，再从余下的数中，加上个位数的2倍，如果差是19的倍数，则原数能被19整除。如果差太大或心算不易看出是否19的倍数，就需要继续上述「截尾、倍大、相加、验差」的过程，直到能清楚判断为止。
<strong>被23整除：</strong>
若一个整数的末四位与前面5倍的隔出数的差能被23(或29)整除，则这个数能被23整除</p>
<h4 id="乘法逆元">乘法逆元</h4>
<p><code>实则倒数的拓展</code></p>
<blockquote>
<p>如果ax≡1 (mod p),且gcd(a,p)=1（a与p互质），则称a关于模p的乘法逆元为x。</p>
</blockquote>
<h5 id="费马小定理">费马小定理</h5>
<p>假如a是一个整数，p是一个质数，那么$a^p-a$​是p的倍数，可以表示为
$a^p≡a~(mod <del>p)$​
如果a不是p的倍数，那么这个定理也可以写成
$a^{p-1}≡1</del>(mod~ p)$​</p>
<blockquote>
<ol>
<li><strong>为何费马小定理可以用来求乘法逆元？</strong></li>
</ol>
<p>$a^{p-1}≡1~(mod ~p)$ 进行​变形</p>
<p>$a*a^{p-2}≡1(mod~p)$
如果a与p互质，那么称a关于模p的乘法逆元为$a^ {p-2}$​</p>
</blockquote>
<blockquote>
<ol start="2">
<li>
<p><strong>乘法逆元有什么用呢？</strong></p>
<blockquote>
<p>可用于求$\frac{a}{b}<del>mod</del>p$</p>
</blockquote>
<p>做题时如果结果过大一般都会让你模一个数，确保结果不是很大，而这个数一般是1e9+7，而且这个数又是个素数，加减乘与模运算的顺序交换不会影响结果，但是除法不行。有的题目要求结果mod一个大质数，<strong>如果原本的结果中有除法，比如除以a,那就可以乘以a的逆元替代</strong>。（除一个数等于乘它的倒数，虽然这里的逆元不完全是倒数，但可以这么理解，毕竟乘法逆元就是倒数的扩展）。</p>
</li>
<li>
<p><strong>为何可以用扩展的欧几里得算法求得逆元？</strong></p>
<blockquote>
<p>我们都知道模就是余数，比如12%5=12-5<em>2=2，18%4=18-4</em>4=2。（/是程序运算中的除）</p>
<p>那么ax≡1 (mod p)即ax-yp=1.把y写成+的形式就是ax+py=1，为方便理解下面我们把p写成b就是ax+by=1。就表示x是a的模b乘法逆元，y是b的模a乘法逆元。然后就可以用扩展欧几里得求了。</p>
</blockquote>
</li>
</ol>
</blockquote>
<h5 id="扩展的欧几里得算法-1">扩展的欧几里得算法</h5>
<blockquote>
<p>这个方法十分容易理解，而且对于单个查找效率似乎也还不错，比后面要介绍的大部分方法都要快(尤其对于 modp比较大的时候)。</p>
<p><strong>而且这个做法还有个好处在于，当 a⊥p （互质），但 p 不是质数的时候也可以使用。</strong></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">Exgcd</span>(ll a, ll b, ll <span style="color:#555">&amp;</span>x, ll <span style="color:#555">&amp;</span>y) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>b) x <span style="color:#555">=</span> <span style="color:#f60">1</span>, y <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span> Exgcd(b, a <span style="color:#555">%</span> b, y, x), y <span style="color:#555">-=</span> a <span style="color:#555">/</span> b <span style="color:#555">*</span> x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>() {
</span></span><span style="display:flex;"><span>    ll x, y;
</span></span><span style="display:flex;"><span>    Exgcd (a, p, x, y);
</span></span><span style="display:flex;"><span>    x <span style="color:#555">=</span> (x <span style="color:#555">%</span> p <span style="color:#555">+</span> p) <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>    printf (<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>, x); <span style="color:#09f;font-style:italic">//x是a在mod p下的逆元
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="快速幂计算">快速幂计算</h5>
<p><code>快速幂计算配合费马小定理</code></p>
<blockquote>
<blockquote>
<p><strong>费马小定理前提：</strong>
若p为质数，a为正整数，且a、p互质。
才有$a^{p-1}\equiv 1 (mod\ p)$​
此时$x = a^{p-2}$​</p>
</blockquote>
<blockquote>
<blockquote>
<p>如果p不为质数，则需要使用欧拉定理，费马小定理不再适用
此时$x = a^{phi(m)-1}$</p>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<p>$a*x≡1~(mod\ p)$
$x ≡ a^{p-2}(mod\ p)$</p>
</blockquote>
<p>故此可以利用快速幂计算$a^{ p-2}(mod~p)$的值便是它的逆元</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ll <span style="color:#c0f">fpm</span>(ll x, ll power, ll mod) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>   x <span style="color:#555">%=</span> mod;
</span></span><span style="display:flex;"><span>   ll ans <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">for</span> (; power; power <span style="color:#555">&gt;&gt;=</span> <span style="color:#f60">1</span>, (x <span style="color:#555">*=</span> x) <span style="color:#555">%=</span> mod)
</span></span><span style="display:flex;"><span>   	<span style="color:#069;font-weight:bold">if</span>(power <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>) (ans <span style="color:#555">*=</span> x) <span style="color:#555">%=</span> mod;
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>() {
</span></span><span style="display:flex;"><span>   ll x <span style="color:#555">=</span> fpm(a, p <span style="color:#555">-</span> <span style="color:#f60">2</span>, p); <span style="color:#09f;font-style:italic">//x为a在mod p意义下的逆元
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>👆以上两种方式只适合用于求解单个逆元</p>
<h5 id="逆元的线性递推公式">逆元的线性递推公式</h5>
<p>如果牵涉到求解一段序列的逆元的情况，则最好使用逆元的线性递推公式</p>
<blockquote>
<p>参考资料：https://www.cnblogs.com/zjp-shadow/p/7773566.html</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>inv[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> p; <span style="color:#555">++</span> i)
</span></span><span style="display:flex;"><span>    inv[i] <span style="color:#555">=</span> (p <span style="color:#555">-</span> p <span style="color:#555">/</span> i) <span style="color:#555">*</span> inv[p <span style="color:#555">%</span> i] <span style="color:#555">%</span> p;
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>逆元的递推式，求证过程：(只需要获得第一个元素便可递推获取后面的逆元)</p>
</blockquote>
<blockquote>
<p>不妨令：
$t = \lfloor\frac{p}{i}\rfloor$​​​​
$k = p%i$​​​​​
则有$p=i<em>t+k$​​​
即$i</em>t+k\equiv0~(mod~p)$​​
移项可得： $i<em>k\equiv-k(mod\ p)$​​
$设i&rsquo;为i对于模p的逆元，k&rsquo;为k对于模p的逆元，两侧分别乘上i&rsquo;k;$​
$i</em>t<em>i&rsquo;<em>k&rsquo;\equiv-k</em>i&rsquo;<em>k&rsquo; (mod\ p)$​
​由于$i</em>i&rsquo;(mod\ p)=1,k</em>k&rsquo;(mod \ p)=1$
故此$t*k&rsquo;\equiv-i&rsquo;(mod \ p)$</p>
<p>若用inv[N]表示逆元，那么上面式子等价于
$t<em>inv[k] \equiv-inv[i](mod\ p)$
带入k和t可得：
$\lfloor\frac{p}{i}\rfloor</em>inv[p%i] \equiv-inv[i] (mod\ p)$</p>
<p>即：$inv[i]=-\lfloor\frac{p}{i}\rfloor<em>inv[p%i]$
将负化正：(为了防止出现负数)
$inv[i] = (p-\lfloor\frac{p}{i}\rfloor</em>inv[p%i]%p)%p$​​</p>
</blockquote>
<p><code>inv[i] = (p - p / i) * inv[p % i] % p;</code> &lt;&mdash;得证，乘法逆元的递推式</p>
<p><strong>(a % b + b) % b &lt;&mdash;-负数取模为正数</strong></p>
<h4 id="关系运算">关系运算</h4>
<blockquote>
<p>$n~=~k*p+r$   (r表示余数) (k表示除数)</p>
<p>👆带余除法定理，是整除理论的基础</p>
</blockquote>
<h5 id="整除运算">整除运算 |</h5>
<blockquote>
<p>任给两个整数 a,b，其中 b ̸= 0，如果 ∃q ∈ Z,s.t. a = bq，那么，我们称 b 整除 a，记作 b | a。 反之，我们称 b 不整除 a，记作 b ∤ a。</p>
<blockquote>
<p>注意：规定a≠0。当b=0时，对于任意a，取k=0，就有0=0*a，即是说0能被任意整数整除。</p>
</blockquote>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">基本性质：</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1</span> c<span style="color:#555">|</span>b, b<span style="color:#555">|</span>a <span style="color:#a00;background-color:#faa">⇔</span> c<span style="color:#555">|</span>a
</span></span><span style="display:flex;"><span><span style="color:#f60">2</span> b<span style="color:#555">|</span>a, c <span style="color:#a00;background-color:#faa"≯</span><span style="color:#555">=</span> <span style="color:#f60">0</span> <span style="color:#a00;background-color:#faa">⇔</span> c<span style="color:#555">*</span>b<span style="color:#555">|</span>c<span style="color:#555">*</span>a
</span></span><span style="display:flex;"><span><span style="color:#f60">3</span> c<span style="color:#555">|</span>a, c<span style="color:#555">|</span>b <span style="color:#a00;background-color:#faa">⇔</span> <span style="color:#a00;background-color:#faa">∀</span>m, n <span style="color:#a00;background-color:#faa">∈</span> Z, c<span style="color:#555">|</span>ma <span style="color:#555">+</span> nb
</span></span><span style="display:flex;"><span><span style="color:#f60">4</span> b<span style="color:#555">|</span>a, a <span style="color:#a00;background-color:#faa"≯</span><span style="color:#555">=</span> <span style="color:#f60">0</span> <span style="color:#a00;background-color:#faa">⇔</span> <span style="color:#555">|</span>b<span style="color:#555">|</span><span style="color:#a00;background-color:#faa">≤</span><span style="color:#555">|</span>a<span style="color:#555">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">5</span> cb<span style="color:#555">|</span>ca <span style="color:#a00;background-color:#faa">⇔</span> b<span style="color:#555">|</span>a
</span></span><span style="display:flex;"><span><span style="color:#f60">6</span> b<span style="color:#555">|</span>a, a <span style="color:#a00;background-color:#faa"≯</span><span style="color:#555">=</span> <span style="color:#f60">0</span> <span style="color:#a00;background-color:#faa">⇔</span> a<span style="color:#555">/</span>b<span style="color:#555">|</span>a
</span></span><span style="display:flex;"><span><span style="color:#f60">7</span> a<span style="color:#555">|</span>b <span style="color:#a00;background-color:#faa">⇔</span> <span style="color:#555">-</span>a<span style="color:#555">|</span>b <span style="color:#a00;background-color:#faa">⇔</span> a<span style="color:#555">|-</span>b <span style="color:#a00;background-color:#faa">⇔</span> <span style="color:#555">|</span>a<span style="color:#555">|||</span>b<span style="color:#555">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">8</span> <span style="color:#a00;background-color:#faa">若</span>a<span style="color:#555">|</span>bc<span style="color:#a00;background-color:#faa">，且</span>a与c互质<span style="color:#a00;background-color:#faa">，则</span>a<span style="color:#555">|</span>b
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">若</span>c<span style="color:#555">|</span>a<span style="color:#a00;background-color:#faa">，</span>c<span style="color:#555">|</span>b<span style="color:#a00;background-color:#faa">，则称</span>c是a<span style="color:#a00;background-color:#faa">，</span>b的公因数<span style="color:#a00;background-color:#faa">。若</span>d是a<span style="color:#a00;background-color:#faa">，</span>b的公因数<span style="color:#a00;background-color:#faa">，</span>d<span style="color:#a00;background-color:#faa">≥</span><span style="color:#f60">0</span><span style="color:#a00;background-color:#faa">，且</span>d可被a<span style="color:#a00;background-color:#faa">，</span>b的任意公因数整除<span style="color:#a00;background-color:#faa">，则</span>d是a<span style="color:#a00;background-color:#faa">，</span>b的最大公因数<span style="color:#a00;background-color:#faa">。若</span>a<span style="color:#a00;background-color:#faa">，</span>b的最大公因数等于1<span style="color:#a00;background-color:#faa">，则称</span>a<span style="color:#a00;background-color:#faa">，</span>b互素<span style="color:#a00;background-color:#faa">，也称互质。</span>
</span></span><span style="display:flex;"><span><span style="color:#555">-------------------------------------------------------------------------</span>
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">累次利用带余除法可以求出</span>a<span style="color:#a00;background-color:#faa">，</span>b的最大公因数<span style="color:#a00;background-color:#faa">，这种方法常称为辗转相除法。又称欧几里得算法。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="取模运算-mod">取模运算 % (MOD)</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>c <span style="color:#555">=</span> a<span style="color:#555">/</span>b;
</span></span><span style="display:flex;"><span>a<span style="color:#555">%</span><span style="color:#99f">b</span>: r <span style="color:#555">=</span> a <span style="color:#555">-</span> c<span style="color:#555">*</span>b;  <span style="color:#555">--&gt;</span> a<span style="color:#555">%</span>b <span style="color:#555">=</span> a<span style="color:#555">-</span>(a<span style="color:#555">|</span>b)<span style="color:#555">*</span>b
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">说明：</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1.</span> <span style="color:#a00;background-color:#faa">同余式：正整数</span>a<span style="color:#a00;background-color:#faa">，</span>b对p取模<span style="color:#a00;background-color:#faa">，它们的余数相同，记做</span> <span style="color:#a00;background-color:#faa">或者</span>a <span style="color:#a00;background-color:#faa">≡</span> b (mod p)<span style="color:#a00;background-color:#faa">。</span> <span style="color:#555">||</span>a<span style="color:#555">%</span>p<span style="color:#555">=</span>b<span style="color:#555">%</span>p
</span></span><span style="display:flex;"><span><span style="color:#f60">2.</span> n <span style="color:#555">%</span> p <span style="color:#a00;background-color:#faa">得到结果的正负由被除数</span>n决定,<span style="color:#a00;background-color:#faa">与</span>p无关<span style="color:#a00;background-color:#faa">。</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">例如：</span><span style="color:#f60">7</span><span style="color:#555">%</span><span style="color:#f60">4</span> <span style="color:#555">=</span> <span style="color:#f60">3</span><span style="color:#a00;background-color:#faa">，</span> <span style="color:#555">-</span><span style="color:#f60">7</span><span style="color:#555">%</span><span style="color:#f60">4</span> <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">3</span><span style="color:#a00;background-color:#faa">，</span> <span style="color:#f60">7</span><span style="color:#555">%-</span><span style="color:#f60">4</span> <span style="color:#555">=</span> <span style="color:#f60">3</span><span style="color:#a00;background-color:#faa">，</span> <span style="color:#555">-</span><span style="color:#f60">7</span><span style="color:#555">%-</span><span style="color:#f60">4</span> <span style="color:#555">=</span> <span style="color:#555">-</span><span style="color:#f60">3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="基本性质">基本性质</h5>
<blockquote>
<ol>
<li>若p|(a-b)，则a≡b (% p)。例如 11 ≡ 4 (% 7)， 18 ≡ 4(% 7)</li>
<li>(a % p)=(b % p)意味a≡b (% p)</li>
<li>对称性：a≡b (% p)等价于b≡a (% p)</li>
<li>传递性：若a≡b (% p)且b≡c (% p) ，则a≡c (% p)</li>
</ol>
</blockquote>
<h5 id="运算法则">运算法则</h5>
<blockquote>
<p>取模四则运算：</p>
<p>① $(a+b)%p = (a%p+b%p)%p$
② $(a-b)%p=(a%p-b%p)%p$
③ $(a<em>b)%p=(a%p</em>b%p)%p$
④ $a^b%p = ((a%p)^p)%p$</p>
<p>结合律：</p>
<p>① $((a+b)%p+c)%p = (a+(b+c)%p)%p$
② $((a<em>b)%p</em>c)%p = (a*(b*c)%p)%p$</p>
<p>交换律:</p>
<p>① $(a+b)%p = (b+a)%p$
② $(a<em>b)%p = (b</em>a)%p$</p>
<p>分配律：</p>
<p>$((a+b)%p<em>c)%p = ((a</em>c)%p + (b*c)%p)%p$</p>
<p>重要定理：</p>
<ul>
<li>
<p>若a≡b (% p)，则对于任意的c，都有(a + c) ≡ (b + c) (%p)；（10）</p>
</li>
<li>
<p>若a≡b (% p)，则对于任意的c，都有(a * c) ≡ (b * c) (%p)；（11）</p>
</li>
<li>
<p>若a≡b (% p)，c≡d (% p)，则 (a + c) ≡ (b + d) (%p)，(a - c) ≡ (b - d) (%p)，</p>
<p>(a * c) ≡ (b * d) (%p)，(a / c) ≡ (b / d) (%p)； （12）</p>
</li>
</ul>
</blockquote>
<h4 id="欧拉函数">欧拉函数</h4>
<blockquote>
<p>欧拉函数：
φ(n)表示1~n之间，与n互质的正整数（包括1），记作φ(n)</p>
<p>$φ(n)=n*(1-1/p1)<em>(1-1/p2)</em>(1-1/p3)*(1-1/p4)……(1-1/pn)$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>证明过程：
</span></span><span style="display:flex;"><span>	思路：容斥原理
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>【模板】</strong></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">phi</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> x <span style="color:#555">/</span> i; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            res <span style="color:#555">=</span> res <span style="color:#555">/</span> i <span style="color:#555">*</span> (i <span style="color:#555">-</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span> (x <span style="color:#555">%</span> i <span style="color:#555">==</span> <span style="color:#f60">0</span>) x <span style="color:#555">/=</span> i;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (x <span style="color:#555">&gt;</span> <span style="color:#f60">1</span>) res <span style="color:#555">=</span> res <span style="color:#555">/</span> x <span style="color:#555">*</span> (x <span style="color:#555">-</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>欧拉函数的一些性质：</p>
<p>(1)当m,n互质时，有phi(m*n) = phi(m)*phi(n)
(2)若i%p==0, 有phi(i*p) = p*phi(i)
(3)对于互质x与p，有$x^{phi(n)}\equiv1(mod\ p)$因此x的逆元为$x^{phi(n)-1}$​​ 这就是欧拉定理
（特别地，当p为质数时，phi（p）=p-1,此时逆元为x^(p-2)，即费马小定理）</p>
<blockquote>
<p>欧拉定理：
如果正整数n和整数a互质，
则有 $a^{\varphi(n)}\equiv1(mod\ n)$
$\varphi(n)是欧拉函数$​​</p>
<blockquote>
<blockquote>
<p>求正整数$3^{83}的最后两位$​
1.法一，对$3^n$进行递推求解，发现规律和周期
2.利用欧拉定理：</p>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqn0f-0.png" alt="20210721152830918"> &laquo; 利用欧拉定理快速求解</p>
</blockquote>
</blockquote>
<blockquote>
<p>利用欧拉定理可以解决的问题类型：</p>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/mehml5-0.png" alt="image-20210721152403140"></p>
</blockquote>
</blockquote>
<p>(4)当n为奇数的时候，phi(2n)=phi(n)
(5)若x与p互质，则p-x也与p互质，因此小于p且与p互质的数之和为phi(x)*x/2
(6)如果正整数n&gt;2,那么$\varphi(n)是偶数$​​
(7)如果n|N,那么$\varphi(n)|\varphi(N)$
(8)对于正整数a,n，有n|$\varphi(a^n-1)$
(9)对于正整数m,n，有$\varphi(mn)=\varphi(m)\varphi(n)\frac{gcd(m,n)}{\varphi(gcd(m,n))}$​
(10)对于正整数n，有$\sum_{d|n}\varphi(d)=n$
(11)对于正整数n，有$\sum_{1≤k≤n,gcd(k,n)=1}\frac{k}{n}=\frac{\varphi(n)}{2}$</p>
</blockquote>
<h5 id="优化-线性筛求欧拉函数">【优化】线性筛求欧拉函数</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> primes[N], cnt;     <span style="color:#09f;font-style:italic">// primes[]存储所有素数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> euler[N];           <span style="color:#09f;font-style:italic">// 存储每个数的欧拉函数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">bool</span> st[N];         <span style="color:#09f;font-style:italic">// st[x]存储x是否被筛掉
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">get_eulers</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    euler[<span style="color:#f60">1</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>st[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            primes[cnt <span style="color:#555">++</span> ] <span style="color:#555">=</span> i;
</span></span><span style="display:flex;"><span>            euler[i] <span style="color:#555">=</span> i <span style="color:#555">-</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; primes[j] <span style="color:#555">&lt;=</span> n <span style="color:#555">/</span> i; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> t <span style="color:#555">=</span> primes[j] <span style="color:#555">*</span> i;
</span></span><span style="display:flex;"><span>            st[t] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">%</span> primes[j] <span style="color:#555">==</span> <span style="color:#f60">0</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                euler[t] <span style="color:#555">=</span> euler[i] <span style="color:#555">*</span> primes[j];
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            euler[t] <span style="color:#555">=</span> euler[i] <span style="color:#555">*</span> (primes[j] <span style="color:#555">-</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="快速幂">快速幂</h4>
<blockquote>
<p>作用：能快速求出$<del>a^k</del>%<del>p</del>$​</p>
</blockquote>
<p>10^9次的数可以在logn的时间复杂度下求出来</p>
<blockquote>
<p>原理：反复平方
预处理出初始值：
$a^k\ mod\ p$
$a^{2^0} mod \ p$
$a^{2^1} mod \ p$
$a^{2^2} mod \ p$
$a^{2^{log_k}} mod \ p$</p>
<p>做法就是想办法将后面的$a^k$想办法用前面初始化的值进行替代求解</p>
</blockquote>
<p>【模板】</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">求</span> m<span style="color:#555">^</span>k mod p<span style="color:#a00;background-color:#faa">，时间复杂度</span> O(logk)<span style="color:#a00;background-color:#faa">。</span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> qmi(<span style="color:#078;font-weight:bold">int</span> m, <span style="color:#078;font-weight:bold">int</span> k, <span style="color:#078;font-weight:bold">int</span> p)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">1</span> <span style="color:#555">%</span> p, t <span style="color:#555">=</span> m;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (k)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (k<span style="color:#555">&amp;</span><span style="color:#f60">1</span>) res <span style="color:#555">=</span> res <span style="color:#555">*</span> t <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        t <span style="color:#555">=</span> t <span style="color:#555">*</span> t <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        k <span style="color:#555">&gt;&gt;=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="快速乘">快速乘</h4>
<blockquote>
<p>基本原理：</p>
<p>用来求两个大数的积取模（a<em>b%c）时我们会用到快速乘取模，其时间复杂度为O(logN).</em>
<em>我们知道当两个大数相乘的时候会爆long long，快速乘其实就是来防止有两个较大的数相乘而直接乘爆, 所以用快速乘, 其原理就是
利用乘法分配律将a</em>b转化为多个式子相加的形式求解，当然这里的乘法分配律是将b（后面那个数）转化为二进制形式计算。</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>ll <span style="color:#c0f">mul</span>(ll a, ll b, ll mod) <span style="color:#09f;font-style:italic">//快速乘
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    ll r <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(b)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(b <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>) r <span style="color:#555">=</span> (r<span style="color:#555">+</span>a) <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>        a <span style="color:#555">=</span> (a <span style="color:#555">+</span> a) <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>        b <span style="color:#555">&gt;&gt;=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> r <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="扩展的欧几里得算法-2">扩展的欧几里得算法</h4>
<h5 id="裴蜀定理">裴蜀定理</h5>
<blockquote>
<p>对于任意正整数a,b，一定存在整数x,y，使得ax+by=c (c是gcd(a,b)的倍数)</p>
</blockquote>
<p>【扩展欧几里得模板】</p>
<blockquote>
<p>当b == 0时；</p>
<p>找一组解使得 ax+by=gcd(a,b)
即就是 ax + 0*y = gcd(a,0) = a;
显然 x = 1, y = 0 符合要求</p>
<p>当b != 0 时；</p>
<p>用d存储一下此时的结果
b*y+(a mod b)*x = d;
a mod b = a - $\lfloor\frac{a}{b}\rfloor$ * b;
故此 b<em>y + (a - $\lfloor\frac{a}{b}\rfloor$​ )</em> b = d;</p>
<p>整理可得： $ax+b*(y-\lfloor\frac{a}{b}\rfloor*x) = d$
x 未发生改变
y = y - (a/b)*x</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 求x, y，使得ax + by = gcd(a, b)
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">exgcd</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b, <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">&amp;</span>x, <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">&amp;</span>y)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>b)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        x <span style="color:#555">=</span> <span style="color:#f60">1</span>; y <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> a;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> d <span style="color:#555">=</span> exgcd(b, a <span style="color:#555">%</span> b, y, x);
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//递归结束的时候就会已经得到一组x,y,使其ax+by=d
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    y <span style="color:#555">-=</span> (a<span style="color:#555">/</span>b) <span style="color:#555">*</span> x; <span style="color:#09f;font-style:italic">// &lt;--y发生了改变
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> d;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="一元多项式-秦九韶算法">一元多项式——秦九韶算法</h5>
<blockquote>
<p>对于：</p>
<p>$f(x) = a_nx^n+a_{n-1}x^{n-1}+&hellip;+a_1x+a_0$</p>
<p>可以改写成如下形式：</p>
<p>$f(x)$
$=a_nx^n+a_{n-1}x^{n-1}+&hellip;+a_1x+a_0$
$=(a_nx^{n-1}+a_{n-1}x^{n-2}+&hellip;+a_2x+a_1)x+a_0$​
$.$
$.$
$=(&hellip;((a_nx+a_{n-1})x+a_{n-2})x+&hellip;+a_1)x+a_0$​</p>
</blockquote>
<p>//算法实现：来自百度百科</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>cin <span style="color:#555">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">double</span> <span style="color:#555">*</span>a <span style="color:#555">=</span> <span style="color:#069;font-weight:bold">new</span> <span style="color:#078;font-weight:bold">double</span>[n<span style="color:#555">+</span><span style="color:#f60">1</span>];<span style="color:#09f;font-style:italic">//n次多项式申请n+1大小的数组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> n; i <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>; i <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> a[i];<span style="color:#09f;font-style:italic">//读入各项系数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">double</span> x0,ans<span style="color:#555">=</span>a[n];
</span></span><span style="display:flex;"><span>cin <span style="color:#555">&gt;&gt;</span> x0;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> n<span style="color:#555">-</span><span style="color:#f60">1</span>;i <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>;i <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    ans <span style="color:#555">=</span> ans<span style="color:#555">*</span>x0 <span style="color:#555">+</span> a[i];<span style="color:#09f;font-style:italic">//最高次项开始，往外展开
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>//个人整理</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//秦九韶算法计算这个多项式的值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> p <span style="color:#555">=</span> <span style="color:#f60">1e9</span><span style="color:#555">+</span><span style="color:#f60">7</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">calc</span>(ll x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    sum<span style="color:#555">=</span><span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(ll i<span style="color:#555">=</span>n;i<span style="color:#555">&gt;=</span><span style="color:#f60">1</span>;i<span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        sum<span style="color:#555">=</span>((A[i]<span style="color:#555">+</span>sum)<span style="color:#555">*</span>x)<span style="color:#555">%</span>p;<span style="color:#09f;font-style:italic">//这里从最高位开始进行秦九韶计算
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">//这里套用秦九韶算法求多项式的值 注意A[0]并不需要乘x！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    sum<span style="color:#555">=</span>(sum<span style="color:#555">+</span>A[<span style="color:#f60">0</span>])<span style="color:#555">%</span>p;<span style="color:#09f;font-style:italic">//这里再算上A[0]
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#555">!</span>sum;<span style="color:#09f;font-style:italic">//如果答案是0说明x值为该多项式的解，返回1(true) 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="组合计数">组合计数</h4>
<blockquote>
<p>$C_n^m = \frac{m!}{n!*(m-n)!}$​</p>
<p>组合数的一些性质</p>
<p>（1）组合数的递推式:$C_a^b=C_{a-1}^b+C_{a-1}^{b-1}$​
（2）$C_{m+r+1}^r=\sum_{i=0}^rC_{m+i}^i$​​
（3）$C_m^n<em>C_n^r=C_m^r</em>C_{m-r}^{n-r }$​
（4）$\sum_{i=0}^mC_m^i=2^m$​
（5）$C_m^0-C_m^1+C_m^2-&hellip;±C_m^m=0$
（6）$C_m^0+C_m^2+C_m^4&hellip;=C_m^1+C_m^3+C_m^5+&hellip;=2^{m-1}$​
（7）$C_{m+n}^r=C_m^0<em>C_n^r+C_m^1</em>C_n^{r-1}+&hellip;+C_m^r<em>C_n^0$​
（8）$n</em>C_m^n=m<em>C_{m-1}^{n-1}$
（9）$\sum_{i=1}^nC_n^i</em>i=n<em>2^{n-1}$
（10）$\sum_{i=1}^nC_n^i</em>i^2=n*(n+1)*2^{n-2}$
（11）$\sum_{i=0}^n(C_n^i)^2=C_{2n}^n$</p>
</blockquote>
<h5 id="递归法求组合数">递归法求组合数</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// c[a][b] 表示从a个苹果中选b个的方案数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> N; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;=</span> i; j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>j) c[i][j] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span> c[i][j] <span style="color:#555">=</span> (c[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j] <span style="color:#555">+</span> c[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j <span style="color:#555">-</span> <span style="color:#f60">1</span>]) <span style="color:#555">%</span> mod;
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="通过预处理逆元的方式求组合数">通过预处理逆元的方式求组合数</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">首先预处理出所有阶乘取模的余数</span>fact[N]<span style="color:#a00;background-color:#faa">，以及所有阶乘取模的逆元</span>infact[N]
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">如果取模的数是质数，可以用费马小定理求逆元</span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> qmi(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> k, <span style="color:#078;font-weight:bold">int</span> p)    <span style="color:#09f;font-style:italic">// 快速幂模板
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (k)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (k <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>) res <span style="color:#555">=</span> (LL)res <span style="color:#555">*</span> a <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        a <span style="color:#555">=</span> (LL)a <span style="color:#555">*</span> a <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        k <span style="color:#555">&gt;&gt;=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 预处理阶乘的余数和阶乘逆元的余数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>fact[<span style="color:#f60">0</span>] <span style="color:#555">=</span> infact[<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> N; i <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    fact[i] <span style="color:#555">=</span> (LL)fact[i <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">*</span> i <span style="color:#555">%</span> mod;
</span></span><span style="display:flex;"><span>    infact[i] <span style="color:#555">=</span> (LL)infact[i <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">*</span> qmi(i, mod <span style="color:#555">-</span> <span style="color:#f60">2</span>, mod) <span style="color:#555">%</span> mod; <span style="color:#09f;font-style:italic">//逆元
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="杨辉三角形">杨辉三角形</h5>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>            <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f60">1</span>   <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f60">1</span>   <span style="color:#f60">2</span>   <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f60">1</span>   <span style="color:#f60">3</span>   <span style="color:#f60">3</span>   <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f60">1</span>   <span style="color:#f60">4</span>   <span style="color:#f60">6</span>   <span style="color:#f60">4</span>   <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f60">1</span>   <span style="color:#f60">5</span>   <span style="color:#f60">10</span> <span style="color:#f60">10</span>   <span style="color:#f60">5</span>   <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">1</span>   <span style="color:#f60">6</span>  <span style="color:#f60">15</span>  <span style="color:#f60">20</span>  <span style="color:#f60">15</span>   <span style="color:#f60">6</span>   <span style="color:#f60">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>观察该杨辉三角形我们可以发现，其中任何一个数都是某个组合数：
$n = C_n^1 = C_n^{n-1}$</p>
<p>还可以知道1的多种表示形式：$1 = C_n^0=C_n^n$</p>
<p>故此我们可以把x写成下面的形式：
$x = \sum_{i=1}^{k-1}1+(x-k+1)$​
$= \sum_{i=1}^{k-1}C_i^0+C_{x-k+1}^1$​​</p>
<p>这样便可以验证构造的k个组合数都满足下标限制且两两不同</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//杨辉三角形与组合数的关系
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#a00;background-color:#faa">解决问题：用动态规划求从</span>n个元素中选出m个元素的所有组合个数
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">设</span>f[i][j]<span style="color:#a00;background-color:#faa">为已在</span>i个元素中抽取j个元素<span style="color:#a00;background-color:#faa">，对于上一步的描述，有可能是：</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">·这一步没有抽取元素</span>,<span style="color:#a00;background-color:#faa">之前已经抽了</span>j个元素<span style="color:#a00;background-color:#faa">：</span>f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j];
</span></span><span style="display:flex;"><span>	<span style="color:#a00;background-color:#faa">·这一步抽取了一个元素，之前已经抽了</span>j<span style="color:#555">-</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">个元素：</span>f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">将这两种情况加起来便是</span>f[i][j]<span style="color:#a00;background-color:#faa">的结果，</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a00;background-color:#faa">由此得出式子：</span>f[i][j]<span style="color:#555">=</span>f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j]<span style="color:#555">+</span>f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#555">&gt;</span> <span style="color:#a00;background-color:#faa">边界条件：</span>f[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>				  f[i][i] <span style="color:#555">=</span> <span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//杨辉三角形中第i行第j列的数字正是C_i^j的结果！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//通过动态规划，将组合数与杨辉三角联系起来
</span></span></span></code></pre></td></tr></table>
</div>
</div><h5 id="卢卡斯定理">卢卡斯定理</h5>
<blockquote>
<p>$C_m^n\equiv C_{m<del>mod <del>p}^{n</del>mod <del>p}*C_{\lfloor\frac{m}{p}\rfloor}^{\lfloor\frac{n}{p}\rfloor}</del>(mod</del>p)$​
$C_m^n\equiv\prod_{i=0}^kC_{m_i}^{n_i}$​</p>
<blockquote>
<p>一般都可以使用预处理逆元的方式预处理求出组合数</p>
<p>但如果p比m小的话，就不能保证n和m-n的逆元存在了，它们可能是p的倍数</p>
</blockquote>
<p>规定：当M &lt; N时，$C_m^n=0$</p>
<p><strong>要求：p必须为质数</strong></p>
</blockquote>
<p>【模板】</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">若</span>p是质数<span style="color:#a00;background-color:#faa">，则对于任意整数</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;=</span> m <span style="color:#555">&lt;=</span> n<span style="color:#a00;background-color:#faa">，有：</span>
</span></span><span style="display:flex;"><span>    C(n, m) <span style="color:#555">=</span> C(n <span style="color:#555">%</span> p, m <span style="color:#555">%</span> p) <span style="color:#555">*</span> C(n <span style="color:#555">/</span> p, m <span style="color:#555">/</span> p) (mod p)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> qmi(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> k, <span style="color:#078;font-weight:bold">int</span> p)  <span style="color:#09f;font-style:italic">// 快速幂模板
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">1</span> <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (k)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (k <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>) res <span style="color:#555">=</span> (LL)res <span style="color:#555">*</span> a <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        a <span style="color:#555">=</span> (LL)a <span style="color:#555">*</span> a <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        k <span style="color:#555">&gt;&gt;=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">C</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b, <span style="color:#078;font-weight:bold">int</span> p)  <span style="color:#09f;font-style:italic">// 通过定理求组合数C(a, b)
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (a <span style="color:#555">&lt;</span> b) <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LL x <span style="color:#555">=</span> <span style="color:#f60">1</span>, y <span style="color:#555">=</span> <span style="color:#f60">1</span>;  <span style="color:#09f;font-style:italic">// x是分子，y是分母
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> a, j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> b; i <span style="color:#555">--</span>, j <span style="color:#555">++</span> )
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        x <span style="color:#555">=</span> (LL)x <span style="color:#555">*</span> i <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>        y <span style="color:#555">=</span> (LL) y <span style="color:#555">*</span> j <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> x <span style="color:#555">*</span> (LL)qmi(y, p <span style="color:#555">-</span> <span style="color:#f60">2</span>, p) <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lucas</span>(LL a, LL b, <span style="color:#078;font-weight:bold">int</span> p)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (a <span style="color:#555">&lt;</span> p <span style="color:#555">&amp;&amp;</span> b <span style="color:#555">&lt;</span> p) <span style="color:#069;font-weight:bold">return</span> C(a, b, p);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> (LL)C(a <span style="color:#555">%</span> p, b <span style="color:#555">%</span> p, p) <span style="color:#555">*</span> lucas(a <span style="color:#555">/</span> p, b <span style="color:#555">/</span> p, p) <span style="color:#555">%</span> p;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分治">分治</h3>
<blockquote>
<p><strong><u>分治算法简介：</u></strong></p>
<p>在计算机科学中，分治法是一种很重要的算法。字面上的解释是“分而治之”，就是把一个复杂的问题分成两个或更多的相同或相似的子问题，再把子问题分成更小的子问题……直到最后子问题可以简单的直接求解，原问题的解即子问题的解的合并。这个技巧是很多高效算法的基础，如排序算法(快速排序，归并排序)，傅立叶变换(快速傅立叶变换)……</p>
</blockquote>
<p>分治策略是：对于一个规模为n的问题，若该问题可以容易地解决（比如说规模n较小）则直接解决，否则将其分解为k个规模较小的子问题，这些子问题互相独立且与原问题形式相同，递归地解这些子问题，然后将各子问题的解合并得到原问题的解。这种算法设计策略叫做分治法。</p>
<blockquote>
<p><u><strong>分治法所适用的情况</strong></u></p>
<p>分治法所能解决的问题一般具有以下几个特征：</p>
<pre><code>1) 该问题的规模**缩小到一定的程度**就可以容易地解决

2) 该问题可以**分解为若干个规模较小的相同问题**，即该问题**具有最优子结构性质**。

3) 利用该问题分解出的子问题的解**可以合并为该问题的解**；

4) 该问题所分解出的**各个子问题是相互独立的**，即**子问题之间不包含公共的子子问题**。
</code></pre>
<blockquote>
<blockquote>
<p>第一条特征是绝大多数问题都可以满足的，因为问题的计算复杂性一般是随着问题规模的增加而增加；</p>
<p><strong>第二条特征是应用分治法的前提</strong>它也是大多数问题可以满足的，此特征反映了递归思想的应用；、</p>
<p><strong>第三条特征是关键，能否利用分治法完全取决于问题是否具有第三条特征</strong>，如果<strong>具备了第一条和第二条特征，而不具备第三条特征，则可以考虑用贪心法或动态规划法</strong>。</p>
<p><strong>第四条特征涉及到分治法的效率</strong>，如果各子问题是不独立的则分治法要做许多不必要的工作，重复地解公共的子问题，此时虽然可用分治法，但<strong>一般用动态规划法较好</strong>。</p>
</blockquote>
</blockquote>
</blockquote>
<p>分治算法：
· 问题的规模小到一定程度可以直接求解
· 问题可以分解为若干个相同的子问题
· 利用子问题的解可以组合成原问题的解
· 各子问题之间是相互独立的</p>
<p><strong><u>分治法的基本步骤</u></strong></p>
<blockquote>
<p>分治法在每一层递归上都有三个步骤：</p>
<p>step1 分解：将原问题分解为若干个规模较小，相互独立，与原问题形式相同的子问题；</p>
<p>step2 解决：若子问题规模较小而容易被解决则直接解，否则递归地解各个子问题</p>
<p>step3 合并：将各个子问题的解合并为原问题的解。</p>
</blockquote>
<blockquote>
<p>普通分治的典型例题：</p>
<ol>
<li>
<p><strong>归并排序的模板过程</strong> //实际上左右两边已经有序了</p>
<p>归并排序的主要思想：先分治再合并，递归结束条件是分到每次只剩下一个元素(也就l == r)</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1e6</span><span style="color:#555">+</span><span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> q[N],tmp[N];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">merge_sort</span>(<span style="color:#078;font-weight:bold">int</span> q[], <span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (l<span style="color:#555">&gt;=</span>r) <span style="color:#069;font-weight:bold">return</span>; <span style="color:#09f;font-style:italic">//当区间里面的个数是一个或者没有的话则退出
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//当归并中的元素只有一个的话，那肯定是有序的，可以直接纳入合并的里面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//否则的话，就运行下面的程序
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l<span style="color:#555">+</span>r <span style="color:#555">&gt;&gt;</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    merge_sort(q,l,mid);
</span></span><span style="display:flex;"><span>    merge_sort(q,mid<span style="color:#555">+</span><span style="color:#f60">1</span>,r);  <span style="color:#09f;font-style:italic">//递归处理左右两边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//最后一步是将两个有序序列合并
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">0</span>, i <span style="color:#555">=</span> l, j <span style="color:#555">=</span> mid <span style="color:#555">+</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//k表示已经归并排序的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//归并排序需要另外开一个数组来储存数据temp
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&lt;=</span> mid <span style="color:#555">&amp;&amp;</span> j<span style="color:#555">&lt;=</span>r)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (q[i] <span style="color:#555">&lt;=</span> q[j]) tmp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[i<span style="color:#555">++</span>];
</span></span><span style="display:flex;"><span>    	<span style="color:#069;font-weight:bold">else</span> temp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[j<span style="color:#555">++</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (i <span style="color:#555">&lt;=</span> mid) tmp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[i<span style="color:#555">++</span>]; <span style="color:#09f;font-style:italic">//如果左边还没有归并完，则直接把左边部分的数移动到原来数组后面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span> (j <span style="color:#555">&lt;=</span> r) tmp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[j<span style="color:#555">++</span>];  <span style="color:#09f;font-style:italic">//如果右边还没有归并完，则直接把右边部分的数据移动到原来数组后面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (i <span style="color:#555">=</span> l,j <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;=</span> r;i <span style="color:#555">++</span>,j <span style="color:#555">++</span>) q[i] <span style="color:#555">=</span> tmp[j]; <span style="color:#09f;font-style:italic">//最后需要把处理后的数据返回到原来的数组内
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>} 
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>快速排序</strong></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">quicksort</span>(<span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//如果最后，分治到只有一个元素，那肯定是有序的，无需操作直接返回即可
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span>(l <span style="color:#555">&gt;=</span> r) <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//否则，该序列仍然无序，则应该进行如下操作才行
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//将问题分解成小问题
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//处理一趟快速排序的过程
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    LL x <span style="color:#555">=</span> a[l <span style="color:#555">+</span> r <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> l<span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> r<span style="color:#555">+</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i<span style="color:#555">&lt;</span>j)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">do</span> i <span style="color:#555">++</span>; <span style="color:#069;font-weight:bold">while</span>(a[i] <span style="color:#555">&lt;</span> x);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">do</span> j <span style="color:#555">--</span>; <span style="color:#069;font-weight:bold">while</span>(a[j] <span style="color:#555">&gt;</span> x);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i <span style="color:#555">&lt;</span> j ) swap(a[i],a[j]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//递归处理左右两边，进行多趟快速排序
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    quicksort(l, j);
</span></span><span style="display:flex;"><span>    quicksort(j<span style="color:#555">+</span><span style="color:#f60">1</span>, r);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p><strong>求最大子段和</strong>  <a href="https://www.luogu.com.cn/problem/P1115">https://www.luogu.com.cn/problem/P1115</a></p>
</li>
<li>
<p><strong>逆序对个数</strong> <a href="https://www.luogu.com.cn/problem/P1908">https://www.luogu.com.cn/problem/P1908</a></p>
</li>
</ol>
</blockquote>
<h3 id="归并">归并</h3>
<h4 id="归并排序">归并排序</h4>
<p>主要思想：分治</p>
<blockquote>
<p>1.以整个数组的中间部分来分，分成左右两部分  //下标的中间位置</p>
<p>2.分成左右两部分   //先递归两边  //左右两边变成两个有序的数组</p>
<p>3.将两个有序的数组合并成一个有序的数组 //合二为一</p>
<p><strong>先分治、再合并</strong></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">1e6</span><span style="color:#555">+</span><span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> q[N],tmp[N];
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">merge_sort</span>(<span style="color:#078;font-weight:bold">int</span> q[], <span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (l<span style="color:#555">&gt;=</span>r) <span style="color:#069;font-weight:bold">return</span>; <span style="color:#09f;font-style:italic">//当区间里面的个数是一个或者没有的话则退出
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//当归并中的元素只有一个的话，那肯定是有序的，可以直接纳入合并的里面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//否则的话，就运行下面的程序
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> l<span style="color:#555">+</span>r <span style="color:#555">&gt;&gt;</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    merge_sort(q,l,mid);
</span></span><span style="display:flex;"><span>    merge_sort(q,mid<span style="color:#555">+</span><span style="color:#f60">1</span>,r);  <span style="color:#09f;font-style:italic">//递归处理左右两边
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//最后一步是将两个有序序列合并
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">0</span>, i <span style="color:#555">=</span> l, j <span style="color:#555">=</span> mid <span style="color:#555">+</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//k表示已经归并排序的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//归并排序需要另外开一个数组来储存数据temp
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&lt;=</span> mid <span style="color:#555">&amp;&amp;</span> j<span style="color:#555">&lt;=</span>r)
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (q[i] <span style="color:#555">&lt;=</span> q[j]) tmp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[i<span style="color:#555">++</span>];
</span></span><span style="display:flex;"><span>    	<span style="color:#069;font-weight:bold">else</span> temp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[j<span style="color:#555">++</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (i <span style="color:#555">&lt;=</span> mid) tmp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[i<span style="color:#555">++</span>]; <span style="color:#09f;font-style:italic">//如果左边还没有归并完，则直接把左边部分的数移动到原来数组后面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span> (j <span style="color:#555">&lt;=</span> r) tmp[k<span style="color:#555">++</span>] <span style="color:#555">=</span> q[j<span style="color:#555">++</span>];  <span style="color:#09f;font-style:italic">//如果右边还没有归并完，则直接把右边部分的数据移动到原来数组后面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (i <span style="color:#555">=</span> l,j <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;=</span> r;i <span style="color:#555">++</span>,j <span style="color:#555">++</span>) q[i] <span style="color:#555">=</span> tmp[j]; <span style="color:#09f;font-style:italic">//最后需要把处理后的数据返回到原来的数组内
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>} 
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>注：归并排序是稳定的排序算法</code></p>
<h5 id="多路归并">多路归并</h5>
<blockquote>
<p>重在思考方式</p>
</blockquote>
<blockquote>
<p>经典题目：序列
给定 m 个序列，每个包含 n 个非负整数。</p>
<p>现在我们可以从每个序列中选择一个数字以形成具有 m 个整数的序列。</p>
<p>很明显，我们一共可以得到 $n^m$ 个这种序列，然后我们可以计算每个序列中的数字之和，并得到$n^m$ 个值。</p>
<p>现在请你求出这些序列和之中最小的 n 个值。</p>
</blockquote>
<blockquote>
<p>思路：
<img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqh8p-0.png" alt="E3840742B7127DC7704B4B3E72BE2F42"></p>
<p>注意此处的a数组要求排好序，那么分组后的每组都将会是有序的，只需使用小根堆的方式在每次合并两个数组的时候，都选取最小的就好了(需要一定的推导)，因为一次合并m组过于困难，故此可以每次合并两组，一共进行m-1次合并</p>
<blockquote>
<p>反思：思考问题的时候需要化繁为简，需要透过现象看到本质，也就是从最简单的情况开始一步一步推导到题目所要求的解法当中。</p>
</blockquote>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;queue&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;vector&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> T,m,n;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">2010</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>,<span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> PII; <span style="color:#09f;font-style:italic">//first 值， second 下标
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> a[N],b[N],w[N];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">merge</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    priority_queue<span style="color:#555">&lt;</span>PII, vector<span style="color:#555">&lt;</span>PII<span style="color:#555">&gt;</span>, greater<span style="color:#555">&lt;</span>PII<span style="color:#555">&gt;&gt;</span> heap;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) heap.push({a[<span style="color:#f60">0</span>] <span style="color:#555">+</span> b[i], <span style="color:#f60">0</span>}); <span style="color:#09f;font-style:italic">//存放值和序号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">auto</span> t <span style="color:#555">=</span> heap.top();
</span></span><span style="display:flex;"><span>        heap.pop();
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> s <span style="color:#555">=</span> t.first, idx <span style="color:#555">=</span> t.second;
</span></span><span style="display:flex;"><span>        w[i] <span style="color:#555">=</span> s;
</span></span><span style="display:flex;"><span>        heap.push({s <span style="color:#555">-</span> a[idx] <span style="color:#555">+</span> a[idx <span style="color:#555">+</span> <span style="color:#f60">1</span>], idx <span style="color:#555">+</span> <span style="color:#f60">1</span>}); <span style="color:#09f;font-style:italic">//将下一个值放入这个小根堆中 下一个值就是 s - a[当前值] - a[下一个值]
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) a[i] <span style="color:#555">=</span> w[i];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>T);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(T <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%d%d&#34;</span>,<span style="color:#555">&amp;</span>m,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>        sort(a, a <span style="color:#555">+</span> n);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> m <span style="color:#555">-</span> <span style="color:#f60">1</span>; i <span style="color:#555">++</span>) <span style="color:#09f;font-style:italic">//归并，一次归并m组有点困难，但可以每次合并两组，一共合并m-1次
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> n; j <span style="color:#555">++</span> ) scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>b[j]);
</span></span><span style="display:flex;"><span>            merge();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>) printf(<span style="color:#c30">&#34;%d &#34;</span>, a[i]);
</span></span><span style="display:flex;"><span>        puts(<span style="color:#c30">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="贪心">贪心</h3>
<p><strong>贪心常规道路，排序/差值/拆分/和值 取最大</strong></p>
<p><a href="https://www.acwing.com/problem/content/907/">区间选点</a>
<a href="https://www.acwing.com/problem/content/910/">最大不相交区间数量</a></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1.将每个区间按右端点从小到大排序
</span></span><span style="display:flex;"><span>2.从前往后依次枚举每个区间
</span></span><span style="display:flex;"><span>	如果当前区间中已经包含点，则直接pass
</span></span><span style="display:flex;"><span>	否则，选择当前区间的右端点
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://www.acwing.com/problem/content/908/">区间分组</a></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1.将所有区间按左端点从小到大排序
</span></span><span style="display:flex;"><span>2.从前往后处理每个区间
</span></span><span style="display:flex;"><span>	判断能否将其放到某个现有的组当中
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://www.acwing.com/problem/content/909/">区间覆盖</a></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1.将所有区间按左端点从小到大排序
</span></span><span style="display:flex;"><span>2.从前往后依次枚举每个区间，在所有能覆盖start(s端点)当中,选择一个右端点最大的区间，然后将start更新成右端点的最大值
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://www.acwing.com/problem/content/150/">合并果子(哈夫曼树)贪心</a></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>证明；一颗哈夫曼树
</span></span><span style="display:flex;"><span>1.值最小的两个点，深度一定最深，且可以互为兄弟
</span></span><span style="display:flex;"><span>2.合并过程中都是选的最小的两个点进行合并，合并后从n个节点的哈夫曼树问题转化成了n-1个节点的哈夫曼树问题
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://www.acwing.com/problem/content/description/915/">排队打水</a></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>SUM_T总时间=t1x(n-1)+t2x(n-2)+t3x(n-3)+...+tnx1;
</span></span><span style="display:flex;"><span>最优解便是：按照从小到大的顺序排序，总时间最小。
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>证明：（交换调整反证法）
</span></span><span style="display:flex;"><span>假设所排的顺序不是按照从小到大排序的话,
</span></span><span style="display:flex;"><span>必然存在两个元素前一个比后一个大。
</span></span><span style="display:flex;"><span>ti &gt; t(i+1)
</span></span><span style="display:flex;"><span>将ti与t(i+1)交换
</span></span><span style="display:flex;"><span>交换前：ti*(n-i)+t(i+1)*(n-i-1)
</span></span><span style="display:flex;"><span>交换后：t(i+1)(n-i)+ti*(n-i-1)
</span></span><span style="display:flex;"><span>差:ti-t(i+1) &gt; 0
</span></span><span style="display:flex;"><span>也就是交换后 总值还更小了，则说明原来的序列不是最优解
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://www.acwing.com/problem/content/106/">货舱选址</a></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>排序后都去减去中间的数的绝对值
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>证明：
</span></span><span style="display:flex;"><span>f(x) = |x1 - x| + |x2 - x| + ... + |xn - x|  --&gt;求最值
</span></span><span style="display:flex;"><span>	 = (|x1 - x| + |xn - x|) + (|x2 - x| + |xn-2 - x|) + ... +
</span></span><span style="display:flex;"><span>	 ---&gt;转化为|a-x|+|b-x|的值最小
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="动态规划">动态规划</h3>
<blockquote>
<p>为了保证这些计算能够<strong>按顺序、不重复地进行</strong>，动态规划要求<strong>已经求解的子问题不受后续阶段的影响</strong>。这个条件也被叫做**&ldquo;无后效性**&quot;。
换言之，就是<strong>动态规划对状态空间的遍历构成一张有向无环图，遍历顺序就是该有向无环图的一个拓扑序。</strong></p>
<p><u>有向无环图中的节点对应问题中的“状态”，图中的边则对应状态之间的“转移”，转移的选取就是动态规划的“决策”</u></p>
<p>很多情况下，动态规划用于求解最优化问题。此时，下一阶段的最优解应该能够由前面各阶段子问题的最优解导出。这个条件被称为“最优子结构性质”</p>
</blockquote>
<p><strong>三要素：</strong> <u>状态、阶段、决策</u></p>
<p><strong>三个基本条件：</strong> <u>子问题重叠性、无后效性、最优子结构性质</u></p>
<h4 id="动态规划做题步骤">动态规划做题步骤</h4>
<blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>graph LR
</span></span><span style="display:flex;"><span>A[DP`] --&gt; B[状态表示fn````]
</span></span><span style="display:flex;"><span>A --&gt; C[状态计算```]
</span></span></code></pre></td></tr></table>
</div>
</div><p>状态表示：就是思考Dp问题应该用几维，如背包问题最好是一维数组
状态表示：<strong>集合</strong>、<strong>属性</strong>   （每一个状态代表着一个集合）</p>
<p>状态计算：思考如果通过计算从一个状态转移到另外一个状态——也可以是集合的划分</p>
<p>DP优化：某些难的问题还需考虑动态规划的优化</p>
<p><code>确定子问题—&gt;定义状态—&gt;转移方程—&gt;避免重复求解</code></p>
</blockquote>
<h4 id="线性dp三个经典问题">线性DP三个经典问题</h4>
<table>
  <thead>
      <tr>
          <th></th>
          <th></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>LIS问题 [最长上升子序列]</td>
          <td>问题描述</td>
          <td>最长上升子序。给定一个长度为N的数列A，求数值单调递增的子序列的长度最长是多少。A的任意子序列B可以表示为B = {$A_{k1},A_{k2},&hellip;,A_{kp}$}，其中$k_1&lt;k_2&lt;&hellip;&lt;k_p$</td>
      </tr>
      <tr>
          <td></td>
          <td>状态表示</td>
          <td>F[i]表示以A[i]为结尾的“最长上升子序列”的长度</td>
      </tr>
      <tr>
          <td></td>
          <td>阶段划分</td>
          <td>子序列的结尾位置（数列A种的位置，从前到后）</td>
      </tr>
      <tr>
          <td></td>
          <td>转移方程</td>
          <td>$F[i] = max_{0≤j≤i,A[j]&lt;A[i]}{F[j]+1}$</td>
      </tr>
      <tr>
          <td></td>
          <td>边界</td>
          <td>· F[0] = 0</td>
      </tr>
      <tr>
          <td></td>
          <td>目标</td>
          <td>$max_{1≤i≤N}{F[i]}$</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>LCS问题[最长公共子序列]</td>
          <td>问题描述</td>
          <td>最长公共子序列。给定两个长度分别为N和M的字符串A和B，求既是A的子序列又是B的子序列的字符串的长度最长是多少</td>
      </tr>
      <tr>
          <td></td>
          <td>状态表示</td>
          <td>F[i,j]表示前缀子串A[1~i]与B[1~j]的最长公共子序列的长度</td>
      </tr>
      <tr>
          <td></td>
          <td>阶段划分</td>
          <td>已经处理的前缀长度（两个字符串中的位置，及一个二维坐标）</td>
      </tr>
      <tr>
          <td></td>
          <td>转移方程</td>
          <td>$$ F[i,j]=max \left {  \begin{aligned} F[i-1,j] &amp;&amp; 表示继承之前的 \ F[i,j-1] &amp;&amp;表示继承之前的    \ F[i-1,j-1]+1  &amp;&amp; if A[i] = B[j] 找到一个新的+1 \end{aligned} \right. $$​​</td>
      </tr>
      <tr>
          <td></td>
          <td>边界</td>
          <td>F[i,0] = F[0,j] = 0</td>
      </tr>
      <tr>
          <td></td>
          <td>目标</td>
          <td>F[N,M]</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>数字三角形问题</td>
          <td>问题描述</td>
          <td>给定一个共有N行的三角矩阵A，其中第i行有i列。从左上角除法，每次可以向下方或右下方走一步，最终到达底部。球吧经过的所有位置上的数加起来的和最大是多少</td>
      </tr>
      <tr>
          <td></td>
          <td>状态表示</td>
          <td>F[i,j]表示从左上角走到第i行第j列，和的最大值是多少</td>
      </tr>
      <tr>
          <td></td>
          <td>阶段划分</td>
          <td>路径的结尾位置（矩阵中的行、列位置，也就是一个二维坐标）</td>
      </tr>
      <tr>
          <td></td>
          <td>转移方程</td>
          <td>$$ F[i,j]=A[i,j] + max\left{ \begin{aligned} F[i-1,j] &amp;  &amp; \ F[i-1,j-1] &amp; &amp; if\  \  \ j &gt; 1  \end{aligned} \right. $$</td>
      </tr>
      <tr>
          <td></td>
          <td>边界</td>
          <td>F[1,1] =A[1,1]</td>
      </tr>
      <tr>
          <td></td>
          <td>目标</td>
          <td>max{F[N,j]}</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h5 id="lis最长上升子序列问题">LIS最长上升子序列问题</h5>
<p>【朴素算法实现】O(n2)</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lis</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> dp[MAX];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>;i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        dp[i] <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> i; j <span style="color:#555">++</span>) <span style="color:#09f;font-style:italic">//这一步可优化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(a[j] <span style="color:#555">&lt;</span> a[i] <span style="color:#555">&amp;&amp;</span> dp[j] <span style="color:#555">+</span> <span style="color:#f60">1</span> <span style="color:#555">&gt;</span> dp[i])
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>               dp[i] <span style="color:#555">=</span> dp[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>               <span style="color:#09f;font-style:italic">//from[i] = j; //记录路径 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> maxx <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> x; i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>        maxx <span style="color:#555">=</span> max(dp[i],maxx);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> maxx;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>记录以每一个元素解为的最长上升子序列长度</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> N; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">if</span>(dp[i] <span style="color:#555">==</span> <span style="color:#f60">1</span>) f[i] <span style="color:#555">=</span> <span style="color:#f60">1</span> ;
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">for</span>(j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> <span style="color:#99f">N</span>: j <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#069;font-weight:bold">if</span>(base[i] <span style="color:#555">&gt;</span> base[j] <span style="color:#555">&amp;&amp;</span> dp[j] <span style="color:#555">==</span> dp[i] <span style="color:#555">-</span> <span style="color:#f60">1</span>) f[i] <span style="color:#555">+=</span> f[j] ;
</span></span><span style="display:flex;"><span>		<span style="color:#069;font-weight:bold">else</span> <span style="color:#c0f">if</span>(base[i] <span style="color:#555">==</span> base[j] <span style="color:#555">&amp;&amp;</span> dp[j] <span style="color:#555">==</span> dp[i]) f[i] <span style="color:#555">=</span> <span style="color:#f60">0</span> ;
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">if</span>(f[i] <span style="color:#555">==</span> ans) res <span style="color:#555">++</span> ;
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p>记录路径</p>
<blockquote>
<p>只要记录前驱，然后递归输出即可（也可以用栈的）</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">output</span>(<span style="color:#078;font-weight:bold">int</span> x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">if</span>(<span style="color:#555">!</span>x)<span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>	output(from[x]);
</span></span><span style="display:flex;"><span>	cout <span style="color:#555">&lt;&lt;</span> data[x] <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#09f;font-style:italic">//迭代输出 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//x表示的是，最长上升子序列的最后一个元素下标
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<p>【二分优化版】 O(nlogn)</p>
<blockquote>
<p>通过二分去查找，优化内循环</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lis</span>(<span style="color:#078;font-weight:bold">int</span> n)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> len <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    f[<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>; <span style="color:#09f;font-style:italic">//存放一下最长子序列
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>	<span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> t;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(t <span style="color:#555">&gt;</span> f[len]) f[<span style="color:#555">++</span>len] <span style="color:#555">=</span> t;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> r <span style="color:#555">=</span> len;
</span></span><span style="display:flex;"><span>            <span style="color:#078;font-weight:bold">int</span> mid;
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">while</span>(l <span style="color:#555">&lt;</span> r)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                mid <span style="color:#555">=</span> l <span style="color:#555">+</span> r <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">if</span>(f[mid] <span style="color:#555">&gt;</span> t) r <span style="color:#555">=</span> mid;
</span></span><span style="display:flex;"><span>                <span style="color:#069;font-weight:bold">else</span> l <span style="color:#555">=</span> mid <span style="color:#555">+</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            f[l] <span style="color:#555">=</span> min(t,f[l]); <span style="color:#09f;font-style:italic">//f[l] = t; 也可
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> len;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="lcs最长公共子串问题">LCS最长公共子串问题</h5>
<blockquote>
<p>dp[i][j]表示A的前i位，B的前j位的LCS的长度</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> m; j <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        dp[i][j] <span style="color:#555">=</span> max(dp[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j], dp[i][j<span style="color:#555">-</span><span style="color:#f60">1</span>]); <span style="color:#09f;font-style:italic">//如果不相同的话则继承最大的长度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(a[i] <span style="color:#555">==</span> b[j])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            dp[i][j] <span style="color:#555">=</span> max(dp[i][j], dp[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>); <span style="color:#09f;font-style:italic">//如果相同的话，则更新的时候要加上1 
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> dp[n][m];
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>LCS转化为LIS问题洛谷P1439
<a href="https://www.luogu.com.cn/problem/P1439">https://www.luogu.com.cn/problem/P1439</a></p>
</blockquote>
<p>变题：最长连续公共子串问题</p>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/3511/">https://www.acwing.com/problem/content/3511/</a></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>思路：MLE //注意辨别与LCS问题的区别
</span></span><span style="display:flex;"><span>f[i][j]表示 1~ai,1~bj且ai,bj为结尾的所有公共子串
</span></span><span style="display:flex;"><span>属性：最长公共串长度
</span></span><span style="display:flex;"><span>转移：
</span></span><span style="display:flex;"><span>1.如果ai==bj且ai,bj都是字母，则f[i][j]=f[i-1][j-1]+1
</span></span><span style="display:flex;"><span>2.其他，f[i][j]=0
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//MLE
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">20010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> f[N][N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> p[N],s[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%s&#34;</span>, p <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%s&#34;</span>, s <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> n <span style="color:#555">=</span> strlen(p<span style="color:#555">+</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> m <span style="color:#555">=</span> strlen(s<span style="color:#555">+</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> m; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(p[i] <span style="color:#555">==</span> s[j] <span style="color:#555">&amp;&amp;</span> <span style="color:#555">!</span>(p[i] <span style="color:#555">&gt;=</span> <span style="color:#c30">&#39;0&#39;</span> <span style="color:#555">&amp;&amp;</span> p[i] <span style="color:#555">&lt;=</span> <span style="color:#c30">&#39;9&#39;</span>)){
</span></span><span style="display:flex;"><span>                f[i][j] <span style="color:#555">=</span> max(f[i][j], f[i <span style="color:#555">-</span> <span style="color:#f60">1</span>][j <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>                res <span style="color:#555">=</span> max(f[i][j], res);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">else</span> f[i][j] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,res);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>上面的代码内存超限，观察优化可以得到<code>for(int j = 1; j &lt;= m; j ++)</code>类似于01背包的优化方法，可以采用滑动数组的方式对空间进行优化。</p>
<p>采用类似01背包的方式进行优化后如下所示：
需要注意的是：这里写成<code> f[j] = max(f[j], f[j-1]+1)</code> 会出问题</p>
<p>这里绝对不能生搬硬套0/1背包的解问题，为什么呢？<code>一定要自己思考，不要生搬硬套</code></p>
<p>我们可以将原问题转换到二维之前的情况：
对于本体，原来的转移方式是<code>f[i][j] = f[i-1][j-1] + 1</code></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>此时i只取决于上一步的i-1，故此可以优化第一维度。
</span></span><span style="display:flex;"><span>如果这里取f[j] = max(f[j], f[j-1]+1)的话
</span></span><span style="display:flex;"><span>表示f[i][j] = max(f[i - 1][j], f[i - 1][j - 1] + 1);
</span></span></code></pre></td></tr></table>
</div>
</div><p>对比优化前的0/1背包：<code>f[i][j] = max(f[i-1][j], f[i-1][j-v] + w)</code> 这样才能优化为<code>f[j]=max(f[j],f[j-v]+w)</code></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">10010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> f[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> p[N],s[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,m;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%s%s&#34;</span>, p <span style="color:#555">+</span> <span style="color:#f60">1</span>, s <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    n <span style="color:#555">=</span> strlen(p<span style="color:#555">+</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    m <span style="color:#555">=</span> strlen(s<span style="color:#555">+</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// for(int i=1;i&lt;=n;i++){
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//     for(int j=m;j&gt;=1;j--){
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//         if(p[i]==s[j] &amp;&amp; isalpha(p[i]) &amp;&amp; isalpha(s[j]))f[j]=f[j-1]+1;
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//         else f[j]=0;
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//         res=max(res,f[j]);
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//     }
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// }
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> m; j <span style="color:#555">&gt;=</span> <span style="color:#f60">1</span>; j <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(p[i] <span style="color:#555">==</span> s[j] <span style="color:#555">&amp;&amp;</span> <span style="color:#555">!</span>(p[i] <span style="color:#555">&gt;=</span> <span style="color:#c30">&#39;0&#39;</span> <span style="color:#555">&amp;&amp;</span> p[i] <span style="color:#555">&lt;=</span> <span style="color:#c30">&#39;9&#39;</span>)){
</span></span><span style="display:flex;"><span>                f[j] <span style="color:#555">=</span> f[j <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">+</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//IMPORTANT！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">else</span> f[j] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>            res <span style="color:#555">=</span> max(res, f[j]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,res);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="数字三角形">数字三角形</h5>
<blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> ans <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> i; j <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  cin <span style="color:#555">&gt;&gt;</span> dp[i][j];
</span></span><span style="display:flex;"><span>  dp[i][j] <span style="color:#555">+=</span> max(dp[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j<span style="color:#555">-</span><span style="color:#f60">1</span>], dp[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j]);
</span></span><span style="display:flex;"><span>  ans <span style="color:#555">=</span> max(ans,dp[i][j]);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>cout <span style="color:#555">&lt;&lt;</span> ans;
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h5 id="整数划分问题">整数划分问题</h5>
<blockquote>
<p>老生常谈的动态规划</p>
</blockquote>
<blockquote>
<p>将n划分成不大于m的划分法</p>
</blockquote>
<p>(1) 划分多个整数可以存在相同：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>dp[n][m] <span style="color:#555">=</span> d[n][m<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> dp[n<span style="color:#555">-</span>m][m];
</span></span><span style="display:flex;"><span>dp[n][m] <span style="color:#555">:</span><span style="color:#a00;background-color:#faa">表示整数</span>n的划分中<span style="color:#a00;background-color:#faa">，每个数不大于</span>m的划分数
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">划分分为两种情况：</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f60">1.</span><span style="color:#a00;background-color:#faa">划分中每个数都小于</span>m<span style="color:#a00;background-color:#faa">，相当于每个数不大于</span>m<span style="color:#555">-</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">，故划分数位</span>dp[n][m<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#f60">2.</span><span style="color:#a00;background-color:#faa">划分中有一个数为</span>m<span style="color:#a00;background-color:#faa">，那就在</span>n中减去m<span style="color:#a00;background-color:#faa">，剩下的就相当于</span>n<span style="color:#555">-</span>m进行划分<span style="color:#a00;background-color:#faa">，故为</span>dp[n<span style="color:#555">-</span>m][m]
</span></span></code></pre></td></tr></table>
</div>
</div><p>(2) 划分成多个不同的整数</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>dp[n][m] <span style="color:#555">=</span> dp[n][m<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> dp[n<span style="color:#555">-</span>m][m01];
</span></span><span style="display:flex;"><span>dp[n][m] <span style="color:#555">:</span><span style="color:#a00;background-color:#faa">表示整数</span>n的划分中<span style="color:#a00;background-color:#faa">，每个数不大于</span>m的划分数
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">划分分为两种情况：</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f60">1.</span><span style="color:#a00;background-color:#faa">划分中每个数都小于</span>m,<span style="color:#a00;background-color:#faa">相当于每个数不大于</span>m<span style="color:#555">-</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">，划分数为</span>dp[n][m<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#f60">2.</span><span style="color:#a00;background-color:#faa">划分中有一个数为</span>m,<span style="color:#a00;background-color:#faa">在</span>n中减去m,<span style="color:#a00;background-color:#faa">剩下相当于对</span>n<span style="color:#555">-</span>m进行划分<span style="color:#a00;background-color:#faa">，并且每个数不大于</span>m<span style="color:#555">-</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">，故划分数为</span>dp[n<span style="color:#555">-</span>m][m<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>=&gt;(3) 将n划分成k个数的划分法</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>dp[n][k] <span style="color:#555">=</span> dp[n<span style="color:#555">-</span>k][k] <span style="color:#555">+</span> dp[n<span style="color:#555">-</span><span style="color:#f60">1</span>][k<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">划分方法：</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f60">1.</span>n份中不包含1的分法<span style="color:#a00;background-color:#faa">，为保证每份都</span> <span style="color:#555">&gt;=</span> <span style="color:#f60">2</span>,<span style="color:#a00;background-color:#faa">可以先拿出</span>k个1分到每一份<span style="color:#a00;background-color:#faa">，然后再把剩下的</span>n<span style="color:#555">-</span>k分成k份<span style="color:#a00;background-color:#faa">，分法有：</span>dp[n<span style="color:#555">-</span>k][k]
</span></span><span style="display:flex;"><span>    <span style="color:#f60">2.</span>n份中至少有一份为1的分法<span style="color:#a00;background-color:#faa">，可以先拿出一个</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">作为单独的一份，剩下的</span>n<span style="color:#555">-</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">再分成</span>k<span style="color:#555">-</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">份，分法有：</span>dp[n<span style="color:#555">-</span><span style="color:#f60">1</span>][k<span style="color:#555">-</span><span style="color:#f60">1</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>典型例题：AcWing 1050. 鸣人的影分身</p>
<blockquote>
<p><a href="https://www.acwing.com/problem/content/1052/">https://www.acwing.com/problem/content/1052/</a></p>
</blockquote>
<blockquote>
<p>思维过程：</p>
<p>【思路】相当于把m个相同的苹果放入n个盘子种的方法的个数
对放入的情况进行讨论：
（１）当ｎ＞ｍ（盘子个数大于苹果个数）：一定有ｍ－ｎ个盘子空着，那么这种情况和把ｍ个苹果放入ｍ个盘子效果是一样的</p>
<p>（２）当ｎ＜＝ｍ时，盘子个数小于苹果个数
１、至少有一个盘子是空着的，相当于把ｍ个苹果放入到ｎ－１盘子中
２、当每个盘子都有时，每个盘子至少一个
就是ｆ（ｍ－ｎ，ｎ），把每个盘子的苹果都拿出一个
递归
１盘子数不断减少，当ｎ＝＝１时，返回１
２苹果不断减少，定义ｍ＝＝０，返回１</p>
</blockquote>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">dp</span>(<span style="color:#078;font-weight:bold">int</span> m, <span style="color:#078;font-weight:bold">int</span> n){
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">if</span>(m<span style="color:#555">==</span><span style="color:#f60">0</span> <span style="color:#555">||</span> n<span style="color:#555">==</span><span style="color:#f60">1</span>) <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(m <span style="color:#555">&lt;</span> n) <span style="color:#069;font-weight:bold">return</span> dp(n,m);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> dp(m,n<span style="color:#555">-</span><span style="color:#f60">1</span>)<span style="color:#555">+</span>dp(m<span style="color:#555">-</span>n,n);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//暴搜
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">dfs</span>(<span style="color:#078;font-weight:bold">int</span> u, <span style="color:#078;font-weight:bold">int</span> start, <span style="color:#078;font-weight:bold">int</span> sum) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (u <span style="color:#555">==</span> n) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (sum <span style="color:#555">==</span> m)res<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> start; i <span style="color:#555">&lt;=</span> m; i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        sum <span style="color:#555">+=</span> i;
</span></span><span style="display:flex;"><span>        dfs(u <span style="color:#555">+</span> <span style="color:#f60">1</span>, i ,sum);
</span></span><span style="display:flex;"><span>        sum <span style="color:#555">-=</span> i;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>**典型例题：**第十四届蓝桥杯——接龙数列——<strong>类似于最长公共子序列问题</strong> ⭐️本题DP真的很巧妙，小技巧！！大妙招！！！大突破！！！</p>
<p><a href="https://www.acwing.com/problem/content/4961/">https://www.acwing.com/problem/content/4961/</a></p>
<p>题目描述：对于一个数列 删除数字使其构造的接龙数列的长度最大
接龙数列：前一个数的末尾等于后一个数的前面</p>
<p><strong>思路：</strong></p>
<ol>
<li>
<p>求删除最少的数使其构造的接龙数列最长=该数列中存在的最长的接龙数列，然后使用数列的长度-最大的接龙数列的长度=需要删除的最少的数</p>
</li>
<li>
<p>传统的DP动态规划的求解子问题；「每一个数是否为接龙数只取决于上一个数的某尾是否与当前数字的前面相等」</p>
</li>
<li>
<p>分析过程「类似最长公共子序列分析过程」</p>
<ol>
<li>
<p>状态表示$F[i]$</p>
<ul>
<li>集合：表示以第i个数结尾的所有接龙子序列的集合</li>
<li>属性：子序列的最长长度</li>
</ul>
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqggb-0.png" alt="20230415161034618"></p>
</li>
<li>
<p>状态计算</p>
<ul>
<li>由1状态表示可以得到f[i]可以分为如上几个类：
<ol>
<li>无：表示没有办法找出i的前一个数与其组成接龙序列</li>
<li>$a_1$：表示$a_i$可以与$a_1$组成接龙序列</li>
<li>最大可以到$a_{i-1}$能够与$a_i$组成接龙序列</li>
</ol>
</li>
<li>我们要求$f(i)$所有集合中的最大长度。
<ol>
<li>对于无的空集，那么最大子集就是本身，长度为1；</li>
<li>对于其中每个子集，他们的最大值就是$f[j]+1$</li>
<li>那么对于$$f[i]$$集合的长度，就是取$$max(1, f[j]+1)$$的最大值</li>
</ol>
</li>
</ul>
</li>
<li>
<p>时间复杂度的优化</p>
<ul>
<li>如果直接按上面的方法进行求解的话，得到的是$O(n^2)$的算法，只能过50%的样例;
<ol>
<li>因为在j循环中，我们只关心$back[i] == pre[j]$的数的情况，也就是说其他情况不用去考虑；</li>
<li>我们可以开一个辅助数组g[10]，用于求解其中以数字0,1,2,3,4,5,6,7,8,9结尾的数中最大的长度，这样的话每次求最大长度就不需要遍历i-1次了，直接获取其最大的集合数$g[pre[i]]$</li>
</ol>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 50%的求法 O(n^2)时间复杂度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N],dp[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> ch[<span style="color:#f60">30</span>];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> pre[N],back[N];<span style="color:#09f;font-style:italic">//分别存每个数的前缀和末尾
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%s&#34;</span>,ch);
</span></span><span style="display:flex;"><span>        pre[i] <span style="color:#555">=</span> ch[<span style="color:#f60">0</span>] <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>        back[i] <span style="color:#555">=</span> ch[strlen(ch) <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> ans <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        dp[i] <span style="color:#555">=</span> max(<span style="color:#f60">1</span>, dp[i]);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> i; j <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">if</span>(back[j] <span style="color:#555">==</span> pre[i]){
</span></span><span style="display:flex;"><span>                dp[i] <span style="color:#555">=</span> max(dp[i], dp[j] <span style="color:#555">+</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ans <span style="color:#555">=</span> max(ans, dp[i]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d&#34;</span>, n <span style="color:#555">-</span> ans);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N],dp[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> ch[<span style="color:#f60">30</span>];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> pre[N],back[N];<span style="color:#09f;font-style:italic">//分别存每个数的前缀和末尾
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> g[<span style="color:#f60">10</span>]; <span style="color:#09f;font-style:italic">//数组优化循环，存的是以某个数字结尾的最大的长度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>,<span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%s&#34;</span>,ch);
</span></span><span style="display:flex;"><span>        pre[i] <span style="color:#555">=</span> ch[<span style="color:#f60">0</span>] <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>        back[i] <span style="color:#555">=</span> ch[strlen(ch) <span style="color:#555">-</span> <span style="color:#f60">1</span>] <span style="color:#555">-</span> <span style="color:#c30">&#39;0&#39;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> ans <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        dp[i] <span style="color:#555">=</span> max(<span style="color:#f60">1</span>, dp[i]);
</span></span><span style="display:flex;"><span>        dp[i] <span style="color:#555">=</span> max(dp[i], g[pre[i]] <span style="color:#555">+</span> <span style="color:#f60">1</span>); <span style="color:#09f;font-style:italic">//思维很重要，优化思维！！！
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        g[back[i]] <span style="color:#555">=</span> max(g[back[i]], dp[i]);
</span></span><span style="display:flex;"><span>        ans <span style="color:#555">=</span> max(ans, dp[i]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%d&#34;</span>, n <span style="color:#555">-</span> ans);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="动态规划-背包问题">动态规划—背包问题</h3>
<blockquote>
<p>有时候要注意下题目的要求，究竟是要正好装满还是不超过，这一条件的唯一区别就是初始dp值的不同，0还是-INF</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>//背包九讲内的解释
</span></span><span style="display:flex;"><span>这是为什么呢？可以这样理解：初始化的 F 数组事实上就是在没有任何物品可以放
</span></span><span style="display:flex;"><span>入背包时的合法状态。如果要求背包恰好装满，那么此时只有容量为 0 的背包可以在什
</span></span><span style="display:flex;"><span>么也不装且价值为 0 的情况下被“恰好装满”，其它容量的背包均没有合法的解，属于
</span></span><span style="display:flex;"><span>未定义的状态，应该被赋值为 -∞ 了。如果背包并非必须被装满，那么任何容量的背包
</span></span><span style="display:flex;"><span>都有一个合法解“什么都不装”，这个解的价值为 0，所以初始时状态的值也就全部为 0
</span></span><span style="display:flex;"><span>了。
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h4 id="0-1背包问题">0/1背包问题</h4>
<!-- <img src="./wdcs.assets/image-20211110162319694.png" alt="image-20211110162319694" style="zoom:50%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqdk0-0.png" alt="20211110162319694"></p>
<blockquote>
<p>有N件物品和一个容量为V的背包。第i件物品的费用是c[i]，价值是w[i]。求解将哪些物品装入背包可使这些物品的费用总和不超过背包容量，且价值总和最大。</p>
</blockquote>
<p>用“已经处理的物品数“作为DP的”阶段“
以”背包中已经放入的物品的总体积“作为附加维度</p>
<p>则有：
F[i，j] 表示从前i个物品中选出了总体积为j的物品放入背包，物品的最大价值和
$$ F[i,j]=max\left{ \begin{aligned} F[i-1,j] &amp;&amp; 不选第i个物品 \ F[i-1,j-V_i]+W_i &amp;  &amp; 选第i个物品\\end{aligned} \right. $$​​</p>
<p>· 不选第i个物品，也就是意味着选前i-1个物品，空间为j的情况下的最优解
· 选第i个物品，前i-1个物品的体积最多为j-v[i]</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>//背包九讲文中的解释：
</span></span><span style="display:flex;"><span>如果不放第i件物品，那么问题转化为“前i−1件物品放入容量为v的背包中”，价值为 F[i − 1, v]；
</span></span><span style="display:flex;"><span>如果放第i件物品，那么问题就转化为“前i−1件物品放入剩下的容量为v−Ci的背包中”，此时能获得的最大价值就是F[i−1, v−Ci]再加上通过放入第i件物品获得的价值 Wi。
</span></span></code></pre></td></tr></table>
</div>
</div><p>【朴素版解法】二维数组</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>memset(f, <span style="color:#f60">0xcf</span>, <span style="color:#069;font-weight:bold">sizeof</span> f);
</span></span><span style="display:flex;"><span>f[<span style="color:#f60">0</span>][<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;=</span> m; j <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        f[i][j] <span style="color:#555">=</span> f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(j <span style="color:#555">&gt;=</span> v[i])
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            f[i][j] <span style="color:#555">=</span> max(f[i][j], f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j<span style="color:#555">-</span>v[i]]<span style="color:#555">+</span>w[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> f[n][m];
</span></span></code></pre></td></tr></table>
</div>
</div><p>【滚动数组优化版】</p>
<blockquote>
<p>需要特别注意使用了倒序循环，这是为了满足线性DP的无后效性
如果使用正序循环，将会出现第i个物品被使用了两次的情况，这样违背了线性DP的无后效性原则
如果是</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> v[i]; j <span style="color:#555">&lt;=</span> m; j <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	f[j] <span style="color:#555">=</span> max(f[j], f[j<span style="color:#555">-</span>v[i]] <span style="color:#555">+</span> w[i]);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#555">---</span><span style="color:#a00;background-color:#faa">等价于</span>
</span></span><span style="display:flex;"><span>f[i][j] <span style="color:#555">=</span> max(f[i][j],f[i][j<span style="color:#555">-</span>v[i]]<span style="color:#555">+</span>w[i]);  <span style="color:#555">---</span><span style="color:#a00;background-color:#faa">并不是我们所希望的</span> f[i][j] <span style="color:#555">=</span> max(f[i][j],f[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j<span style="color:#555">-</span>v[i]]<span style="color:#555">+</span>w[i]);
</span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">从后往前进行遍历</span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> m; j <span style="color:#555">&gt;=</span> v[i]; j <span style="color:#555">--</span>) <span style="color:#a00;background-color:#faa">则可以解决这个问题</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>👇此时f[j]表示空间&lt;=i的最大价值，最后直接输出f[m]即可，也与初始化有关，如果初始值都是0的话，所以如果存在一个k&lt;m使得空间最大为k的情况下f[k]有最大价值，那么f[m]一定可以从k这个状态转移过来——即f[m]一定是最大值
但是如果题目要求装满背包的话，也就是将物品恰装入一个容量为m的背包中，只需要将初始化条件更改一下即可，将f设置为-INF,其中f[0]=0即可确保状态一定是从0转移过来的。</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> f[Max_m<span style="color:#555">+</span><span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>memset(f, <span style="color:#f60">0xcf</span>, <span style="color:#069;font-weight:bold">sizeof</span> f);
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(j <span style="color:#555">=</span> m; j <span style="color:#555">&gt;=</span> v[i]; j <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        f[j] <span style="color:#555">=</span> max(f[j], f[j<span style="color:#555">-</span>v[i]] <span style="color:#555">+</span> w[i]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> f[m];
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="完全背包问题">完全背包问题</h4>
<blockquote>
<p>有N种物品和一个容量为V的背包，每种物品都有<u>无限件</u>可用。第i种物品的费用是c[i]，价值是w[i]。求解将哪些物品装入背包可使这些物品的费用总和不超过背包容量，且价值总和最大。</p>
</blockquote>
<p>F[i，j] 表示从前i个物品中选出了总体积为j的物品放入背包，物品的最大价值和
$$ F[i,j]=max\left{ \begin{aligned} F[i-1,j] &amp;&amp; 不选第i种物品 \ F[i,j-V_i]+W_i &amp;  &amp; j&gt;= V_i\ \ 从第i种物品中选一个\\end{aligned} \right. $$​​​​</p>
<p>初值：f[0][0] = 0;  其他为-INF;  目标是max{F[N][j]}
因为每一种物品都有无限个，我们只管去取k个i种物品就好了</p>
<blockquote>
<ol>
<li>不装入第i种物品，即<code>dp[i−1][j]</code>，同01背包；</li>
<li>装入第i种物品，此时和01背包不太一样，因为每种物品有无限个（但注意书包限重是有限的），所以此时不应该转移到<code>dp[i−1][j−w[i]]</code>而应该转移到<code>dp[i][j−w[i]]</code>，即装入第i种商品后还可以再继续装入第i种商品。</li>
</ol>
</blockquote>
<p>【解法一：常规贪心】</p>
<blockquote>
<p>$F[i,v] = max {F[i-1,V-kCi]+kWi | 0\leq kCi \leq v }$</p>
</blockquote>
<p>每个物品可以放的上限为$\lfloor v/Ci \rfloor$​ ，为了得到F[i, v] 需要遍历所有的k∈(1&hellip;n)，找出所有k值下F[i,v]的最大值</p>
<blockquote>
<p>空间复杂度 $O(VN)$ 时间复杂度$O(VN\sum_{i=1}^N V/C_i)$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    F [0..V ] ←0
</span></span><span style="display:flex;"><span>        for i ← 1 to N
</span></span><span style="display:flex;"><span>            for v ← Ci to V
</span></span><span style="display:flex;"><span>                for k ← 0 to V/Ci
</span></span><span style="display:flex;"><span>                    F [i, v] ← max(F [i-1,v-kCi] + kWi)
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>//如何求出取物品的路径
</span></span><span style="display:flex;"><span>    v_0 = V
</span></span><span style="display:flex;"><span>    for i ← N to 1
</span></span><span style="display:flex;"><span>        for k ← 0 to V/ci
</span></span><span style="display:flex;"><span>            if(f[i][v_0] = f[i-1][v_0-k*ci]+k*wi){
</span></span><span style="display:flex;"><span>                print(&#34;选取了k个物品i&#34;)
</span></span><span style="display:flex;"><span>                v_0 = v_0 - k*ci;
</span></span><span style="display:flex;"><span>                break;
</span></span><span style="display:flex;"><span>            }
</span></span></code></pre></td></tr></table>
</div>
</div><p>【解法二：转化为朴素的0/1背包】</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i<span style="color:#555">=</span><span style="color:#f60">1</span>;i<span style="color:#555">&lt;=</span>n;i<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j<span style="color:#555">=</span><span style="color:#f60">0</span>;j<span style="color:#555">&lt;=</span>m;j<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		dp[i][j] <span style="color:#555">=</span> dp[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j];
</span></span><span style="display:flex;"><span>		<span style="color:#069;font-weight:bold">if</span>(j <span style="color:#555">&gt;=</span> v[i])
</span></span><span style="display:flex;"><span>			dp[i][j]<span style="color:#555">=</span>max(dp[i][j],dp[i][j<span style="color:#555">-</span>v[i]]<span style="color:#555">+</span>w[i]);
</span></span><span style="display:flex;"><span>	} 
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> dp[n][m];
</span></span></code></pre></td></tr></table>
</div>
</div><p>【空间优化版】必须从1开始枚举，与0/1背包避免覆盖恰恰相反这里要满足覆盖</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> v[i]; j <span style="color:#555">&lt;=</span> m; j <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        dp[j] <span style="color:#555">=</span> max(dp[j],dp[j<span style="color:#555">-</span>v]<span style="color:#555">+</span>w);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> dp[m];
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="多重背包问题">多重背包问题</h4>
<blockquote>
<p>有 N 种物品和一个容量为 V 的背包。第 i 种物品最多有 Mi 件可用，每件耗费的 空间是 Ci，价值是 Wi。求解将哪些物品装入背包可使这些物品的耗费的空间总和不超 过背包容量，且价值总和最大。</p>
</blockquote>
<p><code>“拆分物品”的思想和方法</code></p>
<p>【解法一】三重循环枚举</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>//与01背包的区别和联系
</span></span><span style="display:flex;"><span>f[i]表示总体积是i的情况下，最大价值是多少
</span></span><span style="display:flex;"><span>for(int i = 1; i &lt;= n; i ++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	for(int j = m; j &gt;= v[i]; j --)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		f[j] = max(f[j], f[j-v[i]] + w[i], f[j-2*v[i]] + 2*w[i], ... ,f[j-k*v[i]]+k*w[i]); //三重循环
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>//相比于0/1背包问题，多重背包问题可以选0个、1个、2个...、k个
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    v,w,s;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> m; j <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>; j <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">1</span>; k <span style="color:#555">&lt;=</span> s <span style="color:#555">&amp;&amp;</span> k<span style="color:#555">*</span>v[i] <span style="color:#555">&lt;=</span> j; k <span style="color:#555">++</span>) <span style="color:#09f;font-style:italic">//别盲目用&amp;&amp; 要满足升序排列的时候才能用&amp;&amp;，否则会提前跳出循环
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            f[j] <span style="color:#555">=</span> max(f[j], f[j <span style="color:#555">-</span> k<span style="color:#555">*</span>v] <span style="color:#555">+</span> k<span style="color:#555">*</span>w);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> f[m];
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="分组背包问题">分组背包问题</h4>
<blockquote>
<p>有 N 件物品和一个容量为 V 的背包。第 i 件物品的费用是 Ci，价值是 Wi。这些 物品被划分为 K 组，每组中的物品互相冲突，最多选一件。求解将哪些物品装入背包 可使这些物品的费用总和不超过背包容量，且价值总和最大。</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>背包九讲的问题
</span></span><span style="display:flex;"><span>for k ← 1 to K
</span></span><span style="display:flex;"><span>	for v ← V to 0
</span></span><span style="display:flex;"><span>		for all item i in group k
</span></span><span style="display:flex;"><span>			F[v] ← max{F[v], F[v − Ci] + Wi}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>for(int i = 0; i &lt; n; i ++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	for(int j = m; j &gt;= v; j --)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		f[j] = max(f[j], f[j-v[0]] + w[0], f[j-v[1]] + w[1], ... , f[j-v[s-1] + w[s-1]])
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>return f[m];
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span> ; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> s; j <span style="color:#555">++</span>) cin <span style="color:#555">&gt;&gt;</span> v[j] <span style="color:#555">&gt;&gt;</span> w[j];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> m; j <span style="color:#555">&gt;=</span> <span style="color:#f60">0</span>; j <span style="color:#555">--</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">0</span>; k <span style="color:#555">&lt;</span> s <span style="color:#555">&amp;&amp;</span> j <span style="color:#555">&gt;=</span> v[k]; k <span style="color:#555">++</span>)<span style="color:#09f;font-style:italic">//别盲目用&amp;&amp; 要满足升序排列的时候才能用&amp;&amp;，否则会提前跳出循环
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        {
</span></span><span style="display:flex;"><span>            f[j] <span style="color:#555">=</span> max(f[j], f[j<span style="color:#555">-</span>v[k]] <span style="color:#555">+</span> w[k]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="区间dp">区间DP</h3>
<p><code>大区间包含小区间</code></p>
<blockquote>
<p>定义状态的时候定义的是一个区间</p>
<p>区间DP也是属于线性DP的一类，它以“区间长度”作为DP的“阶段”，使用两个坐标（区间的左右端点）描述每个维度。在区间DP中，一个状态由若干个比它更小且包含于它的区间所代表的状态转移而来的，因此区间DP的决策往往就是划分区间的方法。</p>
</blockquote>
<p>【典例】合并石子</p>
<blockquote>
<p>设F[l , r] 表示把最初的第l 堆到第r 堆石子合并成一堆，需要消耗的体力。</p>
<p>状态转移方程可以为：
$F[l,r] = min_{1≤k≤r}{F[l,k],F[k+1,r]}+\sum_{i=l}^rA_i$​</p>
<p>初始值：$\forall l \in[1,N],F[l,l]=A_l$,其余为正无穷
目标：$F[1,N]$​</p>
</blockquote>
<blockquote>
<p>一定要分清<strong>阶段</strong>、<strong>状态</strong>和<strong>决策</strong>，三者应该按照<strong>从外到内的顺序依次循环</strong></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>memset(f, <span style="color:#f60">0x3f</span>, <span style="color:#069;font-weight:bold">sizeof</span> f); <span style="color:#09f;font-style:italic">//INF
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>    f[i][i] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    sum[i] <span style="color:#555">=</span> sum[i<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> a[i]; <span style="color:#09f;font-style:italic">//前缀和
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> len <span style="color:#555">=</span> <span style="color:#f60">2</span>; len <span style="color:#555">&lt;=</span> n; len <span style="color:#555">++</span>)<span style="color:#09f;font-style:italic">//阶段：很明显是以len作为一个阶段
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>	<span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">1</span>; l <span style="color:#555">&lt;=</span> n <span style="color:#555">-</span> len <span style="color:#555">+</span> <span style="color:#f60">1</span>; l <span style="color:#555">++</span>) <span style="color:#09f;font-style:italic">//状态：枚举左端点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#078;font-weight:bold">int</span> r <span style="color:#555">=</span> l <span style="color:#555">+</span> len <span style="color:#555">-</span> <span style="color:#f60">1</span>; <span style="color:#09f;font-style:italic">//状态：枚举右端点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		<span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> l; k <span style="color:#555">&lt;</span> r; k <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>            f[l][r] <span style="color:#555">=</span> min(f[l][r], f[l][k] <span style="color:#555">+</span> f[k <span style="color:#555">+</span> <span style="color:#f60">1</span>][r]); <span style="color:#09f;font-style:italic">//这一步表示将l~k||k+1~r进行区间合并，并取得合并后还是合并前的最大值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		f[l][r] <span style="color:#555">+=</span> sum[r] <span style="color:#555">-</span> sum[l <span style="color:#555">-</span> <span style="color:#f60">1</span>];
</span></span></code></pre></td></tr></table>
</div>
</div><p>【区间DP一般模板】$O(n^3)$</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>memset(dp,<span style="color:#f60">0</span>,<span style="color:#069;font-weight:bold">sizeof</span>(dp))<span style="color:#09f;font-style:italic">//初始dp数组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> len<span style="color:#555">=</span><span style="color:#f60">2</span>;len<span style="color:#555">&lt;=</span>n;len<span style="color:#555">++</span>){<span style="color:#09f;font-style:italic">//枚举区间长度
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i<span style="color:#555">=</span><span style="color:#f60">1</span>;i<span style="color:#555">&lt;</span>n;<span style="color:#555">++</span>i){<span style="color:#09f;font-style:italic">//枚举区间的起点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#078;font-weight:bold">int</span> j<span style="color:#555">=</span>i<span style="color:#555">+</span>len<span style="color:#555">-</span><span style="color:#f60">1</span>;<span style="color:#09f;font-style:italic">//根据起点和长度得出终点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">if</span>(j<span style="color:#555">&gt;</span>n) <span style="color:#069;font-weight:bold">break</span>;<span style="color:#09f;font-style:italic">//符合条件的终点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k<span style="color:#555">=</span>i;k<span style="color:#555">&lt;=</span>j;<span style="color:#555">++</span>k)<span style="color:#09f;font-style:italic">//枚举最优分割点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            dp[i][j]<span style="color:#555">=</span>min(dp[i][j],dp[i][k]<span style="color:#555">+</span>dp[k<span style="color:#555">+</span><span style="color:#f60">1</span>][j]<span style="color:#555">+</span>w[i][j]);<span style="color:#09f;font-style:italic">//状态转移方程
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>【区间DP优化模板】$O(n^2)$ 空间换时间</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> len<span style="color:#555">=</span><span style="color:#f60">2</span>;len<span style="color:#555">&lt;=</span>n;len<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>;i<span style="color:#555">&lt;=</span>n;i<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>   <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> i<span style="color:#555">+</span>len<span style="color:#555">-</span><span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">if</span>(j<span style="color:#555">&gt;</span>n) <span style="color:#069;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>   <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> s[i][j<span style="color:#555">-</span><span style="color:#f60">1</span>];k<span style="color:#555">&lt;=</span>s[i<span style="color:#555">+</span><span style="color:#f60">1</span>][j];k<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>       <span style="color:#069;font-weight:bold">if</span>(dp[i][j]<span style="color:#555">&gt;</span>dp[i][k]<span style="color:#555">+</span>dp[k<span style="color:#555">+</span><span style="color:#f60">1</span>][j]<span style="color:#555">+</span>w[i][j]){
</span></span><span style="display:flex;"><span>   	dp[i][j]<span style="color:#555">=</span>dp[i][k]<span style="color:#555">+</span>dp[k<span style="color:#555">+</span><span style="color:#f60">1</span>][j]<span style="color:#555">+</span>w[i][j];
</span></span><span style="display:flex;"><span>   	s[i][j]<span style="color:#555">=</span>k;
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="树形dp">树形DP</h3>
<blockquote>
<p>给定一个有N个节点的树（通常是无根树，也就是有N-1条无向边）</p>
<p>我们可以从中任选一个节点为根节点，从而定义出每个节点的深度和每棵子树的根。在树上设计动态规划算法时，<strong>一般就以节点从深到浅（子树从小到大）的顺序作为DP的“阶段“。</strong>
在DP的状态表示中，<strong>第一维通常是节点编号（代表该节点为根的子树）</strong>
&mdash;-&gt;更多的时候采用递归的方式进行树形动态规划。<strong>对于每个节点x，先递归在它的每个子节点上进行DP，在回溯时，从子节点向节点x进行状态转移</strong></p>
</blockquote>
<p>【典型例题】</p>
<blockquote>
<p>P1352 没有上司的舞会</p>
<blockquote>
<p><a href="https://www.luogu.com.cn/problem/P1352">https://www.luogu.com.cn/problem/P1352</a></p>
</blockquote>
</blockquote>
<blockquote>
<p>思考方式：【用递归处理的方式处理树形DP会更好】</p>
<p>1.状态表示$f[u][0]表示从所有以u为根的点开始选，并且不选u的方案$</p>
<p>​				$f[u][1]表示从所有以u为根的点开始选，并且选择u的方案$
​	属性：求取其max最大值</p>
<p>2.状态计算
从根节点开始进行枚举，可以用存图的方式存下树图，存图时注意记录一下是否是根节点（也就是该点是否有父节点）
递归处理的时候记得把u的子节点都递归处理一下，因为u的子节点不止一个撒</p>
<p>​			$f[u][0] += max(f[j][0], f[j][1])$ //如果不选u的话，u的子节点j：可以选也可以不选有两种情况，取最大的情况
​	 	  $f[u][1] += f[j][0]$​  //如果选u的话 那么u的子节点肯定都不能选，只有一种情况</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">6100</span>;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> h[N],e[N],ne[N],idx;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> f[N][N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> d[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">bool</span> has_parent[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">add</span>(<span style="color:#078;font-weight:bold">int</span> a, <span style="color:#078;font-weight:bold">int</span> b)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    e[idx] <span style="color:#555">=</span> b;
</span></span><span style="display:flex;"><span>    ne[idx] <span style="color:#555">=</span> h[a];
</span></span><span style="display:flex;"><span>    h[a] <span style="color:#555">=</span> idx<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">dfs</span>(<span style="color:#078;font-weight:bold">int</span> u)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    f[u][<span style="color:#f60">1</span>] <span style="color:#555">=</span> d[u];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> h[u]; i <span style="color:#555">!=</span> <span style="color:#555">-</span><span style="color:#f60">1</span>; i <span style="color:#555">=</span> ne[i])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> e[i];
</span></span><span style="display:flex;"><span>        dfs(j);
</span></span><span style="display:flex;"><span>        f[u][<span style="color:#f60">0</span>] <span style="color:#555">+=</span> max(f[j][<span style="color:#f60">0</span>], f[j][<span style="color:#f60">1</span>]);
</span></span><span style="display:flex;"><span>        f[u][<span style="color:#f60">1</span>] <span style="color:#555">+=</span> f[j][<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ios<span style="color:#555">::</span>sync_with_stdio(<span style="color:#366">false</span>);
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> n;
</span></span><span style="display:flex;"><span>    memset(h, <span style="color:#555">-</span><span style="color:#f60">1</span>, <span style="color:#069;font-weight:bold">sizeof</span> h);
</span></span><span style="display:flex;"><span>    memset(has_parent, <span style="color:#366">false</span>, <span style="color:#069;font-weight:bold">sizeof</span> has_parent);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>) cin <span style="color:#555">&gt;&gt;</span> d[i];
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> n; i <span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> in,to;
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> in <span style="color:#555">&gt;&gt;</span> to;
</span></span><span style="display:flex;"><span>        add(to,in);
</span></span><span style="display:flex;"><span>        has_parent[in] <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> root <span style="color:#555">=</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(has_parent[root] <span style="color:#555">==</span> <span style="color:#366">true</span>) root<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>    dfs(root);
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> max(f[root][<span style="color:#f60">0</span>], f[root][<span style="color:#f60">1</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="状态压缩dp">状态压缩DP</h3>
<blockquote>
<p>前置知识：<strong>位运算</strong></p>
</blockquote>
<blockquote>
<p><strong>n &lt;= 20或者 n*m &lt;= 100才能使用，否则时间复杂度可能会过高</strong> 如果题目有提到这样的数据范围，要提高警惕，大概率是状压DP</p>
</blockquote>
<blockquote>
<p>可以去解决NP问题，如TSP问题</p>
<p>若集合大小不超过N，集合中每个元素都是小于K的自然数，则我们可以把这个集合看作一个N位K进制数，以一个[0,K^N-1]之间的十进制整数的形式作为DP状态压缩的一维
<strong>把集合转化为整数记录在Dp状态中的一类算法</strong>，被称为状态压缩动态规划</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>【位运算相关知识引入】
</span></span><span style="display:flex;"><span>n &lt;&lt; 1 表示n*2
</span></span><span style="display:flex;"><span>n &gt;&gt; 1 表示n/2
</span></span><span style="display:flex;"><span>n &lt;&lt; m 表示n*2^m
</span></span><span style="display:flex;"><span>n &gt;&gt; m 表示n/2^m
</span></span><span style="display:flex;"><span>(n &amp; 1) == 1 判断奇偶性
</span></span><span style="display:flex;"><span>-----------------------
</span></span><span style="display:flex;"><span>int A,B //两个集合
</span></span><span style="display:flex;"><span>int c 新的元素
</span></span><span style="display:flex;"><span>A |= 1 &lt;&lt; c 将c插入到A集合中
</span></span><span style="display:flex;"><span>A &amp;=~(1 &lt;&lt; c)  在集合中删除c
</span></span><span style="display:flex;"><span>A ^= 1 &lt;&lt; c 在集合中删除c，明确已知A中含c
</span></span><span style="display:flex;"><span>a &amp; (-a)  lowbit A的计算
</span></span><span style="display:flex;"><span>A = 0  将集合置为0
</span></span><span style="display:flex;"><span>A | B 并集
</span></span><span style="display:flex;"><span>A &amp; B 交集
</span></span><span style="display:flex;"><span>int si = 15 集合的大小
</span></span><span style="display:flex;"><span>int all = (1 &lt;&lt; si) - 1 全集
</span></span><span style="display:flex;"><span>all ^ A  全集里面求一个子集
</span></span><span style="display:flex;"><span>(A&amp;B) == B 说明B是A的子集
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(A &amp; (1 &lt;&lt; i))//获取集合A的第i位的数据(0 or 1)
</span></span><span style="display:flex;"><span>//枚举所有子集
</span></span><span style="display:flex;"><span>for(int i = 0; i &lt;= all; i ++) ;
</span></span><span style="display:flex;"><span>//枚举某一个集合的所有子集
</span></span><span style="display:flex;"><span>int subset = A
</span></span><span style="display:flex;"><span>do
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	subset = (subset - 1)&amp;A;
</span></span><span style="display:flex;"><span>}while(subset != A)
</span></span><span style="display:flex;"><span>//枚举一个集合中的某一元素有多少个
</span></span><span style="display:flex;"><span>int cnt = 0;
</span></span><span style="display:flex;"><span>for(int i = 0; i &lt; si; i ++)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	if(A &amp; (1 &lt;&lt; i)) cnt ++;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	cnt;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>或者
</span></span><span style="display:flex;"><span>for(int i = A; i; i &gt;&gt;= 1)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	cnt += i&amp;1;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>//
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>lowbit操作  a&amp;(-a)
</span></span><span style="display:flex;"><span>取出二进制中最后一个1以后的结果
</span></span><span style="display:flex;"><span>如：
</span></span><span style="display:flex;"><span>01101011  -&gt;  1
</span></span><span style="display:flex;"><span>01100100  -&gt;  100
</span></span><span style="display:flex;"><span>10001000  -&gt;  1000
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>highbit操作
</span></span><span style="display:flex;"><span>取出二进制中的最高位
</span></span><span style="display:flex;"><span>inline int highbit(int x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	int p = low_bit(x);
</span></span><span style="display:flex;"><span>	while(p != x) x -= p, p = low_bit(x);
</span></span><span style="display:flex;"><span>	return p;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>判断一个数是否是2的幂
</span></span><span style="display:flex;"><span>int powerof2(int x)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	return x &amp;&amp; !(x &amp; (x - 1));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>问题剖析</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>【经典问题】
</span></span><span style="display:flex;"><span> TSP问题（旅行商问题）是指旅行家要旅行n个城市，要求各个城市经历且仅经历一次然后回到出发城市，并要求所走的路程最短。
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>TSP状态转移方程：</p>
<p>用 V’ 表示一个点的集合，假设从顶点 s 出发， d ( i , V’ ) 表示当前到达顶点 i，经过 V’ 集合中所有顶点一次的最小花费。</p>
<ol>
<li>当 V’ 为仅包含起点的集合，也就是：d ( s , { s } ) = 0 ;</li>
<li>其他情况，则对子问题求最优解。需在 V’ 这个城市集合中，尝试每一个城市结点，并求出最优解。
$d(i,V&rsquo;+{i})=\min_{k\in V&rsquo;}\left{d(k,V&rsquo;)+C_{ki}\right}$​</li>
<li>最后的求解方式为:
$Answer = \min_{i\in S}\left{ d(i,S)+c_{is} \right}\quad其中S为所有点的集合$</li>
</ol>
</blockquote>
<p><code>状态转移方程就是上文所述，但是还有一个问题，我们如何存储点集这个状态？显然是无法用set作为dp数组的下标的。因此，这里我们使用状态压缩，也就是用一个整数来表示一个点集</code></p>
<p>时间复杂度 $o(n^22^n)$     空间复杂度 $o(n^22^n)$   ​</p>
<blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>input.txt
</span></span><span style="display:flex;"><span>16
</span></span><span style="display:flex;"><span>A 2.5 4.0
</span></span><span style="display:flex;"><span>B 1.2 -2.4
</span></span><span style="display:flex;"><span>C 8.7 1.2
</span></span><span style="display:flex;"><span>D 3.6 12.1
</span></span><span style="display:flex;"><span>E -5.5 0.94
</span></span><span style="display:flex;"><span>F -6.6 -12.6
</span></span><span style="display:flex;"><span>G 0.18 5.219
</span></span><span style="display:flex;"><span>H 12.5 14.3609
</span></span><span style="display:flex;"><span>I 22.5 -5.26
</span></span><span style="display:flex;"><span>J 1.61 4.5
</span></span><span style="display:flex;"><span>K 2.1 -5.6
</span></span><span style="display:flex;"><span>L 0 25
</span></span><span style="display:flex;"><span>M 9.2 -32
</span></span><span style="display:flex;"><span>N -1 7
</span></span><span style="display:flex;"><span>O -5 -8
</span></span><span style="display:flex;"><span>P 21 35
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;bits/stdc++.h&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#define sqr(x) ((x) * (x))
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> LL;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> maxn <span style="color:#555">=</span> <span style="color:#f60">18</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">double</span> PI <span style="color:#555">=</span> acos(<span style="color:#555">-</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> mod <span style="color:#555">=</span> <span style="color:#f60">1e9</span> <span style="color:#555">+</span> <span style="color:#f60">7</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> INF <span style="color:#555">=</span> <span style="color:#f60">0x3f3f3f3f</span>;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 定义变量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> type; <span style="color:#09f;font-style:italic">// type == 1 满秩矩阵格式, type == 2 二维坐标式
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> s;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> N; <span style="color:#09f;font-style:italic">// 城市结点数量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> init_point;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">double</span> dp[<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> maxn][maxn];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 动态规划状态数组dp[i][j]，i表示集合V’，j表示当前到达的城市结点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">double</span> dis[maxn][maxn]; <span style="color:#09f;font-style:italic">// 两个城市结点之间的距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> path[<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> maxn][maxn]; <span style="color:#09f;font-style:italic">//路径
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">double</span> ans;
</span></span><span style="display:flex;"><span>vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> ans_path;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// 定义结构体
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">struct</span> <span style="color:#0a8;font-weight:bold">vertex</span> 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">double</span> x, y; <span style="color:#09f;font-style:italic">// 城市结点的坐标
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    string id;   <span style="color:#09f;font-style:italic">// 城市结点的id
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">input</span>() {
</span></span><span style="display:flex;"><span>        cin <span style="color:#555">&gt;&gt;</span> id;
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%lf %lf&#34;</span>, <span style="color:#555">&amp;</span>x, <span style="color:#555">&amp;</span>y);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}node[maxn];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//距离函数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">double</span> <span style="color:#c0f">Dist</span>(<span style="color:#069;font-weight:bold">const</span> vertex <span style="color:#555">&amp;</span>a, <span style="color:#069;font-weight:bold">const</span> vertex <span style="color:#555">&amp;</span>b) {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> sqrt(sqr(a.x <span style="color:#555">-</span> b.x) <span style="color:#555">+</span> sqr(a.y <span style="color:#555">-</span> b.y));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">init</span>() { <span style="color:#09f;font-style:italic">// 数据初始化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>N);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> N; i<span style="color:#555">++</span>) <span style="color:#09f;font-style:italic">//存储一下输入
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        node[i].input();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> N; i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> N; j<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>            dis[i][j] <span style="color:#555">=</span> Dist(node[i], node[j]); <span style="color:#09f;font-style:italic">// 计算城市之间的距离
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> N); i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">0</span>; j <span style="color:#555">&lt;</span> N; j<span style="color:#555">++</span>)
</span></span><span style="display:flex;"><span>            dp[i][j] <span style="color:#555">=</span> INF,path[i][j].clear();
</span></span><span style="display:flex;"><span>    } <span style="color:#09f;font-style:italic">//初始化，除了dp[1][0]，其余值都为INF
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    ans <span style="color:#555">=</span> INF;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//复杂度 2^N * N^2
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//状态压缩
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">slove</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> M <span style="color:#555">=</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> N);
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// M就是第四部分所说的V’状态总数，1&lt;&lt;N表示2^N，总共有2^N种状态
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    dp[<span style="color:#f60">1</span>][<span style="color:#f60">0</span>] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    path[<span style="color:#f60">1</span>][<span style="color:#f60">0</span>].push_back(<span style="color:#f60">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 假设固定出发点为0，从0出发回到0的花费为0。TSP只要求是一个环路，所以出发点可以任选
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;</span> M; i<span style="color:#555">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// 枚举V’的所有状态
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;</span> N; j<span style="color:#555">++</span>) { <span style="color:#09f;font-style:italic">//枚举本层情况
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#09f;font-style:italic">// 选择下一个加入集合的城市
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&amp;</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j)) <span style="color:#09f;font-style:italic">//如果集合i的第j位已经是1，则说明j已经在集合内了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">// 城市已经存在于V’之中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>(i <span style="color:#555">&amp;</span> <span style="color:#f60">1</span>)) <span style="color:#09f;font-style:italic">// 如果i是0的话，也就说固定在为0的城市出发的话
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#09f;font-style:italic">// 出发城市固定为0号城市
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> k <span style="color:#555">=</span> <span style="color:#f60">0</span>; k <span style="color:#555">&lt;</span> N; k<span style="color:#555">++</span>) { <span style="color:#09f;font-style:italic">//枚举上一层的情况，当上一层对本层有影响时
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#09f;font-style:italic">// 在V’这个城市集合中尝试每一个结点，并求出最优解
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&amp;</span> (<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> k)) { <span style="color:#09f;font-style:italic">//k在集合i中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                    <span style="color:#09f;font-style:italic">// 确保k已经在集合之中并且是上一步转移过来的结点
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                    <span style="color:#069;font-weight:bold">if</span>(dp[i][k] <span style="color:#555">+</span> dis[k][j] <span style="color:#555">&lt;</span> dp[(<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j) <span style="color:#555">|</span> i][j]){
</span></span><span style="display:flex;"><span>                        dp[(<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j) <span style="color:#555">|</span> i][j] <span style="color:#555">=</span> dp[i][k] <span style="color:#555">+</span> dis[k][j];
</span></span><span style="display:flex;"><span>                        path[(<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j) <span style="color:#555">|</span> i][j] <span style="color:#555">=</span> path[i][k];
</span></span><span style="display:flex;"><span>                        path[(<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j) <span style="color:#555">|</span> i][j].push_back(j);
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                    dp[(<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j) <span style="color:#555">|</span> i][j] <span style="color:#555">=</span> min(dp[(<span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> j) <span style="color:#555">|</span> i][j],
</span></span><span style="display:flex;"><span>                                              dp[i][k] <span style="color:#555">+</span> dis[k][j]); <span style="color:#09f;font-style:italic">// 有影响则进行转移方程
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>                } <span style="color:#09f;font-style:italic">// 将j点加入到i集合中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> N; i<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(dp[M <span style="color:#555">-</span> <span style="color:#f60">1</span>][i] <span style="color:#555">+</span> dis[i][<span style="color:#f60">0</span>] <span style="color:#555">&lt;</span> ans){
</span></span><span style="display:flex;"><span>            ans <span style="color:#555">=</span> dp[M <span style="color:#555">-</span> <span style="color:#f60">1</span>][i] <span style="color:#555">+</span> dis[i][<span style="color:#f60">0</span>];
</span></span><span style="display:flex;"><span>            ans_path <span style="color:#555">=</span> path[M<span style="color:#555">-</span><span style="color:#f60">1</span>][i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">// 因为固定了出发点，所以要加上到城市0的距离。另外要从所有的完成整个环路的集合V’中选择，完成最后的转移
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>() {
</span></span><span style="display:flex;"><span>    init();
</span></span><span style="display:flex;"><span>    slove();
</span></span><span style="display:flex;"><span>    cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;TSP路径长度: &#34;</span> <span style="color:#555">&lt;&lt;</span> ans <span style="color:#555">&lt;&lt;</span> endl <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;TSP回路： &#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>; i <span style="color:#555">&lt;</span> (<span style="color:#078;font-weight:bold">int</span>)ans_path.size(); i<span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(i) cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#39; &#39;</span>;
</span></span><span style="display:flex;"><span>        cout <span style="color:#555">&lt;&lt;</span> node[ans_path[i]].id;
</span></span><span style="display:flex;"><span>    }cout <span style="color:#555">&lt;&lt;</span> endl;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>【状压DP的常用模板】</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> maxn <span style="color:#555">=</span> <span style="color:#f60">1</span> <span style="color:#555">&lt;&lt;</span> n; <span style="color:#09f;font-style:italic">//规定状态的上界
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">0</span>;i <span style="color:#555">&lt;</span> maxn; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (i <span style="color:#555">&amp;</span> (i <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>)) <span style="color:#069;font-weight:bold">continue</span>;<span style="color:#09f;font-style:italic">//如果i情况不成立就忽略
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    Type[<span style="color:#555">++</span>top] <span style="color:#555">=</span> i;<span style="color:#09f;font-style:italic">//记录情况i到Type数组中
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> top; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (fit(situation[<span style="color:#f60">1</span>], Type[i]))
</span></span><span style="display:flex;"><span>        dp[<span style="color:#f60">1</span>][Type[i]] <span style="color:#555">=</span> <span style="color:#f60">1</span>;<span style="color:#09f;font-style:italic">//初始化第一层
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">2</span>;i <span style="color:#555">&lt;=</span> <span style="color:#a00;background-color:#faa">层数</span>(dp上界); i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> l <span style="color:#555">=</span> <span style="color:#f60">1</span>; l <span style="color:#555">&lt;=</span> top; l <span style="color:#555">++</span>)<span style="color:#09f;font-style:italic">//穷举本层情况
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> j <span style="color:#555">=</span> <span style="color:#f60">1</span>; j <span style="color:#555">&lt;=</span> top; j <span style="color:#555">++</span>)<span style="color:#09f;font-style:italic">//穷举上一层情况(上一层对本层有影响时)
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#069;font-weight:bold">if</span> (situation[i], Type[l]<span style="color:#a00;background-color:#faa">和</span>Type[j]<span style="color:#a00;background-color:#faa">符合题意</span>)
</span></span><span style="display:flex;"><span>                dp[i][l] <span style="color:#555">=</span> dp[i][l] <span style="color:#555">+</span> dp[i<span style="color:#555">-</span><span style="color:#f60">1</span>][j];<span style="color:#09f;font-style:italic">//改变当前层(i)的状态(l)的方案种数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> top; i <span style="color:#555">++</span>) ans <span style="color:#555">+=</span> dp[<span style="color:#a00;background-color:#faa">上界</span>][Type[i]];
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="树状数组">树状数组</h3>
<p>用数组来模拟树形结构，和Trie树的构造方式有类似之处</p>
<blockquote>
<p>功能：【可以解决大部分基于区间上的更新以及求和问题】
1.快速求前缀和（$O(logn)$
2.修改某一个数 ($O(logn)$)</p>
<blockquote>
<p>之前所学的方法：
1.直接用数组存下来：$O(n) 、O(1)$
2.前缀和数组$O(1)、O(n)$</p>
</blockquote>
</blockquote>
<p>树状数组：是一种基于二进制的方法实现的。</p>
<!-- <img src="./wdcs.assets/image-20220326171121845.png" alt="image-20220326171121845" style="zoom:50%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqftv-0.png" alt="20220326171121845"></p>
<p>​																			</center>(传统的树型结构)</center></p>
<p>对于树状数组</p>
<!-- <img src="./wdcs.assets/image-20220326171310610.png" alt="image-20220326171310610" style="zoom:50%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqrq0-0.png" alt="20220326171310610"></p>
<blockquote>
<p>黑色数组表示原来的数组 A[i]
红色的结构就表示建立的树状数组C[i] —— $C_x表示以x结尾的，长度为2^k的区间和$</p>
<p>可以用二进制表示</p>
<p>$x= 2^{i^k}+2^{i^{k-1}}+&hellip;+2^{i}$
显然有$i^k&gt;i^{i^{k-1}}&gt;&hellip;&gt;i  且k≤logx$</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>有：
</span></span><span style="display:flex;"><span>C[1] = A[1];
</span></span><span style="display:flex;"><span>C[2] = A[1] + A[2];
</span></span><span style="display:flex;"><span>C[3] = A[3];
</span></span><span style="display:flex;"><span>C[4] = A[1] + A[2] + A[3] + A[4];
</span></span><span style="display:flex;"><span>C[5] = A[5];
</span></span><span style="display:flex;"><span>C[6] = A[5] + A[6];
</span></span><span style="display:flex;"><span>C[7] = A[7];
</span></span><span style="display:flex;"><span>C[8] = A[1] + A[2] + A[3] + A[4] + A[5] + A[6] + A[7] + A[8];
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>发现其规律：$C[i]=A[i-2^k+1]+A[i-2^k+2]+&hellip;+A[i]$  k为i的二进制中从最低为到高位连续0的长度(也就是最后一个1的位置)&mdash;&gt; lowbit()</p>
<p>$[R-lowbit(R)+1, R]$ &mdash;&gt;区间&mdash;&gt;这就表示我们可以用一个数组来表示一个区间了。</p>
</blockquote>
<blockquote>
<p>$lowbit操作$</p>
<p>这里利用的负数的存储特性，负数是以补码存储的，对于整数运算 x&amp;(-x)有
● 当x为0时，即 0 &amp; 0，结果为0；
●当x为奇数时，最后一个比特位为1，取反加1没有进位，故x和-x除最后一位外前面的位正好相反，按位与结果为0。结果为1。
●当x为偶数，且为2的m次方时，x的二进制表示中只有一位是1（从右往左的第m+1位），其右边有m位0，故x取反加1后，从右到左第有m个0，第m+1位及其左边全是1。这样，x&amp; (-x) 得到的就是x。
●当x为偶数，却不为2的m次方的形式时，可以写作x= y * (2^k)。其中，y的最低位为1。实际上就是把x用一个奇数左移k位来表示。这时，x的二进制表示最右边有k个0，从右往左第k+1位为1。当对x取反时，最右边的k位0变成1，第k+1位变为0；再加1，最右边的k位就又变成了0，第k+1位因为进位的关系变成了1。左边的位因为没有进位，正好和x原来对应的位上的值相反。二者按位与，得到：第k+1位上为1，左边右边都为0。结果为2^k。
总结一下：x&amp;(-x)，当x为0时结果为0；x为奇数时，结果为1；x为偶数时，结果为x中2的最大次方的因子。</p>
</blockquote>
<!-- <img src="./wdcs.assets/image-20220326183644190.png" alt="image-20220326183644190" style="zoom:50%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqje5-0.png" alt="20220326183644190"></p>
<h4 id="建立树状数组">建立树状数组</h4>
<blockquote>
<p>通过父节点去找子节点：
$C[i] = A[i-2^k+1]+A[i-2^k+2]+&hellip;+A[i]$ 每次将lowbit的1去掉累加</p>
<p>通过子节点去找父节点：
$A[i]包含于C[i+2^k]、C[(i+2^k)+2^k]&hellip;$ //是一个迭代的过程，修改一次父节点在修改一次父节点，最多也就只需要修改logx次</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//修改:
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(i<span style="color:#555">=</span>x;i<span style="color:#555">&lt;=</span>n;i<span style="color:#555">+=</span>lowbit(i)) tr[i]<span style="color:#555">+=</span>c;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//查询
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(i<span style="color:#555">=</span>x;i<span style="color:#555">-=</span>lowbit(i)) tr[i]<span style="color:#555">-=</span>c;
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N],c[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lowbit</span>(<span style="color:#078;font-weight:bold">int</span> x){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> x<span style="color:#555">&amp;</span>(<span style="color:#555">-</span>x);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">update</span>(<span style="color:#078;font-weight:bold">int</span> i,<span style="color:#078;font-weight:bold">int</span> k){ <span style="color:#09f;font-style:italic">//在i位置加上k
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&lt;=</span> n){
</span></span><span style="display:flex;"><span>        c[i] <span style="color:#555">+=</span> k;
</span></span><span style="display:flex;"><span>      <span style="color:#09f;font-style:italic">//c[i] = max(c[i],k); 如果是求单调最大值的话
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        i <span style="color:#555">+=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">getsum</span>(<span style="color:#078;font-weight:bold">int</span> i){ <span style="color:#09f;font-style:italic">//求a[1-i]的和  查询是从后往前
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>	<span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>        res <span style="color:#555">+=</span> c[i];
</span></span><span style="display:flex;"><span>      <span style="color:#09f;font-style:italic">//res = max(res, c[i]); //同样
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        i <span style="color:#555">-=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>==<strong>树状数组的原数组必须从1开始编号</strong>==</p>
<p>例题：https://www.acwing.com/problem/content/243/</p>
<p>数据结构类型的题的难点就在于如何去转化成我们数据结构所能解决的问题</p>
<blockquote>
<p>原则上就是转化成修改某一个数/求某一区间的前缀和。</p>
</blockquote>
<blockquote>
<p>这一题的话，注意如果n的范围爆int的话，记得需要进行离散化处理</p>
<p>不妨用一个数组集合来实现，以每一个点作为下端点来讨论
讨论一下：对于 $y_k$ 思考左边有多少个小于它，右边有多少个小于它
以及 左边有多少个大于它，右边有多少个大于它  相乘即可
&mdash;》通过引入集合的方式巧妙的将其转化为了求前缀和的方法！！！【思维之妙，妙不可言！！！】</p>
<!-- > <img src="./wdcs.assets/1D6F10CE5ABA917426B10D87B59B71D5.png" alt="img" style="zoom:30%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqeai-0.png" alt="1D6F10CE5ABA917426B10D87B59B71D5"></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;iostream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;cstring&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;algorithm&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">2000010</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> LL;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[N],c[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> big[N],small[N];
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//small[i]表示左边比第i个位置小的数的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//big[i]表示左边比第i个位置大的数的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//不是1~n的话，需要离散化
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lowbit</span>(<span style="color:#078;font-weight:bold">int</span> x)  <span style="color:#09f;font-style:italic">// 返回末尾的1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> x <span style="color:#555">&amp;</span> <span style="color:#555">-</span>x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">update</span>(<span style="color:#078;font-weight:bold">int</span> i, <span style="color:#078;font-weight:bold">int</span> k)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&lt;=</span> n){
</span></span><span style="display:flex;"><span>        c[i] <span style="color:#555">+=</span> k;
</span></span><span style="display:flex;"><span>        i <span style="color:#555">+=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">getsum</span>(<span style="color:#078;font-weight:bold">int</span> i)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>        res <span style="color:#555">+=</span> c[i];
</span></span><span style="display:flex;"><span>        i <span style="color:#555">-=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//把横坐标上的每一点当作中间端点进行讨论
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d&#34;</span>, <span style="color:#555">&amp;</span>n);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%lld&#34;</span>, <span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//从左往右一遍扫一遍进行预处理
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//从左向右，依次统计每个位置左边比第i个数y小的数的个数、以及大的数的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> y <span style="color:#555">=</span> a[i]; <span style="color:#09f;font-style:italic">//第i个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        big[i] <span style="color:#555">=</span> getsum(n) <span style="color:#555">-</span> getsum(y); <span style="color:#09f;font-style:italic">//前面已经加入到树状数组中的数中进行统计，左边比第i个数大的个数，
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">//也就是前面已经加入到树状数组的值中，统计[y+1,n]之间的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        small[i] <span style="color:#555">=</span> getsum(y <span style="color:#555">-</span> <span style="color:#f60">1</span>);<span style="color:#09f;font-style:italic">//前面已经加入到树状数组中的数中，左边比第i个数小的个数，
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">//也就是前面已经加入到树状数组的值中，统计[1,y-1]之间的个数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        update(y, <span style="color:#f60">1</span>);<span style="color:#09f;font-style:italic">//将这第i个数加入到树状数组当中，也就是a[i]出现了一次
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//然后从右往左一遍
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    memset(c, <span style="color:#f60">0</span>, <span style="color:#069;font-weight:bold">sizeof</span> c);
</span></span><span style="display:flex;"><span>    LL ans1<span style="color:#555">=</span><span style="color:#f60">0</span>,ans2<span style="color:#555">=</span><span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> n ; i; i <span style="color:#555">--</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#078;font-weight:bold">int</span> y <span style="color:#555">=</span> a[i];
</span></span><span style="display:flex;"><span>        ans1 <span style="color:#555">+=</span> big[i] <span style="color:#555">*</span> (LL)(getsum(n) <span style="color:#555">-</span> getsum(y));
</span></span><span style="display:flex;"><span>        ans2 <span style="color:#555">+=</span> small[i] <span style="color:#555">*</span> (LL)(getsum(y<span style="color:#555">-</span><span style="color:#f60">1</span>));
</span></span><span style="display:flex;"><span>        update(y, <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    printf(<span style="color:#c30">&#34;%lld %lld&#34;</span>, ans1, ans2);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="关于建树方面的优化">关于建树方面的优化</h4>
<blockquote>
<p>我们可以先把前缀和数组处理好</p>
<p>然后 $C[x]=S[x]-S[x-lowbit(x)]$  &ndash;&gt;$O(n)$</p>
</blockquote>
<p><strong>进一步思考</strong></p>
<ul>
<li>单点更新，单点查询——普通数组便可实现</li>
<li>单点更新，区间查询——前缀和/树状数组/线段树</li>
<li>区间更新，单点查询——差分/差分建立树状数组</li>
<li>区间更新，区间查询——</li>
</ul>
<h4 id="对于区间更新-单点查询的树状数组">对于区间更新，单点查询的树状数组</h4>
<blockquote>
<p>对于区间更新，我们类比前缀和和差分
这个时候，我们需要改变一下建树的方法，而不能和之前一样根据数据建树，应该引入差分建树方法。</p>
</blockquote>
<p>规定$A[0] = 0$
则有 $A[i]=\sum_{j=1}^i;\D[j]=A[j]-A[j-1]$</p>
<p>&ndash;&gt; 利用差分的思想建树</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lowbit</span>(<span style="color:#078;font-weight:bold">int</span> x){
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">return</span> x <span style="color:#555">&amp;</span> (<span style="color:#555">-</span>x);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">update</span>(<span style="color:#078;font-weight:bold">int</span> i, <span style="color:#078;font-weight:bold">int</span> k){
</span></span><span style="display:flex;"><span>	<span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&lt;=</span> n){
</span></span><span style="display:flex;"><span>        c[i] <span style="color:#555">+=</span> k;
</span></span><span style="display:flex;"><span>        i <span style="color:#555">+=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">getsum</span>(<span style="color:#078;font-weight:bold">int</span> i){
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>        res <span style="color:#555">+=</span> c[i];
</span></span><span style="display:flex;"><span>        i <span style="color:#555">-=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//区别在于建树过程
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//树状数组还是得从1开始编号
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">for</span>(<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span>){
</span></span><span style="display:flex;"><span>    cin <span style="color:#555">&gt;&gt;</span> a[i];
</span></span><span style="display:flex;"><span>    update(i, a[i] <span style="color:#555">-</span> a[i <span style="color:#555">-</span> <span style="color:#f60">1</span>]); <span style="color:#09f;font-style:italic">//输入初值的时候也相当于更新了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>[x,y] <span style="color:#a00;background-color:#faa">区间加上</span>k;
</span></span><span style="display:flex;"><span>update(x, k);
</span></span><span style="display:flex;"><span>update(y<span style="color:#555">+</span><span style="color:#f60">1</span>, <span style="color:#555">-</span>k);
</span></span><span style="display:flex;"><span>sum <span style="color:#555">=</span> getsum(i);
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="对于区间更新-区间查询的树状数组">对于区间更新，区间查询的树状数组</h4>
<p>$b数组的前缀和\sum_{i=1}^xb[i]就是经过这些指令后a[x]增加的值。\ 那么序列a的前缀和a[1 -&gt; x]整体增加的值就是 \ \sum_{i=1}^x \sum_{j=1}^i b[j] = \sum_{i=1}^x(x-i+1)<em>b[i]=\sum_{i=1}^xb[i]-\sum_{i=1}^xi</em>b[i]$</p>
<p>这种分离包含有多个变量的项，使公式中不同变量之间相互独立的思想非常重要！！</p>
<p>故此对于区间查询，我可以再新建一个树状数组$维护i*b[i]的前缀和$</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>对于每一个 C l r d操作
</span></span><span style="display:flex;"><span>1.在树状数组C0中，把位置l上加上d
</span></span><span style="display:flex;"><span>2.在树状数组c0中，把位置r+1上减去d
</span></span><span style="display:flex;"><span>3.在树状数组c1中，把位置l上的数加上 l*d
</span></span><span style="display:flex;"><span>4.在树状数组c1中，把位置r+1上的数减去 (r+1)*d
</span></span><span style="display:flex;"><span>对于操作 Q l r 区间查询，我们还需要建立一个数组sum来存储序列a的原始前缀和
</span></span><span style="display:flex;"><span>拆成1~r和1~l-1的形式：
</span></span><span style="display:flex;"><span>(sum[r] + (r+1)*getsum(c0,r)-getsum(c1,r) - (sum[l-1]+l*getsum(c0,l-1)-getsum(c1,l-1)))
</span></span></code></pre></td></tr></table>
</div>
</div><!-- <img src="./wdcs.assets/image-20220330202333590.png" alt="image-20220330202333590" style="zoom:50%;" /> -->
<p><img src="https://pve.digikamc.cn:8343/i/2024/11/25/meqmj5-0.png" alt="20220330202333590"></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;iostream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;cstring&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;algorithm&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">int</span> N <span style="color:#555">=</span> <span style="color:#f60">100010</span>;
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">typedef</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> ll;
</span></span><span style="display:flex;"><span>ll a[N],c0[N],c1[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> n,m;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//ll s[N]; ---&gt; 可以用s[N]表示原来数组的前缀和，当然也可以把输入初值直接当作更新了值
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>ll s[N];
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">lowbit</span>(<span style="color:#078;font-weight:bold">int</span> x)  <span style="color:#09f;font-style:italic">// 返回末尾的1
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> x <span style="color:#555">&amp;</span> <span style="color:#555">-</span>x;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">update</span>(ll c[], <span style="color:#078;font-weight:bold">int</span> i,<span style="color:#078;font-weight:bold">int</span> k){
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&lt;=</span> n){
</span></span><span style="display:flex;"><span>        c[i] <span style="color:#555">+=</span> k;
</span></span><span style="display:flex;"><span>        i <span style="color:#555">+=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>ll <span style="color:#c0f">getsum</span>(ll c[], <span style="color:#078;font-weight:bold">int</span> i){
</span></span><span style="display:flex;"><span>    ll res <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(i <span style="color:#555">&gt;</span> <span style="color:#f60">0</span>){
</span></span><span style="display:flex;"><span>        res <span style="color:#555">+=</span> c[i];
</span></span><span style="display:flex;"><span>        i <span style="color:#555">-=</span> lowbit(i);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    scanf(<span style="color:#c30">&#34;%d%d&#34;</span>, <span style="color:#555">&amp;</span>n, <span style="color:#555">&amp;</span>m);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span> (<span style="color:#078;font-weight:bold">int</span> i <span style="color:#555">=</span> <span style="color:#f60">1</span>; i <span style="color:#555">&lt;=</span> n; i <span style="color:#555">++</span> ){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%lld&#34;</span>, <span style="color:#555">&amp;</span>a[i]);
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//update(c0,i,a[i] - a[i-1]);
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        s[i] <span style="color:#555">=</span> a[i] <span style="color:#555">+</span> s[i<span style="color:#555">-</span><span style="color:#f60">1</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">char</span> op;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> x,l,r;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span> (m <span style="color:#555">--</span> ){
</span></span><span style="display:flex;"><span>        scanf(<span style="color:#c30">&#34;%s&#34;</span>, <span style="color:#555">&amp;</span>op);
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span>(op <span style="color:#555">==</span> <span style="color:#c30">&#39;C&#39;</span>){
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>, <span style="color:#555">&amp;</span>l, <span style="color:#555">&amp;</span>r, <span style="color:#555">&amp;</span>x);
</span></span><span style="display:flex;"><span>            update(c0,l,x);
</span></span><span style="display:flex;"><span>            update(c0,r<span style="color:#555">+</span><span style="color:#f60">1</span>,<span style="color:#555">-</span>x);
</span></span><span style="display:flex;"><span>            update(c1,l,l<span style="color:#555">*</span>x);
</span></span><span style="display:flex;"><span>            update(c1,r<span style="color:#555">+</span><span style="color:#f60">1</span>,<span style="color:#555">-</span>(r<span style="color:#555">+</span><span style="color:#f60">1</span>)<span style="color:#555">*</span>x);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">else</span>{
</span></span><span style="display:flex;"><span>            scanf(<span style="color:#c30">&#34;%d%d%d&#34;</span>, <span style="color:#555">&amp;</span>l, <span style="color:#555">&amp;</span>r, <span style="color:#555">&amp;</span>x);
</span></span><span style="display:flex;"><span>            ll ans <span style="color:#555">=</span> s[r] <span style="color:#555">+</span> (r<span style="color:#555">+</span><span style="color:#f60">1</span>)<span style="color:#555">*</span>getsum(c0,r)<span style="color:#555">-</span>getsum(c1,r);
</span></span><span style="display:flex;"><span>            ans <span style="color:#555">-=</span> s[l<span style="color:#555">-</span><span style="color:#f60">1</span>] <span style="color:#555">+</span> l<span style="color:#555">*</span>getsum(c0,l<span style="color:#555">-</span><span style="color:#f60">1</span>)<span style="color:#555">-</span>getsum(c1,l<span style="color:#555">-</span><span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>            printf(<span style="color:#c30">&#34;%lld</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>,ans);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="线段树">线段树</h3>
<p>主要函数 建立树 Build_tree、更新树 Update_tree、查询树 Query_tree</p>
<p>【递归方式】：建立树</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//建立树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">Build_tree</span>(<span style="color:#078;font-weight:bold">int</span> arr[], <span style="color:#078;font-weight:bold">int</span> tree[], <span style="color:#078;font-weight:bold">int</span> node, <span style="color:#078;font-weight:bold">int</span> start, <span style="color:#078;font-weight:bold">int</span> end)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(start <span style="color:#555">==</span> end) <span style="color:#09f;font-style:italic">//递归出口  //此处start、end是指在arr内的范围
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        						<span style="color:#09f;font-style:italic">//tree[]与node绑定，具体访问的结点位置
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        						<span style="color:#09f;font-style:italic">//这里表示已经到叶子节点了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        tree[node] <span style="color:#555">=</span> arr[end];
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span>; 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> (start <span style="color:#555">+</span> end) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> left_node <span style="color:#555">=</span> mid <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> right_node <span style="color:#555">=</span> mid <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    Build_tree(arr, tree, left_node, start, mid);
</span></span><span style="display:flex;"><span>    Build_tree(arr, tree, right_node, mid <span style="color:#555">+</span> <span style="color:#f60">1</span>, end);
</span></span><span style="display:flex;"><span>    tree[node] <span style="color:#555">=</span> tree[left_node] <span style="color:#555">+</span> tree[right_node];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//更新树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">Update</span>(<span style="color:#078;font-weight:bold">int</span> arr[], <span style="color:#078;font-weight:bold">int</span> tree[], <span style="color:#078;font-weight:bold">int</span> node, <span style="color:#078;font-weight:bold">int</span> start, <span style="color:#078;font-weight:bold">int</span> end, <span style="color:#078;font-weight:bold">int</span> idx, <span style="color:#078;font-weight:bold">int</span> val)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(start <span style="color:#555">==</span> end)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        arr[idx] <span style="color:#555">=</span> val;
</span></span><span style="display:flex;"><span>        tree[node]<span style="color:#555">=</span> val;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> (start <span style="color:#555">+</span> end) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> left_node <span style="color:#555">=</span> mid <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> right_node <span style="color:#555">=</span> mid <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(idx <span style="color:#555">&gt;=</span> start <span style="color:#555">&amp;&amp;</span> idx <span style="color:#555">&lt;=</span> mid)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Update(arr, tree, left_node, start, mid, idx, val);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Update(arr, tree, right_node, mid <span style="color:#555">+</span> <span style="color:#f60">1</span>, end, idx, val);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    tree[node] <span style="color:#555">=</span> tree[left_node] <span style="color:#555">+</span> tree[right_node];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//查询树
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">Query</span>(<span style="color:#078;font-weight:bold">int</span> arr[], <span style="color:#078;font-weight:bold">int</span> tree[], <span style="color:#078;font-weight:bold">int</span> node, <span style="color:#078;font-weight:bold">int</span> start, <span style="color:#078;font-weight:bold">int</span> end, <span style="color:#078;font-weight:bold">int</span> L, <span style="color:#078;font-weight:bold">int</span> R)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(R <span style="color:#555">&lt;</span> start <span style="color:#555">||</span> L <span style="color:#555">&gt;</span> end) <span style="color:#09f;font-style:italic">//极端情况下，如果区间L,R不在线段树的结点区间里面
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//每次都会到达叶子结点，时间复杂度变高，存在问题，判断条件应该为只要L,R在start和end范围之内即可
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span> ( start <span style="color:#555">&lt;=</span> L <span style="color:#555">&amp;&amp;</span> R <span style="color:#555">&lt;=</span> end)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> tree[node];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(start <span style="color:#555">==</span> end) <span style="color:#09f;font-style:italic">//直接到叶子结点的话
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> tree[node]; 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> start <span style="color:#555">+</span> end <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> left_node <span style="color:#555">=</span> node <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> right_node <span style="color:#555">=</span> node <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> sum_left <span style="color:#555">=</span> Query(arr, tree, left_node, start, mid, L, R);
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> sum_right <span style="color:#555">=</span> Quert(arr, tree, right_node, mid <span style="color:#555">+</span> <span style="color:#f60">1</span>, end, L, R);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> sum_left <span style="color:#555">+</span> sum_right;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>【深入讨论】 <a href="https://blog.csdn.net/zearot/article/details/48299459">https://blog.csdn.net/zearot/article/details/48299459</a></p>
<p>【Update&amp;单点修改&amp;&amp;区间修改】</p>
<blockquote>
<p>线段树的区间修改也是将区间分成子区间，但是要加一个标记，称作懒惰标记。
标记的含义：
本节点的统计信息已经根据标记更新过了，但是本节点的子节点仍需要进行更新。
即，如果要给一个区间的所有值都加上1，那么，实际上并没有给这个区间的所有值都加上1，而是打个标记，记下来，这个节点所包含的区间需要加1.打上标记后，要根据标记更新本节点的统计信息，比如，如果本节点维护的是区间和，而本节点包含5个数，那么，打上+1的标记之后，要给本节点维护的和+5。这是向下延迟修改，但是向上显示的信息是修改以后的信息，所以查询的时候可以得到正确的结果。有的标记之间会相互影响，所以比较简单的做法是，每递归到一个区间，首先下推标记（若本节点有标记，就下推标记），然后再打上新的标记，这样仍然每个区间操作的复杂度是O(log2(n))。</p>
<p>标记有相对标记和绝对标记之分：
相对标记是将区间的所有数+a之类的操作，标记之间可以共存，跟打标记的顺序无关（跟顺序无关才是重点）。
所以，可以在区间修改的时候不下推标记，留到查询的时候再下推。
注意：如果区间修改时不下推标记，那么PushUp函数中，必须考虑本节点的标记。
而如果所有操作都下推标记，那么PushUp函数可以不考虑本节点的标记，因为本节点的标记一定已经被下推了（也就是对本节点无效了）
绝对标记是将区间的所有数变成a之类的操作，打标记的顺序直接影响结果，
所以这种标记在区间修改的时候必须下推旧标记，不然会出错。</p>
<p>注意，有多个标记的时候，标记下推的顺序也很重要，错误的下推顺序可能会导致错误。</p>
<p>之所以要区分两种标记，是因为非递归线段树只能维护相对标记。
因为非递归线段树是自底向上直接修改分成的每个子区间，所以根本做不到在区间修改的时候下推标记。
非递归线段树一般不下推标记，而是自下而上求答案的过程中，根据标记更新答案。</p>
<p><strong>区间修改 Lazy_tag 懒惰标记的下推</strong></p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//区间修改 A[L,R] += C;
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> Add[N]; <span style="color:#09f;font-style:italic">//懒惰标记
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">Update</span>(<span style="color:#078;font-weight:bold">int</span> L, <span style="color:#078;font-weight:bold">int</span> R, <span style="color:#078;font-weight:bold">int</span> C, <span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r, <span style="color:#078;font-weight:bold">int</span> rt)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(L <span style="color:#555">&lt;=</span> l <span style="color:#555">&amp;&amp;</span> r <span style="color:#555">&lt;=</span> R) <span style="color:#09f;font-style:italic">//如果本区间完全在操作区间内，那就只修改rt当前结点，就懒得往下修改了
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    {
</span></span><span style="display:flex;"><span>        Sum[rt] <span style="color:#555">+=</span> C<span style="color:#555">*</span>(r <span style="color:#555">-</span> l <span style="color:#555">+</span> <span style="color:#f60">1</span>); <span style="color:#09f;font-style:italic">//更新数字和，向上保持正确
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        Add[rt] <span style="color:#555">+=</span> C; <span style="color:#09f;font-style:italic">//增加懒惰标记，表示本区间的Sum正确，子区间的Sum仍需要根据Add的值来调整
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//如果不在那个区间内的话，则下推
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> (l <span style="color:#555">+</span> r) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    PushDown(rt, m <span style="color:#555">-</span> l <span style="color:#555">+</span> <span style="color:#f60">1</span>, r <span style="color:#555">-</span> m); <span style="color:#09f;font-style:italic">//下推标记
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">//判断左右子树与[L,R]是否有交集，有的话才会递归
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>	<span style="color:#069;font-weight:bold">if</span>(L <span style="color:#555">&lt;=</span> mid) Update(L, R, C, l, m, rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(R <span style="color:#555">&gt;</span> mid) Update(L, R, C, m <span style="color:#555">+</span> <span style="color:#f60">1</span>, r, rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    PushUp(rt);<span style="color:#09f;font-style:italic">//更新本节点信息
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//下推函数
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//查询A[L,R]的和
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">PushDown</span>(<span style="color:#078;font-weight:bold">int</span> rt, <span style="color:#078;font-weight:bold">int</span> ln, <span style="color:#078;font-weight:bold">int</span> rn)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//ln左子树的数量, rn为右子树的数量
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">if</span>(Add[rt])
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//下推标记
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        Add[rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>] <span style="color:#555">+=</span> Add[rt];
</span></span><span style="display:flex;"><span>        Add[rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>] <span style="color:#555">+=</span> Add[rt];
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//修改子节点的Sum使之与对应的Add相对应
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>		Sum[rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>] <span style="color:#555">+=</span> Add[rt] <span style="color:#555">*</span> ln;
</span></span><span style="display:flex;"><span>        Sum[rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>] <span style="color:#555">+=</span> Add[rt] <span style="color:#555">*</span> rn;
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">//清除本节点标记
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        Add[rt] <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//区间查询
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">Query</span>(<span style="color:#078;font-weight:bold">int</span> L, <span style="color:#078;font-weight:bold">int</span> R, <span style="color:#078;font-weight:bold">int</span> l, <span style="color:#078;font-weight:bold">int</span> r, <span style="color:#078;font-weight:bold">int</span> rt)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(L <span style="color:#555">&lt;=</span> l <span style="color:#555">&amp;&amp;</span> r <span style="color:#555">&lt;=</span> R)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> Sum[rt];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> mid <span style="color:#555">=</span> (l <span style="color:#555">+</span> r) <span style="color:#555">&gt;&gt;</span> <span style="color:#f60">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//下推标记，否则Sum可能不正确
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    PushDown(rt, mid <span style="color:#555">-</span> l <span style="color:#555">+</span> <span style="color:#f60">1</span>, r <span style="color:#555">-</span> mid);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//累计答案
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#078;font-weight:bold">int</span> ANS <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(L <span style="color:#555">&lt;=</span> mid) ANS <span style="color:#555">+=</span> Query(L, R, l, mid, rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span>(R <span style="color:#555">&gt;</span> mid) ANS <span style="color:#555">+=</span> Query(L, R, mid <span style="color:#555">+</span> <span style="color:#f60">1</span>, r, rt <span style="color:#555">&lt;&lt;</span> <span style="color:#f60">1</span> <span style="color:#555">|</span> <span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> ANS;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Build(<span style="color:#f60">1</span>,n,<span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span>Update(L,R,C,<span style="color:#f60">1</span>,n,<span style="color:#f60">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> ANS <span style="color:#555">=</span> Query(L,R,<span style="color:#f60">1</span>,n,<span style="color:#f60">1</span>);
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="stl函数">STL函数</h3>
<blockquote>
<p>Upper_bound()和lower_bound()函数</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#099">#include&lt;bits/stdc++.h&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>() {
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> a[] <span style="color:#555">=</span> {<span style="color:#f60">1</span>, <span style="color:#f60">1</span>, <span style="color:#f60">1</span>, <span style="color:#f60">2</span>, <span style="color:#f60">2</span>, <span style="color:#f60">2</span>, <span style="color:#f60">3</span>, <span style="color:#f60">3</span>, <span style="color:#f60">3</span>, <span style="color:#f60">4</span>, <span style="color:#f60">4</span>, <span style="color:#f60">4</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cout <span style="color:#555">&lt;&lt;</span> (lower_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">4</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 9
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (upper_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">4</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 12
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (lower_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">1</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (upper_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">1</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 3
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (lower_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">3</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 6
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (upper_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">3</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 9
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (lower_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">5</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 12
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (upper_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">5</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 12
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (lower_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">0</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>cout <span style="color:#555">&lt;&lt;</span> (upper_bound(a, a <span style="color:#555">+</span> <span style="color:#f60">12</span>, <span style="color:#f60">0</span>) <span style="color:#555">-</span> a) <span style="color:#555">&lt;&lt;</span> endl; <span style="color:#09f;font-style:italic">//输出 0
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><code>priority_queue&lt;int&gt; q 优先队列队列</code>
q.top()默认是最大值
<code>priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; q;</code>
q.top()变成为最小值</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span>vector, <span style="color:#a00;background-color:#faa">变长数组，倍增的思想</span>
</span></span><span style="display:flex;"><span>    size()  <span style="color:#a00;background-color:#faa">返回元素个数</span>
</span></span><span style="display:flex;"><span>    empty()  <span style="color:#a00;background-color:#faa">返回是否为空</span>
</span></span><span style="display:flex;"><span>    clear()  <span style="color:#a00;background-color:#faa">清空</span>
</span></span><span style="display:flex;"><span>    front()<span style="color:#555">/</span>back()
</span></span><span style="display:flex;"><span>    push_back()<span style="color:#555">/</span>pop_back()
</span></span><span style="display:flex;"><span>    begin()<span style="color:#555">/</span>end()
</span></span><span style="display:flex;"><span>    []
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">支持比较运算，按字典序</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, <span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span>
</span></span><span style="display:flex;"><span>    first, <span style="color:#a00;background-color:#faa">第一个元素</span>
</span></span><span style="display:flex;"><span>    second, <span style="color:#a00;background-color:#faa">第二个元素</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">支持比较运算，以</span>first为第一关键字<span style="color:#a00;background-color:#faa">，以</span>second为第二关键字<span style="color:#a00;background-color:#faa">（字典序）</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string<span style="color:#a00;background-color:#faa">，字符串</span>
</span></span><span style="display:flex;"><span>    size()<span style="color:#555">/</span>length()  <span style="color:#a00;background-color:#faa">返回字符串长度</span>
</span></span><span style="display:flex;"><span>    empty()
</span></span><span style="display:flex;"><span>    clear()
</span></span><span style="display:flex;"><span>    substr(<span style="color:#a00;background-color:#faa">起始下标，</span>(<span style="color:#a00;background-color:#faa">子串长度</span>))  <span style="color:#a00;background-color:#faa">返回子串</span>
</span></span><span style="display:flex;"><span>    c_str()  <span style="color:#a00;background-color:#faa">返回字符串所在字符数组的起始地址</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>queue, <span style="color:#a00;background-color:#faa">队列</span>
</span></span><span style="display:flex;"><span>    size()
</span></span><span style="display:flex;"><span>    empty()
</span></span><span style="display:flex;"><span>    push()  <span style="color:#a00;background-color:#faa">向队尾插入一个元素</span>
</span></span><span style="display:flex;"><span>    front()  <span style="color:#a00;background-color:#faa">返回队头元素</span>
</span></span><span style="display:flex;"><span>    back()  <span style="color:#a00;background-color:#faa">返回队尾元素</span>
</span></span><span style="display:flex;"><span>    pop()  <span style="color:#a00;background-color:#faa">弹出队头元素</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>priority_queue, <span style="color:#a00;background-color:#faa">优先队列，默认是大根堆</span>
</span></span><span style="display:flex;"><span>    size()
</span></span><span style="display:flex;"><span>    empty()
</span></span><span style="display:flex;"><span>    push()  <span style="color:#a00;background-color:#faa">插入一个元素</span>
</span></span><span style="display:flex;"><span>    top()  <span style="color:#a00;background-color:#faa">返回堆顶元素</span>
</span></span><span style="display:flex;"><span>    pop()  <span style="color:#a00;background-color:#faa">弹出堆顶元素</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">定义成小根堆的方式：</span>priority_queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span>, greater<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;&gt;</span> q;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>stack, <span style="color:#a00;background-color:#faa">栈</span>
</span></span><span style="display:flex;"><span>    size()
</span></span><span style="display:flex;"><span>    empty()
</span></span><span style="display:flex;"><span>    push()  <span style="color:#a00;background-color:#faa">向栈顶插入一个元素</span>
</span></span><span style="display:flex;"><span>    top()  <span style="color:#a00;background-color:#faa">返回栈顶元素</span>
</span></span><span style="display:flex;"><span>    pop()  <span style="color:#a00;background-color:#faa">弹出栈顶元素</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>deque, <span style="color:#a00;background-color:#faa">双端队列</span>
</span></span><span style="display:flex;"><span>    size()
</span></span><span style="display:flex;"><span>    empty()
</span></span><span style="display:flex;"><span>    clear()
</span></span><span style="display:flex;"><span>    front()<span style="color:#555">/</span>back()
</span></span><span style="display:flex;"><span>    push_back()<span style="color:#555">/</span>pop_back()
</span></span><span style="display:flex;"><span>    push_front()<span style="color:#555">/</span>pop_front()
</span></span><span style="display:flex;"><span>    begin()<span style="color:#555">/</span>end()
</span></span><span style="display:flex;"><span>    []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>set, map, multiset, multimap, <span style="color:#a00;background-color:#faa">基于平衡二叉树（红黑树），动态维护有序序列</span>
</span></span><span style="display:flex;"><span>    size()
</span></span><span style="display:flex;"><span>    empty()
</span></span><span style="display:flex;"><span>    clear()
</span></span><span style="display:flex;"><span>    begin()<span style="color:#555">/</span>end()
</span></span><span style="display:flex;"><span>    <span style="color:#555">++</span>, <span style="color:#555">--</span> <span style="color:#a00;background-color:#faa">返回前驱和后继，时间复杂度</span> O(logn)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    set<span style="color:#555">/</span>multiset
</span></span><span style="display:flex;"><span>        insert()  <span style="color:#a00;background-color:#faa">插入一个数</span>
</span></span><span style="display:flex;"><span>        find()  <span style="color:#a00;background-color:#faa">查找一个数</span>
</span></span><span style="display:flex;"><span>        count()  <span style="color:#a00;background-color:#faa">返回某一个数的个数</span>
</span></span><span style="display:flex;"><span>        erase()
</span></span><span style="display:flex;"><span>            (<span style="color:#f60">1</span>) <span style="color:#a00;background-color:#faa">输入是一个数</span>x<span style="color:#a00;background-color:#faa">，删除所有</span>x   O(k <span style="color:#555">+</span> logn)
</span></span><span style="display:flex;"><span>            (<span style="color:#f60">2</span>) <span style="color:#a00;background-color:#faa">输入一个迭代器，删除这个迭代器</span>
</span></span><span style="display:flex;"><span>        lower_bound()<span style="color:#555">/</span>upper_bound()
</span></span><span style="display:flex;"><span>            lower_bound(x)  <span style="color:#a00;background-color:#faa">返回大于等于</span>x的最小的数的迭代器
</span></span><span style="display:flex;"><span>            upper_bound(x)  <span style="color:#a00;background-color:#faa">返回大于</span>x的最小的数的迭代器
</span></span><span style="display:flex;"><span>    map<span style="color:#555">/</span>multimap
</span></span><span style="display:flex;"><span>        insert()  <span style="color:#a00;background-color:#faa">插入的数是一个</span>pair
</span></span><span style="display:flex;"><span>        erase()  <span style="color:#a00;background-color:#faa">输入的参数是</span>pair或者迭代器
</span></span><span style="display:flex;"><span>        find()
</span></span><span style="display:flex;"><span>        []  <span style="color:#a00;background-color:#faa">注意</span>multimap不支持此操作<span style="color:#a00;background-color:#faa">。</span> <span style="color:#a00;background-color:#faa">时间复杂度是</span> O(logn)
</span></span><span style="display:flex;"><span>        lower_bound()<span style="color:#555">/</span>upper_bound()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>unordered_set, unordered_map, unordered_multiset, unordered_multimap, <span style="color:#a00;background-color:#faa">哈希表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">和上面类似，增删改查的时间复杂度是</span> O(<span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">不支持</span> lower_bound()<span style="color:#555">/</span>upper_bound()<span style="color:#a00;background-color:#faa">，</span> <span style="color:#a00;background-color:#faa">迭代器的</span><span style="color:#555">++</span><span style="color:#a00;background-color:#faa">，</span><span style="color:#555">--</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bitset, <span style="color:#a00;background-color:#faa">圧位</span>
</span></span><span style="display:flex;"><span>    bitset<span style="color:#555">&lt;</span><span style="color:#f60">10000</span><span style="color:#555">&gt;</span> s;
</span></span><span style="display:flex;"><span>    <span style="color:#555">~</span>, <span style="color:#555">&amp;</span>, <span style="color:#555">|</span>, <span style="color:#555">^</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">&gt;&gt;</span>, <span style="color:#555">&lt;&lt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">==</span>, <span style="color:#555">!=</span>
</span></span><span style="display:flex;"><span>    []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    count()  <span style="color:#a00;background-color:#faa">返回有多少个</span><span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    any()  <span style="color:#a00;background-color:#faa">判断是否至少有一个</span><span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>    none()  <span style="color:#a00;background-color:#faa">判断是否全为</span><span style="color:#f60">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    set()  <span style="color:#a00;background-color:#faa">把所有位置成</span><span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>    set(k, v)  <span style="color:#a00;background-color:#faa">将第</span>k位变成v
</span></span><span style="display:flex;"><span>    reset()  <span style="color:#a00;background-color:#faa">把所有位变成</span><span style="color:#f60">0</span>
</span></span><span style="display:flex;"><span>    flip()  <span style="color:#a00;background-color:#faa">等价于</span><span style="color:#555">~</span>
</span></span><span style="display:flex;"><span>    flip(k) <span style="color:#a00;background-color:#faa">把第</span>k位取反
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>个人整理</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//STL容器的使用心得
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#f60">1.</span> vector <span style="color:#a00;background-color:#faa">变长数组，倍增思想</span>
</span></span><span style="display:flex;"><span>    size() <span style="color:#a00;background-color:#faa">返回元素个数</span>
</span></span><span style="display:flex;"><span>    empty() <span style="color:#a00;background-color:#faa">是否为空</span>
</span></span><span style="display:flex;"><span>    clear() <span style="color:#a00;background-color:#faa">并不是所有都有这个函数</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">-</span><span style="color:#a00;background-color:#faa">倍增的思想，</span>vector是自动变长的<span style="color:#a00;background-color:#faa">，当系统为某一个程序分配空间的时候</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">有一个很大的特点是所需的时间基本上与这个空间大小无关，与申请次数有关</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">--</span><span style="color:#a00;background-color:#faa">倍增的思想就是每一次元素不够的话，就申请一个原来的两倍的空间，然后把原来</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">--</span><span style="color:#a00;background-color:#faa">的数</span>copy到新开的空间中
</span></span><span style="display:flex;"><span>    front(),back()
</span></span><span style="display:flex;"><span>    push_back, pop_back() 
</span></span><span style="display:flex;"><span>    begin()<span style="color:#555">/</span>end() ,vector也支持随机存取
</span></span><span style="display:flex;"><span>    <span style="color:#555">---------</span>vector <span style="color:#a00;background-color:#faa">迭代器遍历法</span><span style="color:#555">-------------</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;::</span>iterator i
</span></span><span style="display:flex;"><span>    i <span style="color:#555">=</span> a.begin; i <span style="color:#555">!=</span> a.end(); i <span style="color:#555">++</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">---------</span>vector <span style="color:#a00;background-color:#faa">范围遍历——</span><span style="color:#555">---------------</span>
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">for</span>(<span style="color:#069;font-weight:bold">auto</span> <span style="color:#99f">x</span> : a) cout <span style="color:#555">&lt;&lt;</span> x <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; &#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#555">----------------------------------------</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">--</span><span style="color:#a00;background-color:#faa">当一个变量特别长的时候写</span>auto更省事<span style="color:#555">~</span>
</span></span><span style="display:flex;"><span>    [vector黑科技<span style="color:#555">---</span><span style="color:#a00;background-color:#faa">支持比较运算</span>]
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> a(<span style="color:#f60">4</span>,<span style="color:#f60">3</span>) <span style="color:#f60">4</span><span style="color:#a00;background-color:#faa">个</span><span style="color:#f60">3</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> b(<span style="color:#f60">3</span>,<span style="color:#f60">4</span>) <span style="color:#f60">3</span><span style="color:#a00;background-color:#faa">个</span><span style="color:#f60">4</span>
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//按字典序进行比较运算
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    <span style="color:#555">---&gt;</span><span style="color:#a00;background-color:#faa">输出</span>a<span style="color:#555">&lt;</span>b
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">----</span>pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>,<span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> p <span style="color:#09f;font-style:italic">//定义一个二元组
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    p.first, p.second
</span></span><span style="display:flex;"><span>    pair也支持比较运算<span style="color:#a00;background-color:#faa">，也按字典序进行比较的</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">构造</span>pair的时候的语法
</span></span><span style="display:flex;"><span>    <span style="color:#f60">1.</span>p <span style="color:#555">=</span> make_pair(<span style="color:#f60">10</span>,<span style="color:#f60">10</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#f60">2.</span>p <span style="color:#555">=</span> {<span style="color:#f60">10</span>, <span style="color:#f60">10</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">如何存</span><span style="color:#f60">3</span><span style="color:#a00;background-color:#faa">个不同的东西？</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">---</span> pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, pair<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>,<span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;&gt;</span> p
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f60">2.</span> string <span style="color:#a00;background-color:#faa">字符串</span>
</span></span><span style="display:flex;"><span>    substr() <span style="color:#a00;background-color:#faa">返回子串</span>
</span></span><span style="display:flex;"><span>        substr(<span style="color:#f60">1</span>,<span style="color:#f60">2</span>) <span style="color:#a00;background-color:#faa">从</span><span style="color:#f60">1</span><span style="color:#a00;background-color:#faa">开始</span> <span style="color:#a00;background-color:#faa">长度是</span><span style="color:#f60">2</span>
</span></span><span style="display:flex;"><span>    c_str() <span style="color:#a00;background-color:#faa">返回头指针</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a00;background-color:#faa">想要</span>printf输出的话<span style="color:#a00;background-color:#faa">，则需要使用</span>a.c_str()
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">支持加法运算</span>
</span></span><span style="display:flex;"><span>        string a <span style="color:#555">=</span> <span style="color:#c30">&#34;zsx&#34;</span>
</span></span><span style="display:flex;"><span>        a <span style="color:#555">+=</span> <span style="color:#c30">&#34;yyds&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#f60">3.</span>queue, priority_queue
</span></span><span style="display:flex;"><span>    push(), front(), pop(), top()
</span></span><span style="display:flex;"><span>    push(), top(), pop()
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">对于</span>priority_queue <span style="color:#a00;background-color:#faa">默认是大根堆</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">如果想定义为小根堆的话</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f60">1.</span><span style="color:#a00;background-color:#faa">向堆中插入的时候插入负数</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f60">2.</span><span style="color:#a00;background-color:#faa">定义的时候</span>
</span></span><span style="display:flex;"><span>            priority_queue<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span>, vector<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span>, greater,<span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;&gt;</span> heap
</span></span><span style="display:flex;"><span><span style="color:#f60">4.</span>stack
</span></span><span style="display:flex;"><span>    size(),empty(),push(),top(),pop()
</span></span><span style="display:flex;"><span><span style="color:#f60">5.</span>deque <span style="color:#555">--</span><span style="color:#a00;background-color:#faa">效率比较低</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">双端队列</span> <span style="color:#09f;font-style:italic">//加强版的vector
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    size(),empty().,clear(),front()<span style="color:#555">/</span>back()
</span></span><span style="display:flex;"><span>    push_back()<span style="color:#555">/</span>pop_back(), push_front()<span style="color:#555">/</span>pop_front()
</span></span><span style="display:flex;"><span>    []<span style="color:#a00;background-color:#faa">支持随机存取</span>
</span></span><span style="display:flex;"><span>    begin()<span style="color:#555">/</span>end()
</span></span><span style="display:flex;"><span><span style="color:#f60">6.</span>set, map, multiset, multimap
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">基于平衡二叉树实现（红黑树）</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">本质是动态维护有序序列</span>
</span></span><span style="display:flex;"><span>    set里面不能有重复元素, multiset可以有
</span></span><span style="display:flex;"><span>        insert() <span style="color:#a00;background-color:#faa">插入一个数</span>
</span></span><span style="display:flex;"><span>        find() <span style="color:#a00;background-color:#faa">查找一个数</span>
</span></span><span style="display:flex;"><span>        count() <span style="color:#a00;background-color:#faa">返回某一个数的个数</span>
</span></span><span style="display:flex;"><span>        erase() <span style="color:#09f;font-style:italic">//k+log n
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            <span style="color:#f60">1.</span><span style="color:#a00;background-color:#faa">输入一个数</span>x,<span style="color:#a00;background-color:#faa">删除所有</span>x
</span></span><span style="display:flex;"><span>            <span style="color:#f60">2.</span><span style="color:#a00;background-color:#faa">输入一个迭代器，删除这个迭代器</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a00;background-color:#faa">核心：</span>lower_bound() <span style="color:#09f;font-style:italic">// upper_bound()
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>            lower_bound(x) <span style="color:#a00;background-color:#faa">返回大于等于</span>x的最小的数的迭代器
</span></span><span style="display:flex;"><span>            upper_bound(x) <span style="color:#a00;background-color:#faa">返回大于</span>x的最小的数的迭代器
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    map<span style="color:#555">/</span>multimap
</span></span><span style="display:flex;"><span>        insert() <span style="color:#a00;background-color:#faa">插入的数是一个</span>pair
</span></span><span style="display:flex;"><span>        erase() <span style="color:#a00;background-color:#faa">输入的参数是</span>pair或迭代器
</span></span><span style="display:flex;"><span>        find()
</span></span><span style="display:flex;"><span>        []<span style="color:#a00;background-color:#faa">可以像用数组一样用</span>map (map可以进行映射)
</span></span><span style="display:flex;"><span>        <span style="color:#555">---</span><span style="color:#a00;background-color:#faa">但注意该时间复杂度为</span>O(log n)
</span></span><span style="display:flex;"><span><span style="color:#f60">7.</span>unordered_set, unordered_map, unordered_multiset, unordered_multimap <span style="color:#a00;background-color:#faa">哈希表</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">和上面的类似，但增删改查的时间复杂度是</span>O(<span style="color:#f60">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">缺点是不支持</span>lower_upper和upper_bound()<span style="color:#a00;background-color:#faa">函数</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">凡是和排序有关的操作都是不支持的</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">8.</span>bitset, <span style="color:#a00;background-color:#faa">压位</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a00;background-color:#faa">最大的特点是能省八位空间</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f60">10000</span>MB <span style="color:#555">---&gt;</span> <span style="color:#f60">64</span>MB
</span></span><span style="display:flex;"><span>    bitset<span style="color:#555">&lt;</span><span style="color:#f60">10000</span><span style="color:#555">&gt;</span> s;
</span></span><span style="display:flex;"><span>    <span style="color:#555">~</span>,<span style="color:#555">&amp;</span>,<span style="color:#555">|</span>,<span style="color:#555">^</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">&lt;&lt;</span>,<span style="color:#555">&gt;&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#555">==</span>,<span style="color:#555">!=</span>
</span></span><span style="display:flex;"><span>    []
</span></span><span style="display:flex;"><span>    count() <span style="color:#a00;background-color:#faa">返回有多少个</span><span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>    any() <span style="color:#a00;background-color:#faa">判断是否至少有一个</span><span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>    none() <span style="color:#a00;background-color:#faa">判断是否全为</span><span style="color:#f60">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    set() <span style="color:#a00;background-color:#faa">把所有位置成</span><span style="color:#f60">1</span>
</span></span><span style="display:flex;"><span>    set(k,v) <span style="color:#a00;background-color:#faa">将第</span>k位变成v
</span></span><span style="display:flex;"><span>    reset() <span style="color:#a00;background-color:#faa">把所有位变成</span><span style="color:#f60">0</span>
</span></span><span style="display:flex;"><span>    flip() <span style="color:#a00;background-color:#faa">等价于</span><span style="color:#555">~</span>
</span></span><span style="display:flex;"><span>    flip(k)<span style="color:#a00;background-color:#faa">把第</span>k位取反
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="骗分技巧">骗分技巧</h3>
<p>可以先跳过第三题，看第四第五题，不会就打暴力骗一些分</p>
<blockquote>
<p>语言混用</p>
<p>C++、python、JAVA都能用</p>
</blockquote>
<h4 id="无解的情况">无解的情况</h4>
<p><code>若无解，请输出-1</code>
<code>printf(&quot;-1&quot;);</code> &ndash;&gt;可以拿10分</p>
<h4 id="样例包含解的情况">样例包含解的情况</h4>
<p><code>直接把样例输出出来没准也能拿分！</code></p>
<h4 id="万能钥匙-dfs-暴力搜索">万能钥匙——DFS 暴力搜索</h4>
<p>如果有的题目很难想出来DP的方法，可以把所有情况都搜索一遍，找出答案</p>
<h4 id="听天由命法">听天由命法</h4>
<blockquote>
<p>有的问题会问你 &ldquo;YES&rdquo; 或者 &ldquo;NO&rdquo; 或者等式是否成立</p>
</blockquote>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;cstdlib&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;ctime&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span>srand(time(<span style="color:#366">NULL</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>printf(<span style="color:#c30">&#34;%d&#34;</span>,rand()<span style="color:#555">%</span>X); <span style="color:#09f;font-style:italic">//生成 0 ~ X-1的随机整数
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="根据题意猜答案">根据题意猜答案</h4>
<h4 id="打表找规律">打表找规律</h4>
<blockquote>
<p>有些DP问题可以找出一些递推式</p>
</blockquote>
<h4 id="傻瓜式贪心求法">傻瓜式贪心求法</h4>
<blockquote>
<p>根据题意对一些小数据范围的数据进行贪心求法</p>
</blockquote>
<h4 id="字符串处理">字符串处理</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;sstream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span>
</span></span><span style="display:flex;"><span>stringstream ssin;  <span style="color:#09f;font-style:italic">// 类似于cin ，可以从string读double
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>str.c_str();
</span></span><span style="display:flex;"><span>sscanf(<span style="color:#c30">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>sprintf(<span style="color:#c30">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>substr(); <span style="color:#09f;font-style:italic">//返回一个string的某一个子串
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>str <span style="color:#555">+</span> <span style="color:#c30">&#39;a&#39;</span>, s <span style="color:#555">+</span> s;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>strstr(); <span style="color:#09f;font-style:italic">//kmp O(n)级别的kmp
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>s.find(); <span style="color:#09f;font-style:italic">//查找某个字符在某个地方出现 n^2
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>string to <span style="color:#078;font-weight:bold">int</span>; <span style="color:#555">---&gt;</span> stoi(s);
</span></span><span style="display:flex;"><span>string to <span style="color:#078;font-weight:bold">long</span> <span style="color:#078;font-weight:bold">long</span> <span style="color:#555">---&gt;</span> stoll(s);
</span></span><span style="display:flex;"><span>string to <span style="color:#078;font-weight:bold">float</span> <span style="color:#555">---&gt;</span> stof(s);
</span></span><span style="display:flex;"><span>string to <span style="color:#078;font-weight:bold">double</span> <span style="color:#555">---&gt;</span> stod(S);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> str[N] to <span style="color:#078;font-weight:bold">int</span> <span style="color:#555">---&gt;</span> atoi(str); atoll; atof;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>isdigit(); <span style="color:#a00;background-color:#faa">判断是否是数字</span>;
</span></span><span style="display:flex;"><span>tolower(); <span style="color:#a00;background-color:#faa">变成小写</span>;
</span></span><span style="display:flex;"><span>toupper(); <span style="color:#a00;background-color:#faa">变成大写</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s.c_str();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;string&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;sstream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099">#include</span> <span style="color:#099">&lt;iostream&gt;</span><span style="color:#099">
</span></span></span><span style="display:flex;"><span><span style="color:#099"></span><span style="color:#069;font-weight:bold">using</span> <span style="color:#069;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">在&lt;sstream&gt;中有一个类 istringstream可以把字符串根据空格分开。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    string str<span style="color:#555">=</span><span style="color:#c30">&#34;AA  BB  CC    B  1 123 &#34;</span>;
</span></span><span style="display:flex;"><span>    istringstream stream(str); <span style="color:#09f;font-style:italic">//声明一个istingstream的对象，并且绑定一个字符串。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    string s;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">while</span>(stream<span style="color:#555">&gt;&gt;</span>s){
</span></span><span style="display:flex;"><span>        cout<span style="color:#555">&lt;&lt;</span>s<span style="color:#555">&lt;&lt;</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">方法stringstream，可以看成一个缓冲区，经常用来string&lt;--&gt;int转换。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">int</span> <span style="color:#c0f">main</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    stringstream stream;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>    string str<span style="color:#555">=</span><span style="color:#c30">&#34;1234567&#34;</span>;
</span></span><span style="display:flex;"><span>    stream<span style="color:#555">&lt;&lt;</span>str;<span style="color:#09f;font-style:italic">//向stream中插入str
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    stream<span style="color:#555">&gt;&gt;</span>n;
</span></span><span style="display:flex;"><span>    <span style="color:#09f;font-style:italic">//从strea中提取刚才装入的字符串，并将其付给n。并且完成从string 到int的转换。
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>    cout<span style="color:#555">&lt;&lt;</span><span style="color:#c30">&#34;int型数据：&#34;</span><span style="color:#555">&lt;&lt;</span>n;
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//Tip: 如果这个stream要多次使用的话，记得每次使用完以后清空一下，stream.clear();
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>strstr(<span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>haystack, <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">char</span> <span style="color:#555">*</span>needle)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//strstr()函数 ---&gt; 这是一个时间复杂度为O(n)的KMP匹配算法
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic">//strstr(模式串, 匹配串) ---&gt; 该函数返回在 haystack 中第一次出现 needle 字符串的位置，如果未找到则返回 null。
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="常数优化">常数优化</h4>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>·可以在一些非递归函数前 加一个 inline 
</span></span><span style="display:flex;"><span>·可以在一些变量前加上 register   //register int
</span></span></code></pre></td></tr></table>
</div>
</div>


  <footer>
    <script src="https://immmmm.com/waterfall.min.js"></script>
    <script src="https://immmmm.com/imgStatus.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
      var photosAll = document.getElementsByTagName('gallery') || '';
      if(photosAll){
        for(var i=0;i < photosAll.length;i++){
          photosAll[i].innerHTML = '<div class="gallery-photos">'+photosAll[i].innerHTML+'</div>'
          var photosIMG = photosAll[i].getElementsByTagName('img')
          for(var j=0;j < photosIMG.length;j++){
            wrap(photosIMG[j], document.createElement('div'));
          }
        }
      }
      function wrap(el, wrapper) {
        wrapper.className = "gallery-photo";
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      }
      let galleryPhotos = document.querySelectorAll('.gallery-photos') || ''
      if(galleryPhotos){
        imgStatus.watch('.gallery-photo img', function(imgs) {
          if(imgs.isDone()){
            for(var i=0;i < galleryPhotos.length;i++){
              waterfall(galleryPhotos[i]);
              let pagePhoto = galleryPhotos[i].querySelectorAll('.gallery-photo');
              for(var j=0;j < pagePhoto.length;j++){pagePhoto[j].className += " visible"};
            }
          }
        });
        window.addEventListener('resize', function () {
          for(var i=0;i < galleryPhotos.length;i++){
            waterfall(galleryPhotos[i]);
          }
        });
      }
    });
    </script>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/posts/2023/04/leetcode-%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/">LeetCode 刷题笔记</a></span>
  <span class="nav-next"><a href="/posts/2024/10/%E9%87%8F%E5%8C%96%E8%AE%AD%E7%BB%83optimize-weight-rounding-via-signed-gradient-descent-for-the-quantization-of-llms/">[量化|训练]Optimize Weight Rounding via Signed Gradient Descent for the Quantization of LLMs</a> &rarr;</span>
</nav>

  <hr>
  
    <div class="pagination__title" style="margin-bottom: 30px;">
  <span class="pagination__title-h">留下你的足迹👣</span>
</div>
  <div id="tcomment"></div>
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.5/dist/twikoo.all.min.js"></script>
  <script>
    twikoo.init({
    envId: 'https://mytwico.netlify.app/', 
    el: '#tcomment', 
    
    
    
  })
  </script>
  
  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">© <a href="https://jasaxion.github.io">Jasaxion</a> | since 2021</div>
  
  </footer>
  </article>
  
  </body>
</html>

