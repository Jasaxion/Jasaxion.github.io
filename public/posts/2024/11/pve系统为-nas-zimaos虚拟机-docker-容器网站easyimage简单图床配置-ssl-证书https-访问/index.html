<!DOCTYPE html>
<html lang="zh-CN">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="icon" type="image/png" href="favicons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicons/favicon.svg" />
    <link rel="shortcut icon" href="favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png" />
    <link rel="manifest" href="favicons/site.webmanifest" />
    
    
    <title>PVEç³»ç»Ÿä¸º NAS-ZimaOSè™šæ‹Ÿæœº docker å®¹å™¨ç½‘ç«™ã€ŒEasyImageç®€å•å›¾åºŠã€é…ç½® SSL è¯ä¹¦ï¼ˆhttps è®¿é—®ï¼‰ - Jasaxionä¸€åªå¤§é›„</title>
    <meta property="og:title" content="PVEç³»ç»Ÿä¸º NAS-ZimaOSè™šæ‹Ÿæœº docker å®¹å™¨ç½‘ç«™ã€ŒEasyImageç®€å•å›¾åºŠã€é…ç½® SSL è¯ä¹¦ï¼ˆhttps è®¿é—®ï¼‰ - Jasaxionä¸€åªå¤§é›„">
    
    <meta name="twitter:card" content="summary">
    <meta name="referrer" content="never" />

    
    
    <link rel="stylesheet" href="/css/custom.css"></link>
    <script type="text/javascript" src="/js/view-image.js"></script>
    <script>
    
    window.ViewImage && ViewImage.init('.main img:not(.avatar,.tk-avatar-img)')
    </script>
    <script src="/js/custom-markdown-parser.js"></script>
    <script  src="https://jsd.cdn.zzko.cn/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
    <script>window.addEventListener('load', () => {  quicklink.listen();});</script>
    
    

    
      
    

    
      
      <meta property="description" content="PVE ç³»ç»Ÿä¸­ï¼Œä¸º ZimaOSè™šæ‹Ÿæœº docker å®¹å™¨ç½‘ç«™ã€ŒEasyImageç®€å•å›¾åºŠã€é…ç½® SSL è¯ä¹¦ï¼ˆæˆåŠŸå®ç°https è®¿é—®ï¼‰">
      <meta property="og:description" content="PVE ç³»ç»Ÿä¸­ï¼Œä¸º ZimaOSè™šæ‹Ÿæœº docker å®¹å™¨ç½‘ç«™ã€ŒEasyImageç®€å•å›¾åºŠã€é…ç½® SSL è¯ä¹¦ï¼ˆæˆåŠŸå®ç°https è®¿é—®ï¼‰">
      
    

    
    
    <meta name="twitter:image" content="https://pve.digikamc.cn:8343/i/2024/11/26/ljb88i-0.png">
    
    

    
    <meta property="keywords" content ="SSL, NAS, ç»éªŒåˆ†äº«">
    

    
    


<link href='//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
    
  </head>

  
  <body class="posts">
    <header class="masthead">
      <h1><a href="/">Jasaxionä¸€åªå¤§é›„</a></h1>

<p class="tagline">é£æ‰“ï¼Œç¢ç‰ç’ƒï¼› æ‰“ä¸ç¢çš„ï¼Œæ˜¯é‚£é˜³å…‰æ¼«åœ°ã€‚The wind strikes, shattering the glazed glass; Yet unbroken remains the sunlight spilling across the earth.</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">âœ•</span>
    <span class="icon open-icon">â˜°</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/posts/">å½’æ¡£ / Posts</a></li>
  
  <li><a href="/resume/">å…³äºæˆ‘ / CV</a></li>
  
  <li><a href="/tags/tech/">æŠ€æœ¯ç›®å½• / Tech</a></li>
  
  <li><a href="/tags/notes">æˆ‘çš„ç¬”è®° / Note</a></li>
  
  <li><a href="/tags/read/">ç§‘ç ”ä¸é˜…è¯» / Read</a></li>
  
  <li><a href="/whisper/">ç¢ç¢å¿µ / Whisper</a></li>
  
  
  </ul>
</nav>

      
    </header>

    <article class="main">
      <header class="title">
      
<h1>PVEç³»ç»Ÿä¸º NAS-ZimaOSè™šæ‹Ÿæœº docker å®¹å™¨ç½‘ç«™ã€ŒEasyImageç®€å•å›¾åºŠã€é…ç½® SSL è¯ä¹¦ï¼ˆhttps è®¿é—®ï¼‰</h1>



<h3>






2024-11-26
</h3>

<hr>


      </header>







<h2 id="äº‹æƒ…èµ·å› ">äº‹æƒ…èµ·å› </h2>
<p>å‡çº§äº†ä¸ªäººä¸»é¡µï¼Œè§£å†³äº†çƒ¦äººçš„ Markdown å›¾ç‰‡è·¯å¾„é—®é¢˜ï¼Œä½† https çš„ç½‘ç«™æ— æ³•è®¿é—® http çš„å›¾ç‰‡ï¼Œé€ æˆäº†éº»çƒ¦ï¼Œä¸ºå›¾åºŠå®ç° sslï¼Œæ‹“å±•ä¸ªäººå›¾åºŠçš„åº”ç”¨èƒ½åŠ›ã€‚</p>
<p>è§å‰æ–‡ï¼š<a href="https://jasaxion.github.io/posts/2024/11/%E4%B8%AA%E4%BA%BAnas%E9%85%8D%E7%BD%AE%E7%A7%81%E4%BA%BA%E5%9B%BE%E5%BA%8Azimaos/casaos/docker-%E9%85%8D%E7%BD%AE-easyimage-%E7%AE%80%E5%8D%95%E5%9B%BE%E5%BA%8A-upic-typora/">ä¸ªäººNASé…ç½®ç§äººå›¾åºŠï¼ZimaOS/CasaOS/Docker é…ç½® EasyImage ç®€å•å›¾åºŠ+uPic+Typora</a></p>
<p>æˆ‘çš„æƒ…å†µã€Œåº”è¯¥å±äºéå¸¸éå¸¸å°ä¼—çš„éœ€æ±‚äº†ã€</p>
<ol>
<li>NAS è¿è¡Œ PVE ç³»ç»Ÿ</li>
<li>PVE ä¸Šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºï¼Œæ„å»º ZimaOS</li>
<li>ZimaOS ä¸Šå®‰è£… docker ç‰ˆç½‘ç«™</li>
<li>å¤–ç½‘å¯ä»¥ç›´æ¥ http è®¿é—®è¯¥ docker ç½‘ç«™ï¼Œä½†æ— æ³• httpsè®¿é—®ï¼Œç°åœ¨åœ¨ PVE ç³»ç»Ÿä¸Šé…ç½® SSL è¯ä¹¦ä½¿å…¶èƒ½å¤Ÿæ­£ç¡®è®¿é—®</li>
</ol>
<h2 id="è¯ä¹¦ç”³è¯·">è¯ä¹¦ç”³è¯·</h2>
<p><a href="https://letsencrypt.org/zh-cn/">Let&rsquo;s Encrypt</a> æ˜¯ä¸€ä¸ªç”±éè¥åˆ©æ€§ç»„ç»‡ äº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ï¼ˆ<a href="https://www.abetterinternet.org/">ISRG</a>ï¼‰æä¾›çš„å…è´¹ã€è‡ªåŠ¨åŒ–å’Œå¼€æ”¾çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ã€‚</p>
<p>ç®€å•çš„è¯´ï¼Œå€ŸåŠ© Let&rsquo;s Encrypt é¢å‘çš„è¯ä¹¦å¯ä»¥ä¸ºæˆ‘ä»¬çš„ç½‘ç«™å…è´¹å¯ç”¨ HTTPS(SSL/TLS) ã€‚</p>
<p>Let&rsquo;s Encryptå…è´¹è¯ä¹¦çš„ç­¾å‘/ç»­ç­¾éƒ½æ˜¯è„šæœ¬è‡ªåŠ¨åŒ–çš„ï¼Œå®˜æ–¹æä¾›äº†å‡ ç§è¯ä¹¦çš„ç”³è¯·æ–¹å¼æ–¹æ³•ï¼Œ<a href="https://letsencrypt.org/zh-cn/docs/client-options/">ç‚¹å‡»æ­¤å¤„ </a>å¿«é€Ÿæµè§ˆã€‚</p>
<p>å®˜æ–¹æ¨èä½¿ç”¨ <a href="https://certbot.eff.org/">Certbot </a>å®¢æˆ·ç«¯æ¥ç­¾å‘è¯ä¹¦ï¼Œè¿™ç§æ–¹å¼å¯å‚è€ƒæ–‡æ¡£è‡ªè¡Œå°è¯•ï¼Œä¸åšè¯„ä»·ã€‚</p>
<h3 id="å®‰è£…-certbot-å®¢æˆ·ç«¯">å®‰è£… certbot å®¢æˆ·ç«¯</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>apt install certbot
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å¦‚æœæ— æ³•å®‰è£…ä¹Ÿå¯ä»¥ä½¿ç”¨ githubæºç ä½¿ç”¨ï¼šhttps://github.com/letsencrypt/letsencrypt</p>
</blockquote>
<p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>certbot
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç”³è¯·è¯ä¹¦">ç”³è¯·è¯ä¹¦</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>certbot certonly  -d *.you.cn --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯·å°†<code>you.cn</code>æ¢æˆä½ è‡ªå·±çš„åŸŸå</p>
<table>
  <thead>
      <tr>
          <th>å‚æ•°</th>
          <th>è¯´æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>certonly</td>
          <td>è¡¨ç¤ºå®‰è£…æ¨¡å¼ï¼ŒCertbot æœ‰å®‰è£…æ¨¡å¼å’ŒéªŒè¯æ¨¡å¼ä¸¤ç§ç±»å‹çš„æ’ä»¶ã€‚</td>
      </tr>
      <tr>
          <td>&ndash;manual</td>
          <td>è¡¨ç¤ºæ‰‹åŠ¨å®‰è£…æ’ä»¶ï¼ŒCertbot æœ‰å¾ˆå¤šæ’ä»¶ï¼Œä¸åŒçš„æ’ä»¶éƒ½å¯ä»¥ç”³è¯·è¯ä¹¦ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œé€‰æ‹©</td>
      </tr>
      <tr>
          <td>-d</td>
          <td>ä¸ºé‚£äº›ä¸»æœºç”³è¯·è¯ä¹¦ï¼Œå¦‚æœæ˜¯é€šé…ç¬¦ï¼Œè¾“å…¥ *.you.cnï¼ˆå¯ä»¥æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ä¸€çº§åŸŸåï¼‰</td>
      </tr>
      <tr>
          <td>&ndash;preferred-challenges dns</td>
          <td>ä½¿ç”¨ DNS æ–¹å¼æ ¡éªŒåŸŸåæ‰€æœ‰æƒ</td>
      </tr>
      <tr>
          <td>&ndash;server</td>
          <td>Let&rsquo;s Encrypt ACME v2 ç‰ˆæœ¬ä½¿ç”¨çš„æœåŠ¡å™¨ä¸åŒäº v1 ç‰ˆæœ¬ï¼Œéœ€è¦æ˜¾ç¤ºæŒ‡å®šã€‚</td>
      </tr>
  </tbody>
</table>
<p>æ¥ä¸‹æ¥ä¼šæœ‰å‡ ä¸ªäº¤äº’éœ€è¦å®Œæˆ</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>Please read the Terms of Service at
</span></span><span style="display:flex;"><span>https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must
</span></span><span style="display:flex;"><span>agree in order to register with the ACME server at
</span></span><span style="display:flex;"><span>https://acme-v02.api.letsencrypt.org/directory
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>(A)gree/(C)ancel: A
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>Would you be willing to share your email address with the Electronic Frontier
</span></span><span style="display:flex;"><span>Foundation, a founding partner of the Let&#39;s Encrypt project and the non-profit
</span></span><span style="display:flex;"><span>organization that develops Certbot? We&#39;d like to send you email about our work
</span></span><span style="display:flex;"><span>encrypting the web, EFF news, campaigns, and ways to support digital freedom.
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>(Y)es/(N)o: N
</span></span><span style="display:flex;"><span>Obtaining a new certificate
</span></span><span style="display:flex;"><span>Performing the following challenges:
</span></span><span style="display:flex;"><span>dns-01 challenge for kuaichuangkeji.com
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>NOTE: The IP of this machine will be publicly logged as having requested this
</span></span><span style="display:flex;"><span>certificate. If you&#39;re running certbot in manual mode on a machine that is not
</span></span><span style="display:flex;"><span>your server, please ensure you&#39;re okay with that.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Are you OK with your IP being logged?
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>(Y)es/(N)o: Y
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>æ˜¯å¦åŒæ„æ¡æ¬¾ï¼šY/A</li>
<li>æ˜¯å¦åˆ†äº«è‡ªå·±çš„é‚®ç®±ï¼šN</li>
<li>æ˜¯å¦è®°å½• IPï¼šY</li>
</ol>
<p>è¿‡ç¨‹ä¸­éœ€è¦ç™»è®°ä¸€æ¬¡é‚®ç®±æ¥ç¡®å®šè¯ä¹¦çš„çŠ¶æ€ï¼Œå¯ä»¥æ”¾ä½ çš„å¸¸ç”¨é‚®ç®±ã€‚</p>
<h3 id="é…ç½®åŸŸåè¯ä¹¦">é…ç½®åŸŸåè¯ä¹¦</h3>
<p><strong>âš ï¸æ³¨æ„ï¼ŒéªŒè¯åŸŸåæ˜¯å¦ä¸ºè‡ªå·±çš„ï¼Œéœ€è¦å¢åŠ ä¸€æ¡è§£æè®°å½•</strong></p>
<p><strong>ä¹Ÿå°±æ˜¯åˆ°äº†ä¸‹é¢çš„è¿›åº¦ï¼Œä¸€å®šä¸è¦ç€æ€¥ç‚¹ Enter</strong></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>Please deploy a DNS TXT record under the name
</span></span><span style="display:flex;"><span>_acme-challenge.you.cn with the following value:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;è§£æå€¼&gt;asdjkbakjsdbkajsdnlakjbndjkabdnklasnbdakslkdsaln
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Before continuing, verify the record is deployed.
</span></span><span style="display:flex;"><span>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</span></span><span style="display:flex;"><span>Press Enter to Continue
</span></span><span style="display:flex;"><span>Waiting for verification...
</span></span><span style="display:flex;"><span>Cleaning up challenges
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ°è¿™é‡Œåï¼Œæˆ‘ä»¬ä¿å­˜<code>&lt;è§£æå€¼&gt;</code> å’Œ <code>_acme-challenge</code></p>
<p>ç°åœ¨æˆ‘ä»¬å‰å¾€äº‘è§£ææœåŠ¡ï¼Œæˆ‘ç”¨çš„æ˜¯è…¾è®¯äº‘ DNSpod</p>
<img src="https://pve.digikamc.cn:8343/i/2024/11/26/ljb88i-0.png" alt="image-20241126130220334" style="zoom:50%;" />
<p>ä¸»æœºè®°å½•: _acme-challenge</p>
<p>è®°å½•ç±»å‹ä¸ºï¼šTXT</p>
<p>è®°å½•å€¼ä¸ºï¼šæç¤ºä¸­çš„ &lt;è§£æå€¼&gt;</p>
<p>ç„¶åç‚¹å‡»ä¿å­˜è§£æåï¼Œç­‰1 åˆ†é’Ÿå·¦å³ï¼Œå›åˆ°certbot å®¢æˆ·ç«¯ï¼Œç°åœ¨å¯ä»¥æŒ‰ä¸‹å›è½¦â†©ï¸Enter äº†ï½</p>
<p>æ²¡é—®é¢˜çš„è¯ï¼Œæ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>IMPORTANT NOTES:
</span></span><span style="display:flex;"><span> - Congratulations! Your certificate and chain have been saved at:
</span></span><span style="display:flex;"><span>   /etc/letsencrypt/live/you.cn/fullchain.pem
</span></span><span style="display:flex;"><span>   Your key file has been saved at:
</span></span><span style="display:flex;"><span>   /etc/letsencrypt/live/you.cn/privkey.pem
</span></span><span style="display:flex;"><span>   Your cert will expire on 2019-02-27. To obtain a new or tweaked
</span></span><span style="display:flex;"><span>   version of this certificate in the future, simply run certbot-auto
</span></span><span style="display:flex;"><span>   again. To non-interactively renew *all* of your certificates, run
</span></span><span style="display:flex;"><span>   &#34;certbot-auto renew&#34;
</span></span><span style="display:flex;"><span> - If you like Certbot, please consider supporting our work by:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Donating to ISRG / Let&#39;s Encrypt:   https://letsencrypt.org/donate
</span></span><span style="display:flex;"><span>   Donating to EFF:                    https://eff.org/donate-le
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸¤ä¸ªé‡è¦è·¯å¾„ï¼š</p>
<p>è¯ä¹¦æ–‡ä»¶ä¿å­˜åœ¨ï¼š/etc/letsencrypt/live/you.cn/fullchain.pem</p>
<p>å¯†é’¥ä¿å­˜åœ¨ï¼š/etc/letsencrypt/live/you.cn/privkey.pem</p>
<h3 id="è‡ªåŠ¨æ›´æ–°è¯ä¹¦">è‡ªåŠ¨æ›´æ–°è¯ä¹¦</h3>
<blockquote>
<p>æ³¨æ„ï¼Œè¯ä¹¦ä¸æ˜¯æ°¸ä¹…çš„ï¼Œä¸€æ®µæ—¶é—´å°±ä¼šè¿‡æœŸï¼Œè¿™æ ·å¾ˆéº»çƒ¦</p>
<p>å¯ä»¥è¾“å…¥ certbot renew æ¥åˆ·æ–°è¯ä¹¦ï¼Œè€æ˜¯æ“ä½œä¹Ÿå¾ˆéº»çƒ¦ï¼Œè‡ªåŠ¨åŒ–æ“ä½œæ–¹æ³•</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#f60">1.</span><span style="color:#a00;background-color:#faa">ç¼–è¾‘å®šæ—¶ä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>crontab <span style="color:#555">-</span>e
</span></span><span style="display:flex;"><span><span style="color:#f60">2.</span><span style="color:#a00;background-color:#faa">ç„¶ååœ¨</span> crontab <span style="color:#a00;background-color:#faa">çš„æœ€åä¸€è¡ŒåŠ ä¸Š</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">0</span> <span style="color:#555">*/</span><span style="color:#f60">12</span> <span style="color:#555">*</span> <span style="color:#555">*</span> <span style="color:#555">*</span> certbot renew <span style="color:#555">--</span>quiet <span style="color:#555">--</span>renew<span style="color:#555">-</span>hook <span style="color:#c30">&#34;/etc/init.d/nginx reload&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f60">3.</span><span style="color:#a00;background-color:#faa">ä¿å­˜å³å¯</span>
</span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h3 id="å–æ¶ˆè¯ä¹¦">å–æ¶ˆè¯ä¹¦</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1. æ’¤å›æ“ä½œ
</span></span><span style="display:flex;"><span>certbot revoke --cert-path /etc/letsencrypt/live/you.cn/cert.pem
</span></span><span style="display:flex;"><span>2. åˆ é™¤æ“ä½œ
</span></span><span style="display:flex;"><span>certbot delete --cert-name you.cn
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="nginxåå‘ä»£ç†">Nginxåå‘ä»£ç†</h2>
<p>å¥½äº†Ù©(â€¢Ì¤Ì€áµ•â€¢Ì¤Ìà¹‘)áµ’áµáµáµáµáµï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº† SSL è¯ä¹¦äº†ï¼Œç„¶åå‘ç°ç½‘ç«™è¿˜æ˜¯æ— æ³• https è®¿é—®ï¼Œé‚£å½“ç„¶å•¦ã€‚é‚£ä¹ˆç°åœ¨æˆ‘ä»¬ä½¿ç”¨ Nginx åå‘ä»£ç†æ¥ä¸º docker å®¹å™¨ä¸­çš„ç½‘ç«™è£…é… SSL è¯ä¹¦ã€‚</p>
<blockquote>
<p>é¢˜å¤–è¯ï¼Œä¸€èˆ¬è¿è¥å•†ä¼šå°ç¦ 443 80 8080 25 8443 ç­‰ç«¯å£ï¼Œæ•…æ­¤å¦‚æœåœ¨ä¸ªäººä¸»æœºä¸Šé…ç½®çš„è¯ï¼Œè®°å¾—é¿å¼€è¿™äº›ä¸»æµç«¯å£ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°æ— æ³•è®¿é—®çš„é—®é¢˜ï¼Œè€Œä¸”æ¯”è¾ƒéš¾æŸ¥ï¼Œå¦‚æœæ˜¯ä¸“ä¸šäº‘ä¸»æœºæˆ–è€…å•†ä¸šäº‘æœåŠ¡å™¨ä¹‹ç±»çš„ä¸å—å½±å“ã€‚</p>
</blockquote>
<p>é¦–å…ˆï¼Œè™šæ‹Ÿæœº ZimaOS çš„å±€åŸŸç½‘ IP åœ°å€ä¸º 192.168.9.104ï¼ŒPVEçš„å±€åŸŸç½‘ IP åœ°å€ä¸º 192.168.9.108ã€‚</p>
<p>docker ç½‘ç«™æ˜ å°„ 8010 ç«¯å£åˆ°å…¶ç½‘ç«™çš„ 80 ç«¯å£ï¼Œé‡‡ç”¨æ¡¥æ¥ç½‘ç»œçš„æ–¹å¼ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æµ‹è¯• PVE ç³»ç»Ÿæ˜¯å¦èƒ½æœ¬åœ°è®¿é—®åˆ° ZimaOS ä¸Šè¿™ä¸ª docker å®¹å™¨çš„ç½‘ç«™</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span> curl -v http://192.168.9.104:8010
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="https://pve.digikamc.cn:8343/i/2024/11/26/lr6bdg-0.png" alt="image-20241126131542467"></p>
<p>æˆåŠŸè¿æ¥ä¸Šäº†ï¼Œè¯´æ˜ PVE æœ¬åœ°åˆ°è¯¥ docker å®¹å™¨ç½‘ç«™çš„é“¾è·¯æ˜¯é€šçš„ã€‚</p>
<h3 id="åœ¨-pve-ä¸Šå®‰è£…-nginx">åœ¨ PVE ä¸Šå®‰è£… nginx</h3>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>apt update
</span></span><span style="display:flex;"><span>apt install nginx -y
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®-nginx-ä»£ç†">é…ç½® nginx ä»£ç†</h3>
<p>åˆ›å»ºä¸€ä¸ªç½‘ç«™é…ç½®ï¼š</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>nano /etc/nginx/sites-available/you_cn
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†™å…¥é…ç½®ã€ŒåŒæ · you.cn æ”¹æˆä½ è‡ªå·±çš„ åŸŸåã€ï¼š</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>    listen 443 ssl; #æ³¨æ„å¦‚æœè¿è¥å•†å°ç¦äº†443ç«¯å£ï¼Œå¯ä»¥å¤šå¤šå°è¯•å…¶ä»–çš„ç«¯å£ï¼Œå°½å¯èƒ½ä¸è¦ç”¨å¸¸ç”¨çš„ç«¯å£ï¼Œå¦åˆ™å³ä¾¿æˆåŠŸäº†ï¼Œä¹Ÿæ— æ³•æˆåŠŸè®¿é—®
</span></span><span style="display:flex;"><span>    server_name you.cn;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    # SSLé…ç½®
</span></span><span style="display:flex;"><span>    ssl_certificate /etc/letsencrypt/live/you.cn/fullchain.pem;
</span></span><span style="display:flex;"><span>    ssl_certificate_key /etc/letsencrypt/live/you.cn/privkey.pem;
</span></span><span style="display:flex;"><span>    ssl_protocols TLSv1.2 TLSv1.3;
</span></span><span style="display:flex;"><span>    ssl_ciphers HIGH:!aNULL:!MD5;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    # åå‘ä»£ç†åˆ°è™šæ‹Ÿæœºçš„æœåŠ¡
</span></span><span style="display:flex;"><span>    location / {
</span></span><span style="display:flex;"><span>        proxy_pass http://192.168.9.104:8010;
</span></span><span style="display:flex;"><span>        proxy_set_header Host $host;
</span></span><span style="display:flex;"><span>        proxy_set_header X-Real-IP $remote_addr;
</span></span><span style="display:flex;"><span>        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>        proxy_set_header X-Forwarded-Proto $scheme;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ç”¨é…ç½®å¹¶é‡å¯Nginxï¼š</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>sudo ln <span style="color:#555">-</span>s <span style="color:#555">/</span>etc<span style="color:#555">/</span>nginx<span style="color:#555">/</span>sites<span style="color:#555">-</span>available<span style="color:#555">/</span>virtual_machine_proxy <span style="color:#555">/</span>etc<span style="color:#555">/</span>nginx<span style="color:#555">/</span>sites<span style="color:#555">-</span>enabled<span style="color:#555">/</span>
</span></span><span style="display:flex;"><span>sudo nginx <span style="color:#555">-</span>t
</span></span><span style="display:flex;"><span>sudo systemctl reload nginx
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å®Œæˆ-æµ‹è¯•è®¿é—®">å®Œæˆï¼Œæµ‹è¯•è®¿é—®</h3>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡ <a href="https://you.cn/">https://you.cn/</a>è¿›è¡Œè®¿é—®äº†</p>
<p>å¦‚æœ443ç«¯å£è¢«å°ç¦äº†ï¼Œå¯ä»¥ä¿®æ”¹<code>listen 443 ssl</code>éƒ¨åˆ†ï¼Œç„¶åé€šè¿‡https://you.cn:ä½ çš„è‡ªå®šä¹‰ç«¯å£/ è®¿é—®ï¼Œè¿™æ · SSLåè®®å°±æˆåŠŸéƒ¨ç½²åˆ°äº†è¯¥ç½‘ç«™ï¼Œå†ä¹Ÿä¸ä¼šæœ‰ä¸å®‰å…¨å¼¹çª—äº†ã€‚</p>



  <footer>
    <script src="https://immmmm.com/waterfall.min.js"></script>
    <script src="https://immmmm.com/imgStatus.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
      var photosAll = document.getElementsByTagName('gallery') || '';
      if(photosAll){
        for(var i=0;i < photosAll.length;i++){
          photosAll[i].innerHTML = '<div class="gallery-photos">'+photosAll[i].innerHTML+'</div>'
          var photosIMG = photosAll[i].getElementsByTagName('img')
          for(var j=0;j < photosIMG.length;j++){
            wrap(photosIMG[j], document.createElement('div'));
          }
        }
      }
      function wrap(el, wrapper) {
        wrapper.className = "gallery-photo";
        el.parentNode.insertBefore(wrapper, el);
        wrapper.appendChild(el);
      }
      let galleryPhotos = document.querySelectorAll('.gallery-photos') || ''
      if(galleryPhotos){
        imgStatus.watch('.gallery-photo img', function(imgs) {
          if(imgs.isDone()){
            for(var i=0;i < galleryPhotos.length;i++){
              waterfall(galleryPhotos[i]);
              let pagePhoto = galleryPhotos[i].querySelectorAll('.gallery-photo');
              for(var j=0;j < pagePhoto.length;j++){pagePhoto[j].className += " visible"};
            }
          }
        });
        window.addEventListener('resize', function () {
          for(var i=0;i < galleryPhotos.length;i++){
            waterfall(galleryPhotos[i]);
          }
        });
      }
    });
    </script>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/posts/2024/11/%E4%B8%AA%E4%BA%BAnas%E9%85%8D%E7%BD%AE%E7%A7%81%E4%BA%BA%E5%9B%BE%E5%BA%8Azimaos/casaos/docker-%E9%85%8D%E7%BD%AE-easyimage-%E7%AE%80%E5%8D%95%E5%9B%BE%E5%BA%8A-upic-typora/">ä¸ªäººNASé…ç½®ç§äººå›¾åºŠï¼ZimaOS/CasaOS/Docker é…ç½® EasyImage ç®€å•å›¾åºŠ&#43;uPic&#43;Typora</a></span>
  <span class="nav-next"><a href="/posts/2024/11/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%9D%A2%E8%AF%95%E6%89%8B%E6%8E%A8-bert-%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0%E9%87%8F/">[å¤§æ¨¡å‹é¢è¯•]æ‰‹æ¨ Bert æ¨¡å‹çš„å‚æ•°é‡</a> &rarr;</span>
</nav>

  <hr>
  
    <div class="pagination__title" style="margin-bottom: 30px;">
  <span class="pagination__title-h">ç•™ä¸‹ä½ çš„è¶³è¿¹ğŸ‘£</span>
</div>
  <div id="tcomment"></div>
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.40/dist/twikoo.all.min.js"></script>
  <script>
    twikoo.init({
    envId: 'https://mytwico.netlify.app/.netlify/functions/twikoo/', 
    el: '#tcomment', 
    
    
    
  })
  </script>
  
  



<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/tex.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">Â© <a href="https://jasaxion.github.io">Jasaxion</a> | since 2021</div>
  
  </footer>
  </article>
  
  </body>
</html>

