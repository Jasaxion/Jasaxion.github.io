# è®¡ç®—æœºCSPç®—æ³•ä»¥åŠæœºè¯•æŒ‡å—

> æ‰“å“è®¡ç®—æœºCSPç®—æ³•ä»¥åŠæœºè¯•å¿…èƒœçš„ç¬¬ä¸€æˆ˜âœŒï¸

**ç®—æ³•è§£é¢˜æ€è·¯ä¸ƒæ­¥æ³•ï¼š**

![image-20230305220940231](./wdcs.assets/image-20230305220940231.png)

### å‰ç¼€å’Œ

#### æ¨¡æ¿å›é¡¾

```cpp
//ä¸€ç»´å‰ç¼€å’Œ
S[i] = a[1] + a[2] + ... a[i]
a[l] + ... + a[r] = S[r] - S[l - 1]
åšä¸€ä¸ªSnæ•°ç»„ï¼Œè¡¨ç¤ºå‰nä¸ªæ•°çš„å’Œ
å•ç‹¬æ±‚æŸåŒºæ®µçš„å’Œ å°±åªéœ€è¦ S[r] - S[l-1];

æ±‚å‰né¡¹å’Œçš„æ•°ç»„Sn
for (int i = 1; i <= n; i ++ ) scanf("%d", &a[i]);
    for (int i = 1; i <= n; i ++ ) S[i] = S[i-1] + a[i];  //å‰ç¼€å’Œçš„åˆå§‹åŒ–

--åŒºé—´å’Œçš„è®¡ç®— S[r] - S[l-1]
```

```cpp
//äºŒç»´å‰ç¼€å’Œ
[å«å®¹æ–¥åŸç†çš„åº”ç”¨]
è‡ªå·±åˆ†æçš„æ—¶å€™æ³¨æ„ xè¡¨ç¤ºè¡Œã€yè¡¨ç¤ºåˆ—ã€‚
åˆ†ææ—¶ä¸è¦çœ‹æˆç‚¹ï¼Œè€Œæ˜¯åº”è¯¥æŠŠç‚¹çœ‹æˆæ ¼å­å»ç†è§£ï¼ï¼ï¼
S[i, j] = ç¬¬iè¡Œjåˆ—æ ¼å­å·¦ä¸Šéƒ¨åˆ†æ‰€æœ‰å…ƒç´ çš„å’Œ
ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µçš„å’Œä¸ºï¼š
S[x2, y2] - S[x1 - 1, y2] - S[x2, y1 - 1] + S[x1 - 1, y1 - 1]
```

```cpp
//æ³¨æ„äº‹é¡¹
ç”¨æ¨¡æ¿å‰ç¼€å’Œæ—¶ï¼Œé»˜è®¤i >= 1 ; j >= 1;
å®šä¹‰æ•°ç»„æ—¶ï¼›æ•°ç»„å¤§å°æ¯”è§„å®šå¤§å°å¤§ 10 æœ€ä¸ºä¿é™©
100000 ---> 100010
```

#### 3956.æˆªæ–­æ•°ç»„

> https://www.acwing.com/problem/content/description/3959/
>
> ä¸è¦æƒ³å½“ç„¶çš„åšé¢˜ï¼Œä¸€å®šè¦å–„äºåˆ†æï¼Œæ‡‚å¾—æ€è€ƒï¼Œå–„äºè¿›è¡ŒæŠ½è±¡æ€ç»´ï¼Œå›ºå®šä¸€åˆ€çš„æƒ…å†µï¼Œå»æšä¸¾å¦å¤–çš„åˆ‡å‰²æ–¹å¼ï¼Œæ€è·¯è§ä»£ç ä¸­çš„æ³¨é‡Šã€‚
>
> **æ€è·¯ï¼šåˆ©ç”¨å‰ç¼€å’Œï¼Œå›ºå®šç¬¬äºŒåˆ€ï¼Œåˆ†æç¬¬ä¸€åˆ€çš„å¯èƒ½æƒ…å†µå³å¯**ï¼Œå‡¡æ˜¯æ¶‰åŠç´¯åŠ è¿ç®—çš„ï¼Œä¸€å®šè¦æƒ³åˆ°å‰ç¼€å’Œï¼

```cpp
#include<bits/stdc++.h>

using namespace std;
const int N = 100010;
typedef long long ll;
ll n,sum;
ll a[N],s[N];
int main()
{
    scanf("%lld",&n);
    for(int i = 1; i <= n; i ++){
        scanf("%lld",&a[i]);
        s[i] = s[i-1] + a[i];
    }
    //å¦‚æœä¸èƒ½è¢«åˆ†ä¸ºä¸‰æ®µåˆ™è¡¨ç¤ºæœ‰0ç§æ–¹æ¡ˆ
    if(s[n] % 3 != 0){
        printf("0\n");
        return 0;
    }
    //ä¸ºäº†é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å•ç‹¬æšä¸¾ç¬¬äºŒåˆ€çš„ä½ç½®å³å¯
    //å›ºå®šç¬¬äºŒåˆ€ä½ç½®ï¼Œæˆ‘ä»¬åˆ†æç¬¬ä¸€åˆ€æ°å¥½ä¸ºnumçš„æƒ…å†µï¼Œè®¡ä¸ºcnt
    //å¦‚æœç¬¬äºŒåˆ€ä¹‹å‰æ€»å’Œä¸º2*numï¼Œé‚£ä¹ˆæ­¤æ—¶çš„æƒ…å†µæ•°åº”è¯¥ä¸ºå·²æœ‰çš„æƒ…å†µæ•°+cnt
    ll num = s[n] / 3;
    ll cnt = 0, res = 0;
    for(int i = 2; i < n; i ++){
        if(s[i - 1] == num) cnt ++; //è¡¨ç¤ºç¬¬ä¸€åˆ€çš„å¯èƒ½æƒ…å†µ
        if(s[i] == num * 2) res += cnt; //æ­¤æ—¶æ”¾ç½®ç¬¬äºŒåˆ€
    }
    printf("%lld\n",res);
    return 0;
}
```

#### 1230. Kå€åŒºé—´

> å¾ˆå·§å¦™çš„ä¸€é“é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨å‰ç¼€å’Œçš„æ–¹å¼å­˜æ”¾ä½™æ•°
> $$
> s[i] = (s[i-1] + a[i])\%k\ -->ä½™æ•°å‰ç¼€å’Œ\\
> if \ s[i] == 0 \ -->è¡¨ç¤º1ï½iå…¶åŒºé—´æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„è§£\\
> if \ (s[R] - s[L - 1])\%k == 0\ (è¡¨ç¤ºL-RåŒºé—´æ»¡è¶³æ¡ä»¶)\\
> \ 	ä¹Ÿå°±æ˜¯è¯´ï¼Œs[R]\%k == s[L-1]\%k \ å¦‚æœä¸¤ä¸ªåŒºé—´çš„ä½™æ•°ç›¸åŒï¼Œé‚£ä¹ˆä¹Ÿèƒ½æ„æˆä¸€ä¸ªkå€åŒºé—´\\
> answer=sum(s[0]) + C_{cnt(ä½™æ•°ç›¸åŒçš„ä¸ªæ•°)}^2
> $$
> å¤§æ¦‚æ€è·¯å¦‚ä¸Šæ‰€ç¤ºï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™æœ‰å‡ ä¸ªå¾ˆå·§å¦™çš„åœ°æ–¹
> ```
> ä¾‹å¦‚ï¼šè®¾ç½®åˆå§‹å€¼cnt[0]=1
> -ans += cnt[s[i]];
> -cnt[s[i]]++;
> è¿™ä¸¤è¡Œä»£ç çš„é¡ºåºä¸èƒ½å˜æ›´ï¼Œè¿™æ ·è¿˜ä¸éœ€è¦ç”¨ç»„åˆå…¬ç¤ºï¼Œè™½ç„¶ç†è§£éš¾åº¦å¢åŠ äº†ï¼Œä½†ä»£ç é•¿åº¦å’Œæ—¶é—´å¤æ‚åº¦å‡å°‘ä¸€ä¸ªå¸¸æ•°
> ```

```cpp
#include <bits/stdc++.h>

using namespace std;
typedef long long ll;
const int N = 100010;
ll a[N],s[N];
int cnt[N];
ll ans;
int n,k;
int main()
{
    scanf("%d%d",&n,&k);
    cnt[0] = 1; //å¦‚æœä½™æ•°ä¸º0çš„è¯ï¼Œé‚£ä¹ˆå…¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªåˆæ³•çš„åŒºé—´
    for(int i = 1; i <= n; i ++){
        scanf("%lld",&a[i]);
        s[i] = (s[i-1] + a[i])%k; //ç”¨å‰ç¼€å’Œçš„æ–¹æ³•å­˜ä¸‹å…¶æ¨¡çš„ä½™æ•°
    }
    for(int i = 1;i <= n; i ++){
        ans += cnt[s[i]];  //è¿™é‡Œä¸¤è¡Œä»£ç ä¸èƒ½æ›´æ”¹é¡ºåºï¼Œè¿™é‡Œçš„å¤„ç†æ–¹æ³•ç±»ä¼¼äºç»„åˆC^2_n
        cnt[s[i]]++; //æ­¤æ—¶ä½™æ•°ç›¸ç­‰çš„æƒ…å†µ+1
    }
    printf("%lld\n",ans);
    return 0;
}
```

> ç±»é¢˜ï¼šhttps://www.acwing.com/problem/content/101/
>
> **æ³¨æ„ç‚¹ï¼š**1.ä¸èƒ½å¼€long longï¼›2.æ³¨æ„ç»™å‡ºçš„åæ ‡çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„ï¼›3.æ—¶åˆ»æ³¨æ„æ•°ç»„çš„èŒƒå›´ï¼Œä¸è¦æƒ³å½“ç„¶åšé¢˜ï¼›

```cpp
#include<bits/stdc++.h>

using namespace std;
typedef long long ll;
int ans;
const int N = 5010;
int s[N][N]; //æ³¨æ„è¿™é‡Œä¸è¦å¼€long long,å¦åˆ™ä¼šMLEï¼Œè¦å­¦ä¼šè‡ªå·±è®¡ç®—Memory
int n;
int r;
int maxx,maxy;
int main()
{
    scanf("%d%d",&n,&r);
    r = min(r, 5001); //è€ƒè™‘å‘¨åˆ°
    maxx = maxy = r; //é™åˆ¶åˆå§‹è¾¹ç•Œ
    for(int i = 0; i < n; i ++){
        int x,y,w;
        scanf("%d%d%d",&x,&y,&w);
        x++,y++;//æ³¨æ„å‰ç¼€å’Œç®—æ³•è¦ä»ä¸‹æ ‡ä¸º1å¼€å§‹ï¼ï¼ï¼ï¼ç²—å¿ƒå¤§æ„
        s[x][y]+=w;
        maxx = max(maxx,x);
        maxy = max(maxy,y);
    }
    for(int i = 1; i <= maxx; i ++){ //äºŒç»´å‰ç¼€å’Œ
        for(int j = 1; j <= maxy; j ++){
            s[i][j] = s[i - 1][j] + s[i][j - 1] + s[i][j] - s[i - 1][j - 1];
        }
    }
    for(int i = r; i <= maxx; i ++){ //äºŒç»´å‰ç¼€å’Œçš„æ±‚è§£ï¼Œæšä¸¾å³ä¸‹è§’çš„ç«¯ç‚¹
        for(int j = r; j <= maxy; j ++){
            ans = max(ans, s[i][j] - s[i-r][j] - s[i][j-r] + s[i-r][j-r]);
        }
    }
    printf("%lld\n",ans);
    return 0;
}
```

### å·®åˆ†

#### æ¨¡æ¿å›é¡¾

```cpp
//ä¸€ç»´å·®åˆ†
aæ•°ç»„æ˜¯bæ•°ç»„çš„å‰ç¼€å’Œã€‚
å‡æƒ³ä¸€ä¸ªBæ•°ç»„ï¼Œä½¿å¾—Aæ•°ç»„æ˜¯Bæ•°ç»„çš„å‰ç¼€å’Œï¼Œé‚£ä¹ˆç§°Bæ•°ç»„ä¸ºAæ•°ç»„çš„å·®åˆ†ã€‚
å¯¹Bæ•°ç»„æ±‚ä¸€ä¸ªå‰ç¼€å’Œå°±èƒ½å¾—åˆ°Aæ•°ç»„
å‡è®¾aæ•°ç»„å…¨éƒ¨éƒ½æ˜¯0ï¼Œaæ•°ç»„ä¸­çš„å€¼ï¼Œç›¸å½“äºè¿›è¡Œäº†næ¬¡æ’å…¥æ“ä½œã€‚

å·®åˆ†æ¨¡æ¿ï¼š
  ç»™åŒºé—´[l,r]ä¸­çš„æ¯ä¸ªæ•°åŠ ä¸Šc;
	B[l] += c;
	B[r+1] -= c;
//å®ä¾‹
void insert(int l, int r,int c)
{
   b[l] += c;   //bä¸ºaçš„å·®åˆ†ï¼Œbl+cåˆ™blåçš„æ¯ä¸€é¡¹aléƒ½ä¼š+c
   b[r + 1] -= c;  //æ‰€ä»¥è¦ä½¿å¾—åé¢r+1éƒ½è¦-c
}
//ä¸åŒé—®é¢˜åœ¨è¿™ä¸€æ­¥çš„å¤„ç†æ–¹å¼ä¸åŒ
for (int i = 1; i <= n; i ++)
{
    scanf("%d",&a[i]);
    insert(i,i,a[i]);   //å‡è®¾aé‡Œé¢å…¨æ˜¯0ï¼Œaå†…çš„æ¯ä¸€é¡¹éƒ½æ˜¯é€šè¿‡æ’å…¥å®ç°çš„
}
while(m --)
{
		int l,r,c;     
  	scanf("%d%d%d",&l,&r,&c);
    insert(l,r,c);
}
for (int i = 1; i <= n ;i ++) b[i] += b[i - 1]; //å°†bå˜æˆå‰ç¼€å’Œ-->ä¸ºäº†å¾—åˆ°åŸæ¥çš„æ•°ç»„
```

```cpp
//äºŒç»´å·®åˆ†
ç»™ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šcï¼š
S[x1, y1] += c, S[x2 + 1, y1] -= c, S[x1, y2 + 1] -= c, S[x2 + 1, y2 + 1] += c
  
å¯¹æ•°ç»„bè¿›è¡Œå‰ç¼€å’Œç´¯åŠ å¯ä»¥æ¢å¤åˆ°åŸæ¥æ•°ç»„a
b[i][j] = b[i][j] + b[i - 1][j] + b[i][j - 1] - b[i - 1][j - 1]; //äºŒç»´æ•°ç»„è‡ªèº«çš„å‰ç¼€å’Œæ±‚æ³•
```

#### 100.å¢å‡åºåˆ—

> https://www.acwing.com/problem/content/102/

> **å·®åˆ†æ€è·¯ï¼š**å°†åŒºé—´éƒ½éœ€è¦+Cçš„æƒ…å†µï¼Œè½¬åŒ–ä¸ºåªéœ€è¦å¯¹ä¸¤ä¸ªæ•°è¿›è¡ŒåŠ å‡ã€‚
> åŸåºåˆ—ä¸º$a$ï¼Œå·®åˆ†åºåˆ—ä¸º$b$
>
> å·®åˆ†æ•°ç»„æœ‰å‡ ä¸ªç‰¹æ®Šçš„å€¼$b_1$å’Œ$b_{n+1}$ï¼Œå¦‚æœéœ€è¦åŸåºåˆ—ç›¸ç­‰ï¼Œé‚£ä¹ˆå·®åˆ†æ•°ç»„åº”è¯¥ä¸º$\{b_1,0,...,0\} å…¶ä¸­b_1ä¸ºä¸€ä¸ªå¸¸æ•°ï¼Œåªéœ€è¦è®©b_2\sim b_nä¸º0å³å¯$
>
> å¯¹äºå·®åˆ†æ•°ç»„çš„$L$å’Œ$R$çš„å–å€¼æœ‰å¦‚ä¸‹å››ç§æ“ä½œæ–¹å¼ï¼š
>
> 1âƒ£ï¸$2\le L\le R \le n-1$ é€‰æ‹©ä¸€ä¸ª$b_i$åœ¨$2\le n-1$ä¸­ï¼Œä¸€ä¸ª$+/-1ï¼Œå¦ä¸€ä¸ª$ $-/+1$
>
> 2âƒ£ï¸$L=1,R \le n-1$ è®©$b_1 +/-1$ï¼Œé€‰ä¸€ä¸ªåœ¨$2\le n-1$ä¸­çš„æ•°$-/+1$
>
> 3âƒ£ï¸$L\ge2, R=n$ è®©$b_{n+1} +/-1$ï¼Œé€‰æ‹©å¦å¤–ä¸€ä¸ªæ•°$-/+1$
>
> 4âƒ£ï¸$L=1,R=n$ï¼Œè¡¨ç¤ºè®©è¿™ä¸ªåºåˆ—éƒ½$+/-1$ â€“>åœ¨æœ¬é¢˜ä¸­æ²¡æœ‰æ„ä¹‰ï¼›
>
> å¯¹äºå·®åˆ†åºåˆ—$b_2\sim b_n$ ï¼Œå‡è®¾å…¶æ‰€æœ‰çš„æ­£æ•°å’Œä¸º$q$ï¼Œæ‰€æœ‰çš„è´Ÿæ•°å’Œä¸º$p$
>
> ä»¥è´ªå¿ƒçš„æ–¹å¼é€‰æ‹©1âƒ£ï¸ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¿«çš„é€‰æ‹©ä¸¤ä¸ªæ•°è¿›è¡Œå˜æ¢ã€2âƒ£ï¸3âƒ£ï¸åªèƒ½å˜ä¸€ä¸ªæ•°ã€‘ï¼Œé‚£ä¹ˆé¦–å…ˆä¼˜å…ˆé€‰æ‹©1âƒ£ï¸ï¼Œæ­¤æ—¶éœ€è¦çš„æ“ä½œæ¬¡æ•°ä¸º$min\{q,p\}$ æ¬¡ï¼Œä¹Ÿå°±æ˜¯å°†å…¶ä¸­çš„æ­£æ•°/è´Ÿæ•°é¦–å…ˆå˜æˆ0ï¼Œç„¶åå†ä½¿ç”¨2âƒ£ï¸3âƒ£ï¸æ–¹æ³•å¯¹äºå‰©ä¸‹çš„æ•°ï¼Œå‰©ä¸‹çš„æ•°æœ‰$||q|-|p||$æ¬¡ï¼Œä¹Ÿå°±æ˜¯æœ€å°‘è¿˜éœ€è¦$||q|-|p||$æ¬¡æ“ä½œ2âƒ£ï¸å’Œ3âƒ£ï¸ï¼š
> **ç»“è®ºï¼š**æœ€å°‘éœ€è¦çš„æ¬¡æ•°$ans1 = min\{q,p\}+||q|-|p|| =max\{q,p\}$
>
> æ¥ä¸‹æ¥è®¨è®ºæ­¤æ—¶çš„æ–¹æ¡ˆæ•°æœ‰å¤šå°‘ç§ï¼Ÿå¯¹äº1âƒ£ï¸çš„æ“ä½œæ˜¯å›ºå®šä¸å˜çš„ï¼Œé‚£ä¹ˆæ–¹æ¡ˆå·®å¼‚ä¸»è¦åœ¨äº2âƒ£ï¸å’Œ3âƒ£ï¸ï¼Œå¯¹äº2âƒ£ï¸å’Œ3âƒ£ï¸çš„ä¸åŒç§æƒ…å†µä¸€å…±æœ‰ï¼š$ans2=||p|-|q||+1$ç§ ï¼ˆç†ç”±å¦‚ä¸‹ï¼šï¼‰
>
> ```
> 2âƒ£ï¸			3âƒ£ï¸
> 0			||p|-|q||
> 1			||p|-|q||-1
> 2			||p|-|q||-2
> ...			...
> ||p|-|q||		0
> ```

```cpp
#include <bits/stdc++.h>

using namespace std;
const int N = 100010;
typedef long long ll;
int b[N];
int a[N];
int n;
ll q,p;
int main()
{
    scanf("%d",&n);
    for(int i = 1; i <= n; i ++){
        scanf("%d",&a[i]);
        b[i] = a[i] - a[i-1];
        if(i == 1) continue;
        if(b[i] < 0) q += b[i];
        if(b[i] > 0) p += b[i];
    }
    ll ans1 = max(abs(q),abs(p));
    ll ans2 = abs(abs(q) - abs(p)) + 1ll;
    printf("%lld\n%lld",ans1,ans2);
    return 0;
}
```

#### 3729.æ”¹å˜æ•°ç»„å…ƒç´ 

> https://www.acwing.com/problem/content/3732/

> å¹³å¹³æ— å¥‡çš„å·®åˆ†æ•°ç»„æ–¹æ³•ï¼Œå¯¹äºå·®åˆ†æ•°ç»„ï¼Œè„‘è¢‹é‡Œé¢ä¸€å®šè¦æ—¶åˆ»æœ‰é‚£ä¸ªå·®åˆ†/å‰ç¼€å’Œçš„æ¦‚å¿µ

```cpp
#include <bits/stdc++.h>

using namespace std;
int T;
const int N = 200010;
int b[N];
void insert(int l,int r){
    b[l] += 1;
    b[r] -= 1;
}
int main()
{
    scanf("%d",&T);
    while(T--){
        int n;
        scanf("%d",&n);
        memset(b,0,sizeof b); //è®°å¾—æ¯æ¬¡æ¸…0
        for(int i = 1; i <= n; i ++){
            int x;
            scanf("%d",&x); //å½“å‰æ“ä½œ
            if(x == 0) continue; //å¦‚æœä¸º0è¡¨ç¤ºä¸æ“ä½œ
            insert(max(0,i-x+1),i+1); //å¦åˆ™å°†è¿™ä¸€æ®µåŒºé—´è¿›è¡Œå·®åˆ†+1
        }
        for(int i = 1; i <= n; i ++){
            b[i] += b[i-1]; //å‰ç¼€å’Œæ¢å¤åŸæ•°ç»„
        }
        for(int i = 1; i <= n; i ++){
            if(b[i] > 0) b[i] = 1; //è¿™é‡Œåªè®°å½•>1çš„ä¸º1å³å¯ï¼
            printf("%d ", b[i]);
        }
        printf("\n");
    }
    return 0;
}
```

### äºŒåˆ†

#### æ¨¡ç‰ˆå›é¡¾

```cpp
//æ•´æ•°äºŒåˆ†ã€æ˜“é”™ç‚¹ï¼šè¾¹ç•Œé—®é¢˜çš„é€‰å–ã€‘
å½“l = mid çš„æ—¶å€™è¦è¡¥ä¸Šl+r+1;
å½“r = mid çš„æ—¶å€™ä¸éœ€è¦è¡¥ä¸Š;

//æ¨¡ç‰ˆä¸€ï¼š
é€‚ç”¨æ¡ä»¶ï¼šåŒºé—´[L,R]è¢«åˆ’åˆ†ä¸º[L,mid], [mid+1,R]æ—¶ä½¿ç”¨;
//åŒºé—´[l,r] è¢«åˆ’åˆ†ä½[l,mid] å’Œ[mid+1,r]æ—¶ä½¿ç”¨
int bsearch_1(int l, int r)
{
    while (l < r)
    {
        int mid = l + r >> 1; //å–ä¸­é—´å€¼ ç›¸å½“äº (l+r)/2;
        if (check(mid)) r = mid;  // check()åˆ¤å®šmidæ˜¯å¦æ»¡è¶³æ€§è´¨
        else l = mid + 1;
    }
    return 1;
}

//æ¨¡ç‰ˆäºŒ
é€‚ç”¨æ¡ä»¶ï¼šåŒºé—´[L,R]è¢«åˆ’åˆ†ä¸º[L,mid-1],[mid,R]æ—¶ä½¿ç”¨;
int bsearch_2(int l, int r)
{
    while(l < r)
    {
        int mid = l + r + 1 >> 1;
        if (check(mid)) l = mid;
        else r = mid - 1;
    }
    return 1;
}
```

```cpp
//æµ®ç‚¹æ•°äºŒåˆ†
ç‰¹ç‚¹ï¼šæ²¡æœ‰æ•´é™¤çš„æ¦‚å¿µï¼Œæ‰€ä»¥æ²¡æœ‰æ•´æ•°äºŒåˆ†çš„è¾¹ç•Œé—®é¢˜ï¼Œå¯ä»¥ä¸¥æ ¼çš„äºŒåˆ†
ä¸æ–­äºŒåˆ†ï¼Œç›´åˆ°äºŒåˆ†çš„é•¿åº¦è¶³å¤Ÿå°çš„æ—¶å€™å¯ä»¥è®¤ä¸ºäºŒåˆ†è·å¾—çš„æ˜¯ä¸€ä¸ªæ•°äº†;
bool check(double x);

double bsearch_3(double l, double r)
{
    const double eps=1e-6; //ç²¾åº¦
    while (r-l > eps)
    {
        double mid = (l+r)/2;
        if (check()) r=mid;
        else l=mid;
    }
    return l;
}
æ³¨æ„ï¼šç²¾ç¡®åº¦æ¯”è¦æ±‚çš„ç²¾ç¡®åº¦å¤šä¸¤ä½çš„æƒ…å†µä¸‹æ˜¯æ¯”è¾ƒä¿é™©çš„
å¦‚ï¼šä¿ç•™6ä½ï¼Œ1e-8æ›´ä¸ºä¿é™©ã€‚
```

æœ‰å•è°ƒæ€§ä¸€å®šå¯ä»¥äºŒåˆ†ï¼Œä½†æ²¡æœ‰å•è°ƒæ€§æœ‰å¯èƒ½å¯ä»¥äºŒåˆ†ï¼Œæ‰€ä»¥äºŒåˆ†çš„æœ¬è´¨ä¸æ˜¯å•è°ƒæ€§

**æœ¬è´¨ï¼šæŠŠæ•´ä¸ªåŒºé—´ä¸€åˆ†ä¸ºäºŒï¼Œä¸€éƒ¨åˆ†æ»¡è¶³ã€ä¸€éƒ¨åˆ†ä¸æ»¡è¶³ï¼›äºŒåˆ†èƒ½æ‰¾åˆ°è¾¹ç•Œç‚¹åˆ†å‡ºè¿™ä¸¤ä¸ªéƒ¨åˆ† [æœ¬è´¨ï¼šè¾¹ç•Œ]**

> æ¨¡æ¿é¢˜ï¼šæŸ¥æ‰¾æ•°çš„èŒƒå›´ï¼Œåˆ†åˆ«æ˜¯é€‰æ‹©çš„lowerå’Œupperä¸¤ç§äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼ï¼Œæœ€ç»ˆè·å¾—å…¶åŒºé—´ã€‚https://www.acwing.com/problem/content/791/
>
> ```cpp
> #include<bits/stdc++.h>
> 
> using namespace std;
> int n,q,k;
> const int N = 100010;
> int a[N];
> int main()
> {
>     scanf("%d%d",&n,&q);
>     for(int i = 0; i < n; i ++){
>         scanf("%d",&a[i]);
>     }
>     while(q --){
>         scanf("%d",&k);
>         int l = 0,r = n - 1;
>       	//loweræ–¹å¼è·å–ä¸‹åŒºé—´è¾¹ç•Œ
>         while(l < r){
>             int mid = l + r >> 1;
>             if(a[mid] >= k){
>                 r = mid;
>             }
>             else{
>                 l = mid+1;
>             }
>         }
>       	//æ‰¾ä¸åˆ°çš„æƒ…å†µ
>         if(a[l] != k) printf("-1 -1\n");
>         else{//upperæ–¹å¼è·å–ä¸ŠåŒºé—´è¾¹ç•Œ
>             printf("%d ",l);
>             l = 0, r = n-1;
>             while(l < r){
>                 int mid = l + r + 1 >> 1;
>                 if(a[mid] <= k){
>                     l = mid;
>                 }
>                 else{
>                     r = mid - 1;
>                 }
>             }
>             printf("%d\n",l);
>         }
>     }
>     return 0;
> }
> ```

#### 1460.æˆ‘åœ¨å“ªï¼Ÿï¼ˆå“ˆå¸Œ+äºŒåˆ†ï¼‰

> https://www.acwing.com/problem/content/1462/

```cpp
//æœ¬é¢˜ä¸»è¦éš¾ç‚¹åœ¨äºè·å–å½“å‰å­—ç¬¦ä¸²çš„æ‰€æœ‰å­ä¸²ï¼Œç”¨äºŒåˆ†çš„æ–¹æ³•æŸ¥æ‰¾åˆé€‚æƒ…å†µã€‚
#include <bits/stdc++.h>
#include <cstring>
#include <unordered_set>
using namespace std;
int n;
string str;
bool check(int mid){
    unordered_set<string> st; //setæ¥ä»£æ›¿å­—ç¬¦ä¸²å“ˆå¸Œ
    for(int i = 0; i + mid <= n; i ++){
        string curstr = str.substr(i,mid);
        if(st.count(curstr)) return false;
        st.insert(curstr);
    }
    return true;
}
int main()
{
    scanf("%d",&n);
    cin >> str;
    int l = 0, r = n;
    while(l < r){ //äºŒåˆ†æŸ¥æ‰¾
        int mid = l + r >> 1;
        if(check(mid)){
            r = mid;
        }
        else{
            l = mid + 1;
        }
    }
    printf("%d\n",l);
    return 0;
}
```

#### 1221.å››å¹³æ–¹å’Œ ï¼ˆå“ˆå¸Œ+äºŒåˆ†ï¼‰ä»¥åŠå‡ ç‚¹å¯å‘

> https://www.acwing.com/problem/content/1223/

> 1. ç¬¦å·é‡è½½çš„æ–¹å¼ï¼Œä»£ç ç¤ºä¾‹ç§ä½¿ç”¨å¾—å¾ˆç»å…¸ï¼Œè¿˜æœ‰å¦å¤–çš„æ–¹å¼ï¼Œé€šè¿‡æ‰‹å†™bool cmpï¼Œå¯¼å…¥åˆ°sort(a,a+n,cmp)ä¸­
> 2. å…³äºäºŒåˆ†ä¸­Lå’ŒRçš„è¾¹ç•Œå€¼çš„é€‰å–ï¼Œåº”è¯¥è¦é€‰æ‹©æ»¡è¶³è¦ç­”æ¡ˆè¦æ±‚çš„è¾¹ç•ŒèŒƒå›´ï¼Œä¸èƒ½ç›²ç›®å°†LRåŒºé—´è®¾ç½®å¾ˆå¤§ï¼ï¼æ¯”å¦‚è¯´åœ¨æœ¬é¢˜ï¼ŒäºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆæ˜¯åœ¨0~posä¸­å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„ä¸‹æ ‡ï¼Œå› æ­¤æ­¤æ—¶L=0,R=posæ‰è¡Œï¼

```cpp
#include <bits/stdc++.h>
#include <vector>
using namespace std;
typedef long long ll;
int n;
const int N = 2500010;
struct sumup4{
    ll sum,c,d;
    bool operator< (const sumup4 &t) const{ //ç¬¦å·é‡è½½ï¼Œä¸»è¦ç”¨äºsortå‡½æ•°
        if(sum != t.sum) return sum < t.sum;
        if(c != t.c) return c < t.c;
        return d < t.d;
    }
}sumup4[N];
int main()
{
    scanf("%d",&n);
    int pos = 0;
    for(int c = 0; c*c <= n; c ++){
        for(int d = c; c*c+d*d <= n; d++){
            sumup4[pos++] = {c*c+d*d,c,d}; //å……åˆ†åˆ©ç”¨C++11çš„ç‰¹æ€§
        }
    }
    sort(sumup4,sumup4+pos);
    for(int a = 0; a*a <= n; a ++){
        for(int b = 0; a*a+b*b <= n; b ++){
            ll t = n - (a*a+b*b);
            int l = 0, r = pos-1;
            while(l < r){
                int mid = l + r >> 1;
                if(sumup4[mid].sum >= t) r=mid;
                else l=mid+1;
            }
            if(sumup4[l].sum == t){
                printf("%d %d %d %d\n",a,b,sumup4[l].c,sumup4[l].d);
                return 0;
            }
        }
    }
    return 0;
}
```

#### 1227.åˆ†å·§å…‹åŠ›

> https://www.acwing.com/problem/content/1229/

```cpp
//å…³äºäºŒåˆ†è¾¹ç•Œé—®é¢˜â€”â€”æ­¤è·¯ä¸é€šèµ°å½¼è·¯
//r=midä¸è¡Œå°±æ¢æˆl=midè¯•ä¸€ä¸‹
#include <bits/stdc++.h>
using namespace std;
const int N = 100010;
int n,k;
int pos = 0;
struct Cake{
    int h;
    int w;
}cake[N];
bool check(int mid){
    int cnt = 0;
    for(int i = 0; i < pos; i ++){
        int h = cake[i].h, w = cake[i].w;
        if(mid > h || mid > w) continue;
        int hnum = h / mid;
        int wnum = w / mid;
        cnt += hnum*wnum;
        if(cnt >= k) return true;
    }
    return false;
}
int main()
{
    scanf("%d%d",&n,&k);
    int maxsize = 0;
    for(int i = 0; i < n; i ++){
        int h,w;
        scanf("%d%d",&h,&w);
        cake[pos ++] = {h,w};
        maxsize = max(maxsize,h);
        maxsize = max(maxsize,w);
    }
    int l = 0, r = maxsize;
    while(l < r){
        int mid = l + r + 1 >> 1;
        if(check(mid)) l = mid;
        else r = mid - 1;
    }
    printf("%d\n",l);
    return 0;
}
```

#### 113.ç‰¹æ®Šæ’åºï¼ˆäº¤äº’é¢˜ï¼‰

> https://www.acwing.com/problem/content/115/
> è¯»æ‡‚é¢˜ç›®ç”šè‡³æ¯”é¢˜ç›®æœ¬èº«è¿˜éš¾ï¼›
> åå¯¹ç§°æ€§ï¼š$a>b,b<a$
> ä¼ é€’æ€§ï¼š$a<b,b<c\rightarrow a<c$

```cpp
// Forward declaration of compare API.
// bool compare(int a, int b);
// return bool means whether a is less than b.
//**è¿™é“é¢˜ç›®å…¶å®å°±å¯ä»¥è½¬åŒ–ä¸ºå¯¹äºä¸€ä¸ªå·²æ’å¥½åºå¤šæ•°ç»„ï¼Œæ’å…¥å…ƒç´ **
//**é€‰æ‹©åˆé€‚çš„ä½ç½®æ’å…¥å…ƒç´ ï¼Œè¿™é‡Œé€‰æ‹©ä½ç½®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•**
class Solution {
public:
    vector<int> specialSort(int N) {
        scanf("%d", &N);
        vector <int> ans;
        ans.push_back(1); //æ’å…¥äºŒåˆ†ï¼Œå…ˆæŠŠ1æ’è¿›å»ï¼Œè¿™æ ·å…¶ä»–æ•°å°±èƒ½å’Œ1è¿›è¡Œæ¯”è¾ƒäº†
        for(int i = 2 ; i <= N ; i ++)
        {
            int l = 0 , r = ans.size(); //åœ¨ansä¸­è¿›è¡ŒäºŒåˆ†
            while(l < r)
            {
                int mid = (l + r) >> 1; //å¤§äºmid çš„ ç¬¬ä¸€ä¸ªæ•°
                if(compare(i,ans[mid])) //
                r = mid;
                else l = mid + 1;
            }
            ans.insert(ans.begin() + l, i);//ç„¶ååœ¨ç»™å®šä½ç½®æ’å…¥i
        }
        return ans;
    }
};
```

### åŒæŒ‡é’ˆç®—æ³•

```cpp
å®é™…ä¸Šå°†åŸæ¥çš„å¤šé‡å¾ªç¯ï¼Œä½¿ç”¨åŒæŒ‡é’ˆçš„æ–¹å¼åœ¨ä¸€ä¸ªå¾ªç¯å†…å®Œæˆ
for (int i = 0, j = 0; i < n; i ++ )
{
    while (j < i && check(i, j)) j ++ ;

    // å…·ä½“é—®é¢˜çš„é€»è¾‘
}
æ ¸å¿ƒæ€æƒ³--->å°†ç©·ä¸¾O(n^2)ç®—æ³•ä¼˜åŒ–åˆ°O(n)
å¸¸è§é—®é¢˜åˆ†ç±»ï¼š
    (1) å¯¹äºä¸€ä¸ªåºåˆ—ï¼Œç”¨ä¸¤ä¸ªæŒ‡é’ˆç»´æŠ¤ä¸€æ®µåŒºé—´
    (2) å¯¹äºä¸¤ä¸ªåºåˆ—ï¼Œç»´æŠ¤æŸç§æ¬¡åºï¼Œæ¯”å¦‚å½’å¹¶æ’åºä¸­åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—çš„æ“ä½œ
```

**çªé—¨**ï¼šå…ˆå†™ä¸€ä¸ªæš´åŠ›è§£æ³•ï¼Œå»æ€è€ƒ**é™åˆ¶æ¡ä»¶**å’Œ**å•è°ƒæ€§å…³ç³»**ï¼Œç„¶åæƒ³åŠæ³•å»ä¼˜åŒ–ï¼Œå°†On2 --> On;

#### 799.æœ€é•¿è¿ç»­ä¸é‡å¤å­—åºåˆ—ï¼ˆåŒæŒ‡é’ˆç»å…¸å’æµä¼ ï¼‰

> https://www.acwing.com/problem/content/801/

```cpp
#include <bits/stdc++.h>
using namespace std;
const int N = 100010;
int a[N],n;
int x[N];
int main()
{
    scanf("%d",&n);
    for(int i = 0; i < n; i ++) scanf("%d",&a[i]);
    int ans = 0;
    // --j------------i--ï¼Œè€ƒè™‘iä¸ºå³ç«¯ç‚¹å»æ€è€ƒjçš„æƒ…å†µï¼ŒåŒæŒ‡é’ˆç®—æ³•å¸¸ç”¨
    //ç‰¹åˆ«ç»å…¸ï¼Œä¸€å®šè¦ç†Ÿé€äºå¿ƒï¼Œå¾ˆå¤šæ—¶å€™éƒ½è¦æƒ³åˆ°ï¼Œå›ºå®šä¸€ä¸ªç«¯ç‚¹
    for(int i = 0, j = 0; i < n; i ++){
        x[a[i]] ++;
        int res = 0;
        while(j < i && x[a[i]] > 1){ // ç»å…¸å’æµä¼ ï¼Œ è¿™é‡Œj < iå’Œx[a[i]] > 1éƒ½å¾ˆç»å…¸
            x[a[j]] --;
            j++;
        }
        res = i - j + 1;
        ans = max(ans,res);
    }
    printf("%d\n",ans);
    return 0;
}
```

```cpp
//ä¸¤ä¸ªåºåˆ—ï¼Œä¸€ä¸ªä»å‰å¾€åï¼Œä¸€ä¸ªä»åå¾€å‰å¯»æ‰¾ä¸¤ä¸ªåºåˆ—çš„ä¸‹æ ‡ï¼Œä½¿å¾—a[i] + b[j] = kçš„iï¼Œjå€¼
//æ³¨æ„ï¼Œè¿™é‡Œæˆç«‹çš„å‰ææ¡ä»¶æ˜¯a,bæ˜¯å‡åºåºåˆ—
int main()
{
    scanf("%d%d%lld",&n,&m,&x);
    for(int i = 0;i < n; i ++) scanf("%d",&a[i]);
    for(int i = 0;i < m; i ++) scanf("%d",&b[i]);
    for(int i = 0, j = m - 1; i < n; i ++){
        while(a[i] + b[j] > x) j --; //ä¸æš´åŠ›çš„åŒºåˆ«ï¼Œjä¸ä¼šå›é€€
        if(a[i] + b[j] == x) printf("%d %d\n",i,j);
    }
    return 0;
}
```

#### 1238.æ—¥å¿—ç»Ÿè®¡ï¼ˆåŒæŒ‡é’ˆç»å…¸IIï¼‰

> https://www.acwing.com/problem/content/1240/

```cpp
int main()
{
    scanf("%d%d%d", &n, &d, &k);
    for (int i = 0; i < n; i ++ ) scanf("%d%d", &logs[i].x, &logs[i].y);
    sort(logs, logs + n); //å…ˆç»™æ—¶é—´æ’ä¸ªåº!
  //è¿™ä¸€æ­¥è·Ÿä¸Šé¢ç»å…¸çš„åŒæŒ‡é’ˆç®—æ³•å¦‚å‡ºä¸€è¾™ï¼Œå˜äº†ä¸€ç‚¹ç‚¹ï¼Œä¸€å®šè¦çµæ´»åº”å¯¹ã€‚
    for (int i = 0, j = 0; i < n; i ++ )//å°†j---i,è¿™é‡Œiä¸ºå³ç«¯ç‚¹è¿›è¡Œæšä¸¾
    {
        int id = logs[i].y;
        cnt[id] ++ ; //ä¹Ÿæ˜¯ä¸€æ ·è®°å½•å½“å‰å…ƒç´ çš„ä¸ªæ•°
        while (logs[i].x - logs[j].x >= d) //ç»™å®šä¸¤ç«¯ç‚¹çš„æšä¸¾æ¡ä»¶
        {
            cnt[logs[j].y] -- ; //å½“jéœ€è¦ç§»åŠ¨çš„æƒ…å†µ
            j ++ ; //ç°åœ¨ç§»åŠ¨jå·¦ç«¯ç‚¹æŒ‡é’ˆ
        }
        if (cnt[id] >= k) st[id] = true; //å½“æ»¡è¶³é¢˜ç›®æ‰€ç»™æ¡ä»¶æ—¶è¿›è¡Œè¾“å‡º
    }
    for (int i = 0; i <= 100000; i ++ )
        if (st[i])
            printf("%d\n", i);
    return 0;
}
```

### é€’æ¨

> è¿™å°±åƒé“æ™ºåŠ›é¢˜å•¦ï¼Œè¦å‘ç°è§„å¾‹

#### 3777.ç –å—

> https://www.acwing.com/problem/content/description/3780/

```cpp
æ€è·¯ï¼šè´ªå¿ƒâ€”â€”é‡åˆ°è¿™ç§æ•°æ®é‡å¾ˆå°‘çš„ï¼Œå°±ç›´æ¥æš´åŠ›æšä¸¾å§ï½
æœ€ç»ˆçš„å­—ç¬¦ä¸²ï¼Œè¦ä¹ˆå…¨ä¸ºç™½è‰²ï¼Œè¦ä¹ˆå…¨ä¸ºé»‘è‰²ã€‚
>ä»¥ç›®æ ‡å…¨ä¸ºç™½è‰²ä¸ºä¾‹ï¼Œéå†å­—ç¬¦ä¸²çš„å‰ nâˆ’1ä¸ªç –å—ï¼Œæ¯é‡åˆ°ä¸€ä¸ªé»‘è‰²ç –å—ï¼Œå°±å¯¹å…¶è¿›è¡Œä¸€æ¬¡æ“ä½œï¼Œå°†è¯¥ç –å—å’Œä¸‹ä¸€ä¸ªç –å—å˜ä¸ºå¦ä¸€ç§é¢œè‰²ï¼Œå¹¶å°†ç»“æœè®°å½•åˆ°æ•°ç»„ä¸­ã€‚å¦‚æœå‘ç°æœ€åä¸€ä¸ªç –å—ä¸ä¸ºç™½è‰²ï¼Œé‚£è¯´æ˜æ— æ³•å°†ç –å—å…¨éƒ¨è½¬åŒ–ä¸ºç™½è‰²ï¼›é»‘è‰²åŒç†ã€‚
>è‹¥æœ€ç»ˆå…¨è½¬åŒ–ä¸ºç™½è‰²å’Œå…¨è½¬åŒ–ä¸ºé»‘è‰²å‡ä¸å¯è¡Œï¼Œåˆ™è¾“å‡º âˆ’1ï¼Œå¦åˆ™è¾“å‡ºä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆå³å¯ã€‚
```

#### 95.è´¹è§£çš„å¼€å…³

> https://www.acwing.com/problem/content/97/

```cpp
#include<iostream>
#include<queue>
#include<unordered_map>
using namespace std;
int t;
//å½“å‰çŠ¶æ€ï¼Œå½“å‰åˆ°æœ€ç»ˆçŠ¶æ€æ‰€éœ€æ­¥æ•°
unordered_map<int, int>vis;
//æ”¹è¿™ä¸ªç¯åŠå…¶ä¸Šä¸‹å·¦å³ç›¸é‚»çš„ç¯çš„çŠ¶æ€
//æ”¹ç¬¬idxä¸ªç¯;å·¦,ä¸ä¸ºæœ€å·¦ä¸€ä¸ª;ä¸Šï¼Œä¸ä¸ºç¬¬ä¸€æ’;ä¸‹ï¼Œä¸ä¸ºæœ€åä¸€æ’;å³ï¼Œä¸ä¸ºå³ä¸€ä¸ª
int turn(int st, int idx) { //è¿™é‡Œç”¨ä½è¿ç®—å‹ç¼©çš„æ–¹å¼å­˜æ”¾ä¸€ç§çŠ¶æ€
    st ^= (1 << idx);
    if (idx % 5) st ^= 1 << idx - 1;
    if (idx >= 5) st ^= 1 << idx - 5;
    if (idx < 20) st ^= 1 << idx + 5;
    if ((idx % 5) < 4) st ^= 1 << idx + 1;
    return st;
}
//ä»æœ€ç»ˆçŠ¶æ€é€†åºéå†ï¼Œéå†æ‰€æœ‰çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸ç”¨ç®¡åœ°å›¾ä»€ä¹ˆæ ·ï¼Œç›´æ¥bfså®Œï¼ŒæŸ¥å¯¹åº”mapå°±å®Œäº‹äº†
void bfs() {
    //0-2^25-1ï¼ˆ25ä¸ª1ï¼‰ï¼Œå…±2^25ç§çŠ¶æ€
    int st = (1 << 25) - 1;//å·¦ç§» å³ç§»çš„ä¼˜å…ˆçº§æ˜¯æœ€ä½çš„ï¼Œæ¯”åŠ å‡è¿˜è¦ä½ã€‚æ‰€ä»¥è¿™é‡Œçš„æ‹¬å·æ˜¯å¿…éœ€çš„
    queue<int>q;
    q.push(st);
    while (q.size())
    {
        int t = q.front();
        q.pop();
        if (vis[t] == 6) break;//åˆ¤æ–­6æ­¥ä»¥å†…ä½¿æ‰€æœ‰çš„ç¯éƒ½å˜äº®ã€‚
        for (int i = 0; i < 25; i++) {//å°è¯•å½“å‰çŠ¶æ€çš„æ¯ç›ç¯
            st = turn(t, i);//æ–°çš„çŠ¶æ€
            if (!vis.count(st)) {//è¯¥çŠ¶æ€æœªè¢«éå†è¿‡
                vis[st] = vis[t] + 1;
                q.push(st);
            }
        }
    }
}
int main() {
    bfs();//ç”¨map+æ·±æœçš„æ–¹å¼å­˜ä¸‹æ‰€æœ‰å¯èƒ½çš„æƒ…å†µä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ³•
    cin >> t;
    while (t--)
    {
        int sum = 0;
        for (int i = 0; i < 25; i++) {
            char ch;
            cin >> ch;
            sum += ((ch - '0') << i);//25ä¸ªå­—ç¬¦äºŒè¿›åˆ¶å‹ç¼©æˆæ•°å­—
        }
        if (vis[sum] == 0 && sum != (1 << 25) - 1) cout << -1 << endl;
        else cout << vis[sum] << endl;

    }
    return 0;
}
```

### é€’å½’

#### æ ‘çš„éå†ğŸŒ²ï¼ˆå›é¡¾äº†ä¸€ä¸‹å»ºæ ‘/å‰åº/ä¸­åº/ååº/å±‚æ¬¡éå†ï¼‰

> https://www.acwing.com/problem/content/1499/

><img src="./wdcs.assets/image-20230302000810366.png" alt="image-20230302000810366" style="zoom:33%;" />

```cpp
#include <iostream>
#include <cstring>
#include <algorithm>
#include <unordered_map>
#include <queue>

using namespace std;
const int N = 40;
int n;
int postorder[N], inorder[N];               //å‰åºéå†ï¼Œä¸­åºéå†
unordered_map<int, int> l, r, pos;          //ç”¨å“ˆå¸Œè¡¨æ¨¡æ‹ŸäºŒå‰æ ‘

//il irä¸­åºéå†åŒºé—´ï¼› pl prååºéå†åŒºé—´
int build(int il, int ir, int pl, int pr)
{
    int root = postorder[pr];
    int k = pos[root];                      //å¾—åˆ°æ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå†ä¸­çš„ä¸‹æ ‡

    //kå¤§äºilè¡¨ç¤ºæ ¹èŠ‚ç‚¹å·¦è¾¹è¿˜æœ‰èŠ‚ç‚¹ï¼Œå³å½“å‰æ ¹èŠ‚ç‚¹å­˜åœ¨å·¦å­æ ‘ï¼Œä¸‹åŒ
    //ä¸‹é¢ä¸¤è¡Œæ˜¯éš¾ç‚¹ï¼Œä¸¾ä¾‹è§£é‡Šè§å›¾
    if (il < k) l[root] = build(il, k - 1, pl, pl + k - 1 - il);
    if (ir > k) r[root] = build(k + 1, ir, pl + k - il, pr - 1);

    return root;
}

void bfs(int root)                          //BFSç”¨æ¥å±‚åºéå†è¾“å‡º
{
    queue<int> q;
    q.push(root);
    while (q.size())
    {
        auto t = q.front();
        q.pop();
        cout << t << ' ';

        if (l.count(t)) q.push(l[t]);       //åˆ¤æ–­è¯¥èŠ‚ç‚¹çš„å·¦å³å„¿å­æ˜¯å¦å­˜åœ¨
        if (r.count(t)) q.push(r[t]);       //å­˜åœ¨åˆ™åŠ å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹ä¸€å±‚éå†
    }
}

int main()
{
    cin >> n;
    for (int i = 0; i < n; i ++ ) cin >> postorder[i]; //è¾“å…¥ååºéå†æ ‘
    for (int i = 0; i < n; i ++ )
    {
        cin >> inorder[i]; //è¾“å…¥ä¸­åºéå†æ ‘
        pos[inorder[i]] = i;                //è®°å½•ä¸­åºéå†æ¯ä¸ªç‚¹ä½ç½®ï¼ˆå‰ªæï¼‰
    }

    int root = build(0, n - 1, 0, n - 1);   //å‚æ•°ä¸ºä¸­åºéå†åŒºé—´å’Œååºéå†åŒºé—´
    bfs(root);

    return 0;
}
```

#### çº¦æ•°ä¹‹å’Œã€ç»å…¸æ•°å­¦çŸ¥è¯†ã€‘

> https://www.acwing.com/problem/content/99/

##### è¡¥å……æ•°å­¦çŸ¥è¯†ï¼ˆ1ï¼‰çº¦æ•°ç›¸å…³æ€§è´¨

> [1ï¼Œn]é‡Œçº¦æ•°æœ‰içš„ä¸ªæ•°æ˜¯$\lfloor\frac{n}{i}\rfloor$ 
>
> å¦‚ä¸Šï¼Œn = 12æ—¶ï¼›
>
> 1~12ä¹‹é—´çš„æ•°ï¼Œæœ‰ä»¥1ä¸ºçº¦æ•°çš„æœ‰ 12/1 = 12ä¸ª
> 							æœ‰ä»¥2ä¸ºçº¦æ•°çš„æœ‰ 12/2 = 6ä¸ª
> 							æœ‰ä»¥3ä¸ºçº¦æ•°çš„æœ‰  12/3 = 4ä¸ª
>
> æ±‚æ‰€æœ‰çº¦æ•°çš„å’Œï¼Œå¯ä»¥ä½¿ç”¨ s+=n/i
>
> > **ä¸Šè¿°ç®—æ³•çš„è¿›ä¸€æ­¥ä¼˜åŒ–**ï¼š
> >
> > æ‰“è¡¨åå‘ç°ï¼Œè¡¨ä¸­æœ‰å¾ˆå¤š$\lfloor\frac{n}{i}\rfloor$æ˜¯ç›¸ç­‰çš„ï¼Œæ¯”å¦‚12çš„5ã€6éƒ½æ˜¯ä¸€æ ·çš„ã€‚
> >
> > å¯¹äºè¿™äº›ä¸€æ ·çš„æ•°æ¯æ¬¡éƒ½è®¡ç®—ä¸€æ¬¡éå¸¸æµªè´¹æ—¶é—´ï¼Œå¯ä»¥æ¯æ¬¡$i$è·³è½¬åˆ°$\lfloor\frac{n}{j}\rfloor = \lfloor\frac{n}{i}\rfloor+1$
> >
> > è¿™æ ·çš„jä¸Š å¯¹äºä¸­é—´ä¸€æ ·çš„æ•°ä¸€æ¬¡æ€§è®¡ç®—å®Œæ¯•ã€‚
> >
> > ```cpp
> > for(int i = 1, j; i <= n; i=j+1)
> > {
> > 	j = n/(n/i);
> >  ans += (n/i)*(j-i+1);
> > }
> > ```
>
> è¯•é™¤æ³•æ±‚æ‰€æœ‰çº¦æ•°
>
> ```cpp
> vector<int> get_divisors(int x)
> {
>     vector<int> res;
>     for (int i = 1; i <= x / i; i ++ )
>         if (x % i == 0)
>         {
>             res.push_back(i);
>             if (i != x / i) res.push_back(x / i);//å¦‚æœnæ˜¯içš„å¹³æ–¹ï¼Œå¯èƒ½æœ‰ä¸¤ä¸ªï¼Œè¿™é‡Œç›®çš„æ˜¯åªå­˜ä¸‹ä¸€ä¸ª
>         }
>     sort(res.begin(), res.end());
>     return res;
> }
> ```

**çº¦æ•°ä¸ªæ•°ä¸çº¦æ•°ä¹‹å’Œ**$N = p_1^{c_1} * p_2^{c_2} * ... *p_k^{c_k}$ 

```cpp
å¦‚æœ N = p1^c1 * p2^c2 * ... *pk^ck
çº¦æ•°ä¸ªæ•°ï¼š (c1 + 1) * (c2 + 1) * ... * (ck + 1)
çº¦æ•°ä¹‹å’Œï¼š (p1^0 + p1^1 + ... + p1^c1) * ... * (pk^0 + pk^1 + ... + pk^ck)
```

**æ•°è®ºå¸¸è§çš„é—®é¢˜ï¼š**

- å¯¹äºæ¯ä¸€ä¸ªå¤§äºç­‰äº2çš„æ­£æ•´æ•°nï¼Œéƒ½æœ‰$N=p_1^{c_1}*p_2^{c_2}*...*p_m^{c_m}$
- æ­£æ•´æ•°Nçš„æ¬§æ‹‰å‡½æ•°$phi(N)=N*(1-\frac{1}{p_1})*(1-\frac{1}{p_2})*...*(1-\frac{1}{p_m})=p_1^{c_1-1}*(p_1-1)*p_2^{c_2-1}*(p_2-1)*...*p_m^{c_m-1}*(p_m-1)$
- æ­£æ•´æ•°Nçš„çº¦æ•°ä¸ªæ•°ï¼š$d(N)=(1+c_1)*(1+c_2)*...*(1+c_m)$
- æ­£æ•´æ•°Nçš„æ‰€æœ‰çº¦æ•°å’Œï¼š$s(N)=(1+p_1+p_1^2+...+p_1^{c_1})*(1+p_2+p_2^2+...+p_2^{c_2})*(1+p_m+p_m^2+...+p_m^{c_m})$

##### æ¬§æ‹‰ç­›çº¦æ•°çš„æ–¹æ³•â­ï¸

> è¯æ˜è§ï¼šhttps://blog.csdn.net/weixin_43896346/article/details/88396182

- æ¬§æ‹‰ç­›

```cpp
inline void sieve(int x) {
    for(reg int i = 2;i <= x;i ++) {
        if(! vis[i])
            prim[++ len] = i;
        for(reg int j = 1;j <= len && i * prim[j] <= x;j ++) {
            vis[i * prim[j]] = 1;
            if(i % prim[j] == 0)
                break;
        }
    }
}
//è¯•é™¤æ³•æ±‚è´¨æ•°
for (int i = 2; i <= x / i; i ++ ){
  while(x%i == 0){
    x/=i;
    primes[i]++;
  }
  if(x > 1) primes[x]++;
}
```

- æ¬§æ‹‰å‡½æ•°

```cpp
inline void sieve(int x) {
	phi[1] = 1;
    for(reg int i = 2;i <= x;i ++) {
        if(! vis[i]) {
        	prim[++ len] = i;
        	phi[i] = i - 1;	//å› ä¸ºæ¬§æ‹‰å‡½æ•°ä»£è¡¨å°äºè¿™ä¸ªæ•°çš„ä¸”ä¸è¿™ä¸ªæ•°äº’è´¨çš„æ•°çš„ä¸ªæ•°ï¼Œæ‰€ä»¥è´¨æ•°çš„æ¬§æ‹‰å‡½æ•°ä¸ºå®ƒæœ¬èº«å‡1
        }
        for(reg int j = 1;j <= len && i * prim[j] <= x;j ++) {
            vis[i * prim[j]] = 1;
            if(i % prim[j] == 0) {
            	phi[i * prim[j]] = phi[i] * prim[j];
                break;
            }
            phi[i * prim[j]] = phi[i] * (prim[j] - 1);
        }
    }
}
```

- çº¦æ•°ä¸ªæ•°

```cpp
inline void sieve(int x) {
    for(reg int i = 2;i <= x;i ++) {
        if(! vis[i]) {
        	prim[++ len] = i;
        	d[i] = 2;	//è´¨æ•°çš„çº¦æ•°åªæœ‰1å’Œå®ƒæœ¬èº«
        	sum[i] = 1;
        }
        for(reg int j = 1;j <= len && i * prim[j] <= x;j ++) {
            vis[i * prim[j]] = 1;
            if(i % prim[j] == 0) {
            	sum[i * prim[j]] = sum[i] + 1;
            	d[i * prim[j]] = d[i] / (sum[i] + 1) * (sum[i] + 2);
                break;
            }
            sum[i * prim[j]] = 1;
            d[i * prim[j]] = d[i] * 2;
        }
    }
}
```

- çº¦æ•°å’Œ

```cpp
inline void sieve(int x) {
    for(reg int i = 2;i <= x;i ++) {
        if(! vis[i]) {
        	prim[++ len] = i;
        	psum[i] = s[i] = i + 1;
        }
        for(reg int j = 1;j <= len && i * prim[j] <= x;j ++) {
            vis[i * prim[j]] = 1;
            if(i % prim[j] == 0) {
            	psum[i * prim[j]] = psum[i] * prim[j] + 1;
            	s[i * prim[j]] = s[i] / psum[i] * psum[i * prim[j]]
                break;
            }
            psum[i * prim[j]] = prim[j] + 1;
            s[i * prim[j]] = s[i] * psum[i * prim[j]];
        }
    }
}
```

> æœ¬é¢˜æ€è·¯ï¼šã€åˆ†æ²»æ³•(åˆ†è§£ä¸ºkä¸ºå¶æ•°å’Œkä¸ºå¥‡æ•°çš„æƒ…å†µè¿›è¡Œåˆ†æ²»è®¨è®º)+çº¦æ•°+å¿«é€Ÿå¹‚ã€‘

```cpp
#include<iostream>
#include<unordered_map>
using namespace std;
typedef long long LL;
const int mod = 9901;
int A, B;
//ä¿å­˜è´¨å› å­ä»¥åŠå‡ºç°çš„æ¬¡æ•°
unordered_map<int, int> primes;
//è¯•é™¤æ³•è´¨å› å­åˆ†è§£
void divide(int n) {
    for(int i = 2; i <= n / i; i++) {
        if(n % i == 0) {
            while(n % i == 0) {
                primes[i]++;
                n /= i;
            }
        }
    }
    if(n > 1) {
        primes[n]++;
    }
}
//å¿«é€Ÿå¹‚
int qmid(int a, int b) {
    int res = 1;
    while(b) {
        if(b & 1) res = (LL)res * a % mod;
        a = (LL)a * a % mod;
        b >>= 1;
    }
    return res;
}
//p0 + .. + pk-1
int sum(int p, int k) {
    if(k == 1) return 1;  //è¾¹ç•Œ
    if(k % 2 == 0) {  
        return (LL)(qmid(p, k / 2) + 1) * sum(p, k / 2) % mod;
    }
    return (qmid(p, k - 1) + sum(p, k - 1)) % mod;
}
int main(){
    cin >> A >> B;

    //å¯¹Aåˆ†è§£è´¨å› å­
    divide(A);

    int res = 1;
    for(auto it : primes) {
        //pæ˜¯è´¨å› å­ï¼Œkæ˜¯è´¨å› å­çš„æ¬¡æ•°
        int p = it.first, k = it.second * B;
        // resè¦ä¹˜ä¸Šæ¯ä¸€é¡¹, æ³¨æ„è¿™é‡Œæ˜¯k + 1
        res = (LL)res * sum(p, k + 1) % mod;
    }
    if(!A) res = 0;

    cout << res << endl;

    return 0;
}
```

### å¹¶æŸ¥é›†

- æœ´ç´ çš„å¹¶æŸ¥é›†

  ```cpp
  int p[N]; //å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹
  //è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹
  int find(int x)
  {
      if(p[x] != x) p[x] = find(p[x]); //å¦‚æœp[x]ä¸æ˜¯æ ¹èŠ‚ç‚¹çš„è¯ï¼Œé‚£ä¹ˆå°±è®©p[x]ä¸ºä»–çš„ç¥–å®—ç»“ç‚¹
      return p[x];
  }
  
  //åˆå§‹åŒ–ï¼Œå‡è®¾èŠ‚ç‚¹ç¼–å·æ˜¯1~n
  for(int i = 1; i <= n; i ++) p[i] = i;
  
  //åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆ
  p[find(a)] = find(b); //åˆå¹¶æ“ä½œ ä¹Ÿå°±æ˜¯è®©açš„ç¥–å®—ç»“ç‚¹çš„çˆ¶äº²ç­‰äºbçš„ç¥–å®—ç»“ç‚¹
  ```

- ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†

  ```cpp
  int p[N], size[N];
  //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—ç»“ç‚¹ï¼Œsize[]åªæœ‰ç¥–å®—ç»“ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—ç»“ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡
  
  //è¿”å›xçš„ç¥–å®—ç»“ç‚¹
  int find(int x)
  {
      if(p[x] != x) p[x] = find(p[x]);
      return p[x];
  }
  //åˆå§‹åŒ–ï¼Œå‡å®šç»“ç‚¹ç¼–å·1~n
  for(int i = 1; i <= n; i ++)
  {
      p[i] = i;
      size[i] = 1;
  }
  
  //åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆ
  size[find(b)] += size[find(a)];
  p[find(a)] = find(b);
  ```

- ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹çš„å¹¶æŸ¥é›†

  ```cpp
  int p[N],d[N];
  //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—ç»“ç‚¹ï¼Œd[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦»
  
  //è¿”å›xçš„ç¥–å®—ç»“ç‚¹
  int find(int x)
  {
      if(p[x] != x)
      {
          int u = find(p[x]);
          d[x] += d[p[x]];
          p[x] = u;
      }
      return p[x];
  }
  
  //åˆå§‹åŒ–ï¼Œå‡å®šç»“ç‚¹ç¼–å·æ˜¯1~n
  for(int i = 1; i <= n; i ++)
  {
      p[i] = i;
      d[i] = 0;
  }
  
  //åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆ
  p[find(a)] = find(b);
  d[find(a)] = distance; //æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡
  ```

#### å¸¦æƒçš„ç»¼åˆå¹¶æŸ¥é›†

> https://www.acwing.com/problem/content/240/

```cpp
#include <bits/stdc++.h>

using namespace std;
const int N = 30010,M = 30000;
int T;
int p[N];
int dist[N],s[N];
int find(int x){
    if(p[x] != x){
        int u = find(p[x]);
        dist[x] += dist[p[x]];
        p[x] = u;
    }
    return p[x];
}
int main()
{
    ios::sync_with_stdio(false);
    cin.tie(0),cout.tie(0);
    cin >> T;
    for(int i = 1; i <= M; i ++){
        p[i] = i;
        s[i] = 1;
    }
    while(T --){
        string op;
        int a,b;
        cin >> op >> a >> b;
        int pa = find(a), pb = find(b);
        if(op == "M"){
            if(pa != pb){
                p[pa] = pb;
                dist[pa] = s[pb];
                s[pb] += s[pa];
            }
        }
        else{
            if(pa != pb) cout << "-1\n";
            else{
                cout << max(0,abs(dist[a] - dist[b]) - 1) << "\n";
            }
        }
    }
    return 0;
}
```

### å“ˆå¸Œ

- ä¸€èˆ¬å“ˆå¸Œ

```cpp
(1) æ‹‰é“¾æ³•
    int h[N], e[N], ne[N], idx;

    // å‘å“ˆå¸Œè¡¨ä¸­æ’å…¥ä¸€ä¸ªæ•°
    void insert(int x)
    {
        int k = (x % N + N) % N;
        e[idx] = x;
        ne[idx] = h[k];
        h[k] = idx ++ ;
    }

    // åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥è¯¢æŸä¸ªæ•°æ˜¯å¦å­˜åœ¨
    bool find(int x)
    {
        int k = (x % N + N) % N;
        for (int i = h[k]; i != -1; i = ne[i])
            if (e[i] == x)
                return true;
        return false;
    }
(2) å¼€æ”¾å¯»å€æ³•
    //æ³¨æ„å¼€å‘ä½Nçš„æ—¶å€™è¦å¤šå¼€æ¯”åŸæ•°æ®å¤šä¸¤åˆ°ä¸‰å€
    const int null = 0x3f3f3f3f;
    int h[N];

    // å¦‚æœxåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å›xçš„ä¸‹æ ‡ï¼›å¦‚æœxä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å›xåº”è¯¥æ’å…¥çš„ä½ç½®
    int find(int x)
    {
        int t = (x % N + N) % N;
        while (h[t] != null && h[t] != x)
        {
            t ++ ;
            if (t == N) t = 0;
        }
        return t;
    }
//å¼€æ”¾å¯»å€æ³•çš„è¯ï¼Œå¦‚æœæ˜¯åˆ é™¤ï¼Œå°±æ˜¯å…ˆæ‰¾åˆ°é‚£ä¸ªæ•°ï¼Œç„¶åæ‰“ä¸Šä¸€ä¸ªæ ‡è®°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°è¢«åˆ é™¤äº†
```

- å­—ç¬¦ä¸²å“ˆå¸Œ

```cpp
æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²çœ‹æˆPè¿›åˆ¶æ•°ï¼ŒPçš„ç»éªŒå€¼æ˜¯131æˆ–13331ï¼Œå–è¿™ä¸¤ä¸ªå€¼çš„å†²çªæ¦‚ç‡ä½
å°æŠ€å·§ï¼šå–æ¨¡çš„æ•°ç”¨2^64ï¼Œè¿™æ ·ç›´æ¥ç”¨unsigned long longå­˜å‚¨ï¼Œæº¢å‡ºçš„ç»“æœå°±æ˜¯å–æ¨¡çš„ç»“æœ

typedef unsigned long long ULL; //å¯ä»¥ä¸ç”¨å–æ¨¡äº†ï¼Œè¿™ä¸ªæº¢å‡ºå°±ç­‰ä»·äºè¿›è¡Œå–æ¨¡
ULL h[N], p[N]; // h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64

// åˆå§‹åŒ–
p[0] = 1;
for (int i = 1; i <= n; i ++ )
{
    h[i] = h[i - 1] * P + str[i];
    p[i] = p[i - 1] * P;
}

// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼
ULL get(int l, int r)
{
    return h[r] - h[l - 1] * p[r - l + 1];
}
```











### æ ‘çŠ¶æ•°ç»„



### çº¿æ®µæ ‘
