<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <title>Jasaxion's 个人博客</title>
  <link rel="icon" href="NotebookIcon.ico" >
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/vue.css" >
  <link rel="stylesheet" href="//unpkg.com/element-ui/lib/theme-chalk/index.css">
  <link rel="stylesheet" href="css/compatible.css">
  <style>
    .blog-corner {
      position: fixed;
      right: 0;
      bottom: 0;
      width: 0;
      height: 0;
      border-top: 40px solid transparent;
      border-left: 40px solid transparent;
      border-right: 40px solid #606266;
      border-bottom: 40px solid #606266;
      z-index: 1;
    }
  </style>
</head>
<body>
  <div id="app">正在加载中~✌</div>
  <script src="//unpkg.com/vue/dist/vue.js"></script>
  <script src="//unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="//unpkg.com/docsify-demo-box-vue/dist/docsify-demo-box-vue.min.js"></script>
  <script src="//unpkg.com/docsify-edit-on-github/index.js"></script>
  <script src="//unpkg.com/element-ui/lib/index.js"></script>
  <script src="//unpkg.com/element-ui/lib/umd/locale/en.js"></script>
  <script src="//unpkg.com/vue-data-tables@3.4.4/dist/data-tables.min.js"></script>
  <script src="//unpkg.com/json2csv@3.9.1/dist/json2csv.js"></script>
  <script src="//unpkg.com/docsify-plugin-codefund/index.js"></script>

  <script>
    Vue.use(DataTables)
    ELEMENT.locale(ELEMENT.lang.en)

    var data, titles;
    var id = 0;

    var define =
  `data = [{
    "content": "Water flood",
    "flow_no": "FW201601010001",
    "flow_type": "Repair",
    "flow_type_code": "repair",
    }, {
    "content": "Lock broken",
    "flow_no": "FW201601010002",
    "flow_type": "Repair",
    "flow_type_code": "repair",
    }, {
    "content": "Help to buy some drinks",
    "flow_no": "FW201601010003",
    "flow_type": "Help",
    "flow_type_code": "help"
  }];
  titles = [{
    prop: "flow_no",
    label: "NO."
    }, {
    prop: "content",
    label: "Content"
    }, {
    prop: "flow_type",
    label: "Type"
  }]`

    var fakeHttp =
`
// fake server
let serverData = []
for (let i = 0; i < 1000; i++) {
  serverData.push({
    'content': 'Lock broken' + i,
    'flow_no': 'FW20160101000' + i,
    'flow_type': i % 2 === 0 ? 'Repair' : 'Help',
    'flow_type_code': i % 2 === 0 ? 'repair' : 'help',
  })
}
let mockServer = function(res) {
  let datas = serverData.slice()
  let allKeys = Object.keys(data[0])
  // do filter
  res && res.filters && res.filters.forEach(filter => {
    datas = datas.filter(data => {
      let props = (filter.search_prop && [].concat(filter.search_prop)) || allKeys
      return props.some(prop => {
        if (!filter.value || filter.value.length === 0) {
          return true
        }
        return [].concat(filter.value).some(val => {
           return data[prop].toString().toLowerCase().indexOf(val.toLowerCase()) > -1
        })
      })
    })
  })
  // do sort
  if (res.sort && res.sort.order) {
    let order = res.sort.order
    let prop = res.sort.prop
    let isDescending = order === 'descending'
    datas.sort(function(a, b) {
      if (a[prop] > b[prop]) {
        return 1
      } else if (a[prop] < b[prop]) {
        return -1
      } else {
        return 0
      }
    })
    if (isDescending) {
      datas.reverse()
    }
  }
  return {
    data: datas.slice((res.page - 1) * res.pageSize, res.page * res.pageSize),
    req: res,
    ts: new Date(),
    total: datas.length
  }
}
let i = 1
// fake http
function http(res, time = 200) {
  return new Promise((resolve, reject) => {
    setTimeout(_ => {
      var data = mockServer(res)
      console.log('fake server return data: ', data)
      resolve(data)
    }, time)
  })
}`
    eval(define)
    eval(fakeHttp)

    var jsResources = '<scr' + 'ipt src="//unpkg.com/vue/dist/vue.js"></scr' + 'ipt>'
      + '\n<scr' + `ipt src="//unpkg.com/element-ui/lib/index.js"></scr` + 'ipt>'
      + '\n<scr' + `ipt src="//unpkg.com/element-ui/lib/umd/locale/en.js"></scr` + 'ipt>'
      + '\n<scr' + `ipt src="//unpkg.com/vue-data-tables@3.4.4/dist/data-tables.min.js"></scr` + 'ipt>'
    var cssResources = '@import url("//unpkg.com/element-ui/lib/theme-chalk/index.css");'
    var bootCode =
      'ELEMENT.locale(ELEMENT.lang.en)\n'
      + 'Vue.use(DataTables.DataTables)\n'
      + 'Vue.use(DataTables.DataTablesServer)\n'
      + 'var data, titles\n\n' + define + '\n'
      + fakeHttp + '\n\n';

    window.$docsify = {
      coverpage: [
        '/',
        '/en-us/',
        '/zh-cn/'
      ],
      name: 'Jasaxion の 个人博客',
      repo: 'https://github.com/Jasaxion',
      subMaxLevel: 2,
      loadSidebar: true,
      loadNavbar: true,
      search: 'auto', // default,
	  search: {
		 placeholder: '此处进行搜索',
		 noData: '没有找到结果~',
	  },
      plugins: [
        DemoBoxVue.create(jsResources, cssResources, bootCode),
        EditOnGithubPlugin.create(
          'https://github.com/Jasaxion/Jasaxion.github.io/tree/main/docs/',
		  null,
		  function(file) {
			return '在GitHub上编辑'
			}
		),
        function (hook) {
          var footer = [
            '<hr/>',
            '<footer>',
            '<span><a href="https://github.com/Jasaxion">Jasaxion</a> &copy;2021.</span>',
            '<span>本博客构建依据 <a href="https://github.com/docsifyjs/docsify" target="_blank">docsify</a>.</span>',
            '</footer>'
          ].join('')

          hook.afterEach(function (html) {
            return html + footer
          })
        },
        DocsifyCodefund.create(15)
      ]
    }
  </script>
  <script src="//unpkg.com/docsify/lib/docsify.min.js"></script>
  <script src="//unpkg.com/docsify/lib/plugins/external-script.min.js"></script>
  <script src="//unpkg.com/docsify/lib/plugins/search.min.js"></script>
  <script src="//unpkg.com/docsify-count/dist/countable.js"></script>

</body>
</html>
